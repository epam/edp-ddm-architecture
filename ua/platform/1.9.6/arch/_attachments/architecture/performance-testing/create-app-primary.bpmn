<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_17aucpn" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="4.6.0">
  <bpmn:collaboration id="Collaboration_1ta1se6">
    <bpmn:extensionElements>
      <camunda:properties>
        <camunda:property name="eSign" value="true" />
      </camunda:properties>
    </bpmn:extensionElements>
    <bpmn:participant id="Participant_11d2pgr" name="Створення заяви на первинне внесення" processRef="create-app-primary" />
  </bpmn:collaboration>
  <bpmn:process id="create-app-primary" name="Створення заяви на первинне внесення" isExecutable="true">
    <bpmn:startEvent id="start_event" name="початок процесу" camunda:formKey="shared-search-lab-with-subject" camunda:initiator="initiator">
      <bpmn:outgoing>Flow_05f6jm9</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="Flow_0ar17vk" sourceRef="Gateway_0f6psou" targetRef="Activity_19gsmcp" />
    <bpmn:sequenceFlow id="Flow_1uh4xww" name="так" sourceRef="Gateway_162ny7c" targetRef="Activity_1frdjoy">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!lastSolutionResponse.value.responseBody.elements().isEmpty() &amp;&amp; lastSolutionResponse.value.responseBody.elements()[0].prop('applicationTypeId').value().equals(appTypeResponse.value.responseBody.elements()[0].prop('applicationTypeId').value()) &amp;&amp; lastSolutionResponse.value.responseBody.elements()[0].prop('solutionTypeId').value().equals(solTypeResponse.value.responseBody.elements()[0].prop('solutionTypeId').value())}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0uop016" name="ні" sourceRef="Gateway_162ny7c" targetRef="Activity_0cp9hlw">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${lastSolutionResponse.value.responseBody.elements().isEmpty() || !lastSolutionResponse.value.responseBody.elements()[0].prop('applicationTypeId').value().equals(appTypeResponse.value.responseBody.elements()[0].prop('applicationTypeId').value()) || !lastSolutionResponse.value.responseBody.elements()[0].prop('solutionTypeId').value().equals(solTypeResponse.value.responseBody.elements()[0].prop('solutionTypeId').value())}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0eqw8ly" sourceRef="Activity_13fg2yb" targetRef="Activity_1ka8zlc" />
    <bpmn:sequenceFlow id="Flow_1fddlbk" name="ні" sourceRef="Gateway_1ggxhbd" targetRef="Gateway_1qwq4c4">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!responseEdr.value.responseBody.elements().get(0).prop('state').value().equals('SUSPENDED') &amp;&amp; !responseEdr.value.responseBody.elements().get(0).prop('state').value().equals('CANCELED')}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1xtqrlt" name="так" sourceRef="Gateway_1ggxhbd" targetRef="Activity_shared-subject-status-error">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${responseEdr.value.responseBody.elements().get(0).prop('state').value().equals('SUSPENDED') || responseEdr.value.responseBody.elements().get(0).prop('state').value().equals('CANCELED')}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0bntmmt" sourceRef="Activity_1dg6vr0" targetRef="Gateway_1ggxhbd" />
    <bpmn:sequenceFlow id="Flow_160q9z1" sourceRef="Activity_17h0e3v" targetRef="Activity_1hj4q4q" />
    <bpmn:sequenceFlow id="Flow_0fvc6on" sourceRef="Activity_0cfy5es" targetRef="Activity_17h0e3v" />
    <bpmn:sequenceFlow id="Flow_0sxg0gr" sourceRef="Activity_0xtdm1d" targetRef="Activity_0cfy5es" />
    <bpmn:sequenceFlow id="Flow_01qip9y" sourceRef="Activity_0pkfuvm" targetRef="Activity_1hldx1b" />
    <bpmn:sequenceFlow id="Flow_10rk4pw" sourceRef="Activity_1183rrp" targetRef="Activity_0z1mf20" />
    <bpmn:sequenceFlow id="Flow_1yb4cif" sourceRef="Activity_115jjbm" targetRef="Activity_1183rrp" />
    <bpmn:sequenceFlow id="Flow_095xjzl" sourceRef="Activity_0vb7epo" targetRef="Activity_0xtdm1d" />
    <bpmn:sequenceFlow id="Flow_1fmohce" sourceRef="Activity_0qxn3m4" targetRef="Activity_01n89u4" />
    <bpmn:sequenceFlow id="Flow_14s444c" name="ні" sourceRef="Gateway_04pw09i" targetRef="Gateway_08ah0a4">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!submission('Activity_shared-check-complience').formData.prop('errorCheckFlag').boolValue()}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_07fzwsa" sourceRef="Activity_0wnn70u" targetRef="Activity_1e08895" />
    <bpmn:sequenceFlow id="Flow_03g1pyj" sourceRef="Activity_0g747qa" targetRef="Gateway_0wa0mxl" />
    <bpmn:sequenceFlow id="Flow_0rc8gzz" name="ні" sourceRef="Gateway_01wk2q7" targetRef="Activity_0g747qa">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!labResponse.value.responseBody.prop('accreditationFlag').boolValue()}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0ocvyix" sourceRef="Gateway_0jde3l2" targetRef="Activity_1h0f0du" />
    <bpmn:sequenceFlow id="Flow_1gkmy7i" sourceRef="Activity_1hldx1b" targetRef="Event_0dcgtvi" />
    <bpmn:sequenceFlow id="Flow_1qplogf" sourceRef="Event_0q95h6c" targetRef="Gateway_19mmoz0" />
    <bpmn:sequenceFlow id="Flow_1ez7nb5" sourceRef="Activity_1hj4q4q" targetRef="Event_0r6lc1n" />
    <bpmn:sequenceFlow id="Flow_0s6qatb" sourceRef="Event_1lubmwc" targetRef="Gateway_083f29d" />
    <bpmn:sequenceFlow id="Flow_1vs5ys0" name="так" sourceRef="Gateway_04pw09i" targetRef="Activity_0wnn70u">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${submission('Activity_shared-check-complience').formData.prop('errorCheckFlag').boolValue()}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1ydogcf" sourceRef="Gateway_083f29d" targetRef="Activity_shared-sign-app-include" />
    <bpmn:sequenceFlow id="Flow_0bjjwl5" name="ні" sourceRef="Gateway_0wa0mxl" targetRef="Activity_1p9drdd">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression" language="groovy">(staffResponse.responseBody.elements()[0]?.prop("cnt")?.numberValue() ?: 0) == 0</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1ifee32" name="так" sourceRef="Gateway_0wa0mxl" targetRef="Gateway_0jde3l2">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression" language="groovy">(staffResponse.responseBody.elements()[0]?.prop("cnt")?.numberValue() ?: 0) &gt; 0</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0fkrtc2" name="так" sourceRef="Gateway_01wk2q7" targetRef="Gateway_0jde3l2">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${labResponse.value.responseBody.prop('accreditationFlag').boolValue()}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1sszi12" sourceRef="Activity_shared-add-factors" targetRef="Gateway_0f6psou" />
    <bpmn:sequenceFlow id="Flow_12s7c0i" sourceRef="Activity_shared-check-complience" targetRef="Gateway_04pw09i" />
    <bpmn:sequenceFlow id="Flow_1mss6lk" sourceRef="Activity_shared-add-decision-include" targetRef="Activity_1y6ev6g" />
    <bpmn:sequenceFlow id="Flow_1qtm8ta" sourceRef="Activity_shared-add-decision-deny" targetRef="Activity_0xp7isz" />
    <bpmn:sequenceFlow id="Flow_0l7mjsy" sourceRef="Activity_1xdhhss" targetRef="Activity_shared-add-factors" />
    <bpmn:sequenceFlow id="Flow_1m26089" sourceRef="Gateway_19mmoz0" targetRef="Activity_shared-sign-app-deny" />
    <bpmn:sequenceFlow id="Flow_002ddyj" sourceRef="Activity_0czoyo0" targetRef="Gateway_19mmoz0" />
    <bpmn:sequenceFlow id="Flow_1f6bexx" sourceRef="Activity_1h0f0du" targetRef="Activity_shared-add-application" />
    <bpmn:sequenceFlow id="Flow_06ftmz7" sourceRef="Activity_19gsmcp" targetRef="Activity_shared-check-complience" />
    <bpmn:sequenceFlow id="Flow_0p576zs" sourceRef="Activity_01n89u4" targetRef="Activity_shared-add-decision-include" />
    <bpmn:sequenceFlow id="Flow_18e6jb4" sourceRef="Activity_1e08895" targetRef="Activity_shared-add-decision-deny" />
    <bpmn:sequenceFlow id="Flow_1xciytp" sourceRef="Activity_0xp7isz" targetRef="Activity_1eujure" />
    <bpmn:sequenceFlow id="Flow_0noeu0t" sourceRef="Activity_1y6ev6g" targetRef="Activity_shared-add-letter-data" />
    <bpmn:sequenceFlow id="Flow_0ql0du7" sourceRef="Activity_shared-add-letter-data" targetRef="Activity_1e9m9dw" />
    <bpmn:sequenceFlow id="Flow_0dzoszc" sourceRef="Activity_1e9m9dw" targetRef="Gateway_083f29d" />
    <bpmn:sequenceFlow id="Flow_1yxm2a4" sourceRef="Activity_shared-sign-app-include" targetRef="Activity_0vb7epo" />
    <bpmn:sequenceFlow id="Flow_01nffya" sourceRef="Activity_1eujure" targetRef="Activity_0czoyo0" />
    <bpmn:sequenceFlow id="Flow_01m4t8u" sourceRef="Activity_shared-sign-app-deny" targetRef="Activity_115jjbm" />
    <bpmn:sequenceFlow id="Flow_0xg7s63" sourceRef="Activity_0z1mf20" targetRef="Activity_0pkfuvm" />
    <bpmn:sequenceFlow id="Flow_10s3jst" sourceRef="Activity_shared-subject-status-error" targetRef="Activity_1jiicwq" />
    <bpmn:sequenceFlow id="Flow_1ib1gio" sourceRef="Activity_0x5gqfo" targetRef="Gateway_0jde3l2" />
    <bpmn:sequenceFlow id="Flow_05f6jm9" sourceRef="start_event" targetRef="Activity_1rh5bgq" />
    <bpmn:sequenceFlow id="Flow_0oeyv0s" sourceRef="Activity_1ka8zlc" targetRef="Activity_1dh67zh" />
    <bpmn:sequenceFlow id="Flow_0ahfme7" sourceRef="Activity_1dh67zh" targetRef="Gateway_162ny7c" />
    <bpmn:sequenceFlow id="Flow_0hkd2ao" name="ні" sourceRef="Gateway_08ah0a4" targetRef="Activity_0qxn3m4">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!execution.hasVariable('edrSuspendedOrCancelled')}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_18r8jmf" name="так" sourceRef="Gateway_08ah0a4" targetRef="Activity_1d0o873">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${execution.hasVariable('edrSuspendedOrCancelled')}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0668zhr" sourceRef="Activity_1d0o873" targetRef="Gateway_0f6psou" />
    <bpmn:sequenceFlow id="Flow_1m21hoy" sourceRef="Activity_1jiicwq" targetRef="Activity_0x5gqfo" />
    <bpmn:sequenceFlow id="Flow_13wrb1w" sourceRef="Activity_0cp9hlw" targetRef="Gateway_01wk2q7" />
    <bpmn:sequenceFlow id="Flow_1em4nsp" sourceRef="Activity_1p9drdd" targetRef="Gateway_0tzg04v" />
    <bpmn:sequenceFlow id="Flow_1xadmvr" sourceRef="Gateway_0tzg04v" targetRef="Event_0u7w7m9" />
    <bpmn:sequenceFlow id="Flow_00ihut4" sourceRef="Activity_1frdjoy" targetRef="Gateway_0tzg04v" />
    <bpmn:sequenceFlow id="Flow_0samdb3" sourceRef="Activity_shared-add-application" targetRef="Activity_1xdhhss" />
    <bpmn:sequenceFlow id="Flow_11cf2n7" sourceRef="Gateway_1qwq4c4" targetRef="Activity_13fg2yb" />
    <bpmn:serviceTask id="Activity_1rh5bgq" name="Пошук суб&#39;єкту" camunda:modelerTemplate="dataFactoryConnectorReadDelegate" camunda:delegateExpression="${dataFactoryConnectorReadDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">subject</camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${initiator().accessToken}</camunda:inputParameter>
          <camunda:inputParameter name="id">${submission('start_event').formData.prop('laboratory').prop('subjectId').value()}</camunda:inputParameter>
          <camunda:outputParameter name="subjectResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_05f6jm9</bpmn:incoming>
      <bpmn:outgoing>Flow_0iv8xad</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_0iv8xad" sourceRef="Activity_1rh5bgq" targetRef="Gateway_1wsaack" />
    <bpmn:sequenceFlow id="Flow_1pp2p8n" name="false" sourceRef="Gateway_1wsaack" targetRef="Activity_1dg6vr0">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!subjectResponse.value.responseBody.prop('absentEdrFlag').boolValue()}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:exclusiveGateway id="Gateway_1wsaack" name="edrAbsentFlag">
      <bpmn:incoming>Flow_0iv8xad</bpmn:incoming>
      <bpmn:outgoing>Flow_1pp2p8n</bpmn:outgoing>
      <bpmn:outgoing>Flow_1mhb3e2</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:exclusiveGateway id="Gateway_1ggxhbd" name="Статус суб&#39;єкту -1 (&#34;скасовано&#34;) або 3 (&#34;припинено&#34;)">
      <bpmn:incoming>Flow_0bntmmt</bpmn:incoming>
      <bpmn:outgoing>Flow_1xtqrlt</bpmn:outgoing>
      <bpmn:outgoing>Flow_1fddlbk</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="Activity_1dg6vr0" name="Пошук суб&#39;єкту в ЄДР" camunda:modelerTemplate="searchSubjectsEdrRegistryConnectorDelegate" camunda:delegateExpression="${searchSubjectsEdrRegistryConnectorDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="passport" />
          <camunda:inputParameter name="name" />
          <camunda:inputParameter name="authorizationToken">1dc9f1f9b1e5be4d37c2b68993af243923ea7620</camunda:inputParameter>
          <camunda:inputParameter name="code">${!submission('start_event').formData.hasProp('edrpou') ? submission('start_event').formData.prop('rnokppCode').value() : submission('start_event').formData.prop('edrpou').value()}</camunda:inputParameter>
          <camunda:outputParameter name="responseEdr">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1pp2p8n</bpmn:incoming>
      <bpmn:outgoing>Flow_0bntmmt</bpmn:outgoing>
      <bpmn:property id="Property_0du8i72" name="__targetRef_placeholder" />
    </bpmn:serviceTask>
    <bpmn:userTask id="Activity_shared-subject-status-error" name="Статус в ЄДР &#34;Скаcовано&#34; або &#34;Припинено&#34;" camunda:modelerTemplate="formUserTaskTemplate" camunda:formKey="shared-subject-status-error" camunda:assignee="${initiator}">
      <bpmn:extensionElements />
      <bpmn:incoming>Flow_1xtqrlt</bpmn:incoming>
      <bpmn:outgoing>Flow_10s3jst</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:serviceTask id="Activity_13fg2yb" name="Запит даних про актуальну заяву" camunda:modelerTemplate="dataFactoryConnectorSearchDelegate" camunda:delegateExpression="${dataFactoryConnectorSearchDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">last-laboratory-solution</camunda:inputParameter>
          <camunda:inputParameter name="searchConditions">
            <camunda:map>
              <camunda:entry key="laboratoryId">${submission('start_event').formData.prop('laboratory').prop('laboratoryId').value()}</camunda:entry>
            </camunda:map>
          </camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${initiator().accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="lastSolutionResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_11cf2n7</bpmn:incoming>
      <bpmn:outgoing>Flow_0eqw8ly</bpmn:outgoing>
      <bpmn:property id="Property_18l8u4n" name="__targetRef_placeholder" />
      <bpmn:dataInputAssociation id="DataInputAssociation_037l3td">
        <bpmn:sourceRef>DataStoreReference_0xi9b6z</bpmn:sourceRef>
        <bpmn:targetRef>Property_18l8u4n</bpmn:targetRef>
      </bpmn:dataInputAssociation>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_162ny7c" name="Отсання заява на включення та прийнята?">
      <bpmn:incoming>Flow_0ahfme7</bpmn:incoming>
      <bpmn:outgoing>Flow_0uop016</bpmn:outgoing>
      <bpmn:outgoing>Flow_1uh4xww</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="Activity_1ka8zlc" name="Запит до довідника applicationType (ADD)" camunda:modelerTemplate="dataFactoryConnectorSearchDelegate" camunda:delegateExpression="${dataFactoryConnectorSearchDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">application-type-equal-constant-code</camunda:inputParameter>
          <camunda:inputParameter name="searchConditions">
            <camunda:map>
              <camunda:entry key="constantCode">ADD</camunda:entry>
            </camunda:map>
          </camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${initiator().accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="appTypeResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0eqw8ly</bpmn:incoming>
      <bpmn:outgoing>Flow_0oeyv0s</bpmn:outgoing>
      <bpmn:property id="Property_1oorhmh" name="__targetRef_placeholder" />
      <bpmn:dataInputAssociation id="DataInputAssociation_1kkoy3a">
        <bpmn:sourceRef>DataStoreReference_070vjg5</bpmn:sourceRef>
        <bpmn:targetRef>Property_1oorhmh</bpmn:targetRef>
      </bpmn:dataInputAssociation>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_1dh67zh" name="Запит до довідника solutionType (ADD)" camunda:modelerTemplate="dataFactoryConnectorSearchDelegate" camunda:delegateExpression="${dataFactoryConnectorSearchDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">solution-type-equal-constant-code</camunda:inputParameter>
          <camunda:inputParameter name="searchConditions">
            <camunda:map>
              <camunda:entry key="constantCode">ADD</camunda:entry>
            </camunda:map>
          </camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${initiator().accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="solTypeResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0oeyv0s</bpmn:incoming>
      <bpmn:outgoing>Flow_0ahfme7</bpmn:outgoing>
      <bpmn:property id="Property_055l6qn" name="__targetRef_placeholder" />
      <bpmn:dataInputAssociation id="DataInputAssociation_0nu5dq2">
        <bpmn:sourceRef>DataStoreReference_1rohhr1</bpmn:sourceRef>
        <bpmn:targetRef>Property_055l6qn</bpmn:targetRef>
      </bpmn:dataInputAssociation>
    </bpmn:serviceTask>
    <bpmn:dataStoreReference id="DataStoreReference_070vjg5" name="Дата Фабрика" />
    <bpmn:dataStoreReference id="DataStoreReference_1rohhr1" name="Дата Фабрика" />
    <bpmn:dataStoreReference id="DataStoreReference_0xi9b6z" name="Дата Фабрика" />
    <bpmn:scriptTask id="Activity_0x5gqfo" name="Зберегти статус суб&#39;єкта" camunda:resultVariable="edrSuspendedOrCancelled">
      <bpmn:incoming>Flow_1m21hoy</bpmn:incoming>
      <bpmn:outgoing>Flow_1ib1gio</bpmn:outgoing>
      <bpmn:script>true</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:serviceTask id="Activity_1jiicwq" name="Пошук даних про лабораторію" camunda:modelerTemplate="dataFactoryConnectorReadDelegate" camunda:delegateExpression="${dataFactoryConnectorReadDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">laboratory</camunda:inputParameter>
          <camunda:inputParameter name="id">${submission('start_event').formData.prop('laboratory').prop('laboratoryId').stringValue()}</camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${completer('Activity_shared-subject-status-error').accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="labResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_10s3jst</bpmn:incoming>
      <bpmn:outgoing>Flow_1m21hoy</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_01wk2q7" name="Є ознака акредитованості?">
      <bpmn:incoming>Flow_13wrb1w</bpmn:incoming>
      <bpmn:outgoing>Flow_0fkrtc2</bpmn:outgoing>
      <bpmn:outgoing>Flow_0rc8gzz</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:dataStoreReference id="DataStoreReference_1j4lba4" name="Дата Фабрика" />
    <bpmn:exclusiveGateway id="Gateway_0wa0mxl" name="Є дані?">
      <bpmn:incoming>Flow_03g1pyj</bpmn:incoming>
      <bpmn:outgoing>Flow_0bjjwl5</bpmn:outgoing>
      <bpmn:outgoing>Flow_1ifee32</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:exclusiveGateway id="Gateway_0jde3l2">
      <bpmn:incoming>Flow_1ifee32</bpmn:incoming>
      <bpmn:incoming>Flow_0fkrtc2</bpmn:incoming>
      <bpmn:incoming>Flow_1ib1gio</bpmn:incoming>
      <bpmn:outgoing>Flow_0ocvyix</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="Activity_0g747qa" name="Перевірка наявності кадрів" camunda:modelerTemplate="dataFactoryConnectorSearchDelegate" camunda:delegateExpression="${dataFactoryConnectorSearchDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">staff-equal-laboratory-id-count</camunda:inputParameter>
          <camunda:inputParameter name="searchConditions">
            <camunda:map>
              <camunda:entry key="laboratoryId">${submission('start_event').formData.prop('laboratory').prop('laboratoryId').value()}</camunda:entry>
            </camunda:map>
          </camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${initiator().accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="staffResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0rc8gzz</bpmn:incoming>
      <bpmn:outgoing>Flow_03g1pyj</bpmn:outgoing>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_13ijfjx">
        <bpmn:targetRef>DataStoreReference_1j4lba4</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_0cp9hlw" name="Пошук даних про лабораторію" camunda:modelerTemplate="dataFactoryConnectorReadDelegate" camunda:delegateExpression="${dataFactoryConnectorReadDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">laboratory</camunda:inputParameter>
          <camunda:inputParameter name="id">${submission('start_event').formData.prop('laboratory').prop('laboratoryId').stringValue()}</camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${initiator().accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="labResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0uop016</bpmn:incoming>
      <bpmn:outgoing>Flow_13wrb1w</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:scriptTask id="Activity_1h0f0du" name="Підготовка даних документа для показу" scriptFormat="groovy">
      <bpmn:incoming>Flow_0ocvyix</bpmn:incoming>
      <bpmn:outgoing>Flow_1f6bexx</bpmn:outgoing>
      <bpmn:script>def cephData = [:]
['name', 'edrpou'].each {
  cephData[it] = labResponse.responseBody.prop(it).stringValue()
}
execution.removeVariable('payload')
set_transient_variable('payload', S(cephData, 'application/json'))
def fullName = initiator().fullName
if (fullName == null) {
  fullName = completer('Activity_shared-subject-status-error').fullName
}
execution.setVariable('fullName', fullName)</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:userTask id="Activity_shared-add-application" name="Внести заяву" camunda:modelerTemplate="formUserTaskTemplate" camunda:formKey="shared-add-application" camunda:assignee="${initiator}">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="formVariables" value="fullName" />
        </camunda:properties>
        <camunda:inputOutput>
          <camunda:inputParameter name="userTaskInputFormDataPrepopulate">${payload}</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1f6bexx</bpmn:incoming>
      <bpmn:outgoing>Flow_0samdb3</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:serviceTask id="Activity_1p9drdd" name="Формування валідаційної помилки" camunda:modelerTemplate="userDataValidationErrorDelegate" camunda:delegateExpression="${userDataValidationErrorDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="validationErrors">
            <camunda:list>
              <camunda:value>{"field": "laboratory", "value": "${submission('start_event').formData.prop('laboratory').prop('laboratoryId').value()}", "message": "Додайте кадровий склад до лабораторії"}</camunda:value>
            </camunda:list>
          </camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0bjjwl5</bpmn:incoming>
      <bpmn:outgoing>Flow_1em4nsp</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_1frdjoy" name="Формування валідаційної помилки" camunda:modelerTemplate="userDataValidationErrorDelegate" camunda:delegateExpression="${userDataValidationErrorDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="validationErrors">
            <camunda:list>
              <camunda:value>{"field": "laboratory", "value": "${submission('start_event').formData.prop('laboratory').prop('laboratoryId').value()}", "message": "Заява на первинне внесення вже створена"}</camunda:value>
            </camunda:list>
          </camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1uh4xww</bpmn:incoming>
      <bpmn:outgoing>Flow_00ihut4</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_0tzg04v">
      <bpmn:incoming>Flow_1em4nsp</bpmn:incoming>
      <bpmn:incoming>Flow_00ihut4</bpmn:incoming>
      <bpmn:outgoing>Flow_1xadmvr</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:scriptTask id="Activity_1xdhhss" name="Підготовка даних документа для показу" scriptFormat="groovy">
      <bpmn:incoming>Flow_0samdb3</bpmn:incoming>
      <bpmn:outgoing>Flow_0l7mjsy</bpmn:outgoing>
      <bpmn:script>def cephData = [:]
        ['name', 'registrationNo'].each {
        cephData[it] = submission('Activity_shared-add-application').formData.prop(it).stringValue()
        }

        execution.removeVariable('payload')
        set_transient_variable('payload', S(cephData, 'application/json'))</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:userTask id="Activity_shared-add-factors" name="Внести фактори" camunda:modelerTemplate="formUserTaskTemplate" camunda:formKey="shared-add-factors" camunda:assignee="${initiator}">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="eSign" value="" />
        </camunda:properties>
        <camunda:inputOutput>
          <camunda:inputParameter name="userTaskInputFormDataPrepopulate">${payload}</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0l7mjsy</bpmn:incoming>
      <bpmn:outgoing>Flow_1sszi12</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:scriptTask id="Activity_19gsmcp" name="Підготовка даних документа для показу" scriptFormat="groovy">
      <bpmn:incoming>Flow_0ar17vk</bpmn:incoming>
      <bpmn:outgoing>Flow_06ftmz7</bpmn:outgoing>
      <bpmn:script>def cephData = [:]
        ['name', 'registrationNo'].each {
        cephData[it] = submission('Activity_shared-add-application').formData.prop(it).stringValue()
        }

        execution.removeVariable('payload')
        set_transient_variable('payload', S(cephData, 'application/json'))</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:userTask id="Activity_shared-check-complience" name="Перевірити на відповідність" camunda:modelerTemplate="formUserTaskTemplate" camunda:formKey="shared-check-complience" camunda:assignee="${initiator}">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="eSign" value="" />
        </camunda:properties>
        <camunda:inputOutput>
          <camunda:inputParameter name="userTaskInputFormDataPrepopulate">${payload}</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_06ftmz7</bpmn:incoming>
      <bpmn:outgoing>Flow_12s7c0i</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_04pw09i" name="Помилки є?">
      <bpmn:incoming>Flow_12s7c0i</bpmn:incoming>
      <bpmn:outgoing>Flow_1vs5ys0</bpmn:outgoing>
      <bpmn:outgoing>Flow_14s444c</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:exclusiveGateway id="Gateway_0f6psou">
      <bpmn:incoming>Flow_1sszi12</bpmn:incoming>
      <bpmn:incoming>Flow_0668zhr</bpmn:incoming>
      <bpmn:outgoing>Flow_0ar17vk</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:scriptTask id="Activity_01n89u4" name="Підготовка даних документа для показу" scriptFormat="groovy">
      <bpmn:incoming>Flow_1fmohce</bpmn:incoming>
      <bpmn:outgoing>Flow_0p576zs</bpmn:outgoing>
      <bpmn:script>def cephData = [:]
        ['name', 'registrationNo'].each {
        cephData[it] = submission('Activity_shared-check-complience').formData.prop(it).stringValue()
        }

        def solution = solutionResponse.responseBody.elements()[0]
        cephData['solutionName'] = solution.prop('name').stringValue()

        execution.removeVariable('payload')
        set_transient_variable('payload', S(cephData, 'application/json'))

        execution.setVariable('solutionTypeId', solution.prop('solutionTypeId').stringValue())</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:scriptTask id="Activity_1e08895" name="Підготовка даних документа для показу" scriptFormat="groovy">
      <bpmn:incoming>Flow_07fzwsa</bpmn:incoming>
      <bpmn:outgoing>Flow_18e6jb4</bpmn:outgoing>
      <bpmn:script>def cephData = [:]
        ['name', 'registrationNo'].each {
        cephData[it] = submission('Activity_shared-add-application').formData.prop(it).stringValue()
        }

        def solution = solutionResponse.responseBody.elements()[0]
        cephData['solutionName'] = solution.prop('name').stringValue()

        execution.removeVariable('payload')
        set_transient_variable('payload', S(cephData, 'application/json'))

        execution.setVariable('solutionTypeId', solution.prop('solutionTypeId').stringValue())</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:dataStoreReference id="DataStoreReference_1g4u9ze" />
    <bpmn:dataStoreReference id="DataStoreReference_1b3j6vm" name="Дата Фабрика" />
    <bpmn:serviceTask id="Activity_0wnn70u" name="Отримання результату з дата фабрики" camunda:modelerTemplate="dataFactoryConnectorSearchDelegate" camunda:delegateExpression="${dataFactoryConnectorSearchDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">solution-type-equal-constant-code</camunda:inputParameter>
          <camunda:inputParameter name="searchConditions">
            <camunda:map>
              <camunda:entry key="constantCode">WO_CONSIDER</camunda:entry>
            </camunda:map>
          </camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${completer('Activity_shared-check-complience').accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="solutionResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1vs5ys0</bpmn:incoming>
      <bpmn:outgoing>Flow_07fzwsa</bpmn:outgoing>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_1w7m0r5">
        <bpmn:targetRef>DataStoreReference_1g4u9ze</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_0qxn3m4" name="Отримання результату з дата фабрики" camunda:modelerTemplate="dataFactoryConnectorSearchDelegate" camunda:delegateExpression="${dataFactoryConnectorSearchDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">solution-type-equal-constant-code</camunda:inputParameter>
          <camunda:inputParameter name="searchConditions">
            <camunda:map>
              <camunda:entry key="constantCode">ADD</camunda:entry>
            </camunda:map>
          </camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${completer('Activity_shared-check-complience').accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="solutionResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0hkd2ao</bpmn:incoming>
      <bpmn:outgoing>Flow_1fmohce</bpmn:outgoing>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_0o1r7ko">
        <bpmn:targetRef>DataStoreReference_1b3j6vm</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:serviceTask>
    <bpmn:userTask id="Activity_shared-add-decision-include" name="Прийняти рішення про внесення до інформаційного переліку" camunda:modelerTemplate="formUserTaskTemplate" camunda:formKey="shared-add-decision-include" camunda:assignee="${initiator}">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="eSign" value="" />
        </camunda:properties>
        <camunda:inputOutput>
          <camunda:inputParameter name="userTaskInputFormDataPrepopulate">${payload}</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0p576zs</bpmn:incoming>
      <bpmn:outgoing>Flow_1mss6lk</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="Activity_shared-add-decision-deny" name="Прийняти рішення про залишення без розгляду" camunda:modelerTemplate="formUserTaskTemplate" camunda:formKey="shared-add-decision-deny" camunda:assignee="${initiator}">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="eSign" value="" />
        </camunda:properties>
        <camunda:inputOutput>
          <camunda:inputParameter name="userTaskInputFormDataPrepopulate">${payload}</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_18e6jb4</bpmn:incoming>
      <bpmn:outgoing>Flow_1qtm8ta</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:scriptTask id="Activity_1y6ev6g" name="Підготовка даних документа для показу" scriptFormat="groovy">
      <bpmn:incoming>Flow_1mss6lk</bpmn:incoming>
      <bpmn:outgoing>Flow_0noeu0t</bpmn:outgoing>
      <bpmn:script>def cephData = [:]
        ['name', 'registrationNo', 'solutionName'].each {
        cephData[it] = submission('Activity_shared-add-decision-include').formData.prop(it).value()
        }

        execution.removeVariable('payload')
        set_transient_variable('payload', S(cephData, 'application/json'))</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:scriptTask id="Activity_0xp7isz" name="Підготовка даних документа для показу" scriptFormat="groovy">
      <bpmn:incoming>Flow_1qtm8ta</bpmn:incoming>
      <bpmn:outgoing>Flow_1xciytp</bpmn:outgoing>
      <bpmn:script>def cephData = [:]
        ['name', 'registrationNo', 'solutionName'].each {
        cephData[it] = submission('Activity_shared-add-decision-deny').formData.prop(it).stringValue()
        }

        execution.removeVariable('payload')
        set_transient_variable('payload', S(cephData, 'application/json'))</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:userTask id="Activity_shared-add-letter-data" name="Внести дані про отримання листа з рішенням (Дата, ПІБ, №)" camunda:modelerTemplate="formUserTaskTemplate" camunda:formKey="shared-add-letter-data" camunda:assignee="${initiator}">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="eSign" value="" />
        </camunda:properties>
        <camunda:inputOutput>
          <camunda:inputParameter name="userTaskInputFormDataPrepopulate">${payload}</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0noeu0t</bpmn:incoming>
      <bpmn:outgoing>Flow_0ql0du7</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="Activity_1eujure" name="Внести дані про отримання листа з рішенням (Дата, ПІБ, №)" camunda:modelerTemplate="formUserTaskTemplate" camunda:formKey="shared-add-letter-data" camunda:assignee="${initiator}">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="eSign" value="" />
        </camunda:properties>
        <camunda:inputOutput>
          <camunda:inputParameter name="userTaskInputFormDataPrepopulate">${payload}</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1xciytp</bpmn:incoming>
      <bpmn:outgoing>Flow_01nffya</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:scriptTask id="Activity_1e9m9dw" name="Підготовка даних документа для показу" scriptFormat="groovy">
      <bpmn:incoming>Flow_0ql0du7</bpmn:incoming>
      <bpmn:outgoing>Flow_0dzoszc</bpmn:outgoing>
      <bpmn:script>def cephData = [:]

        ['name', 'edrpou', 'registrationSource', 'registrationNo', 'createdDate', 'acceptedBy'].each { cephData[it] = submission('Activity_shared-add-application').formData.prop(it).stringValue() }

        ['FactorsPhys', 'laborfact', 'biofactors', 'factorPesticide', 'chemfactgost', 'chemfacthyge', 'chemfactobrv', 'chemfactodovilni'].each {
        cephData[it] = submission('Activity_shared-add-factors').formData.prop(it).elements().stream().map(elem -&gt; {
        return ["factorId": elem.prop('factorId').value(), "name": elem.prop("name").value()]
        }).collect()
        }
        
        ['solutionName', 'solutionDate', 'letterNo', 'letterDate'].each { cephData[it] = submission('Activity_shared-add-decision-include').formData.prop(it).stringValue() }

        ['receivedBy', 'certifiedBy', 'notes'].each { cephData[it] = submission('Activity_shared-add-letter-data').formData.prop(it).stringValue() }

        execution.removeVariable('payload')
        set_transient_variable('payload', S(cephData, 'application/json'))</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:exclusiveGateway id="Gateway_083f29d">
      <bpmn:incoming>Flow_0s6qatb</bpmn:incoming>
      <bpmn:incoming>Flow_0dzoszc</bpmn:incoming>
      <bpmn:outgoing>Flow_1ydogcf</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:userTask id="Activity_shared-sign-app-include" name="Підписати КЕП" camunda:modelerTemplate="officerSignTaskTemplate" camunda:formKey="shared-sign-app-include" camunda:assignee="${initiator}">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="eSign" value="true" />
        </camunda:properties>
        <camunda:inputOutput>
          <camunda:inputParameter name="userTaskInputFormDataPrepopulate">${payload}</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1ydogcf</bpmn:incoming>
      <bpmn:outgoing>Flow_1yxm2a4</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:scriptTask id="Activity_0czoyo0" name="Підготовка даних документа для показу" scriptFormat="groovy">
      <bpmn:incoming>Flow_01nffya</bpmn:incoming>
      <bpmn:outgoing>Flow_002ddyj</bpmn:outgoing>
      <bpmn:script>def cephData = [:]
        ['name', 'edrpou', 'registrationSource', 'registrationNo', 'createdDate', 'acceptedBy'].each {
        cephData[it] = submission('Activity_shared-add-application').formData.prop(it).stringValue()
        }
  ['FactorsPhys', 'laborfact', 'biofactors', 'factorPesticide', 'chemfactgost', 'chemfacthyge', 'chemfactobrv', 'chemfactodovilni'].each {
    cephData[it] = submission('Activity_shared-add-factors').formData.prop(it).elements().stream().map(elem -&gt; {
    return ["factorId": elem.prop('factorId').value(), "name": elem.prop("name").value()]
    }).collect()
}

        ['solutionName', 'solutionDate', 'letterNo', 'letterDate'].each { cephData[it] = submission('Activity_shared-add-decision-deny').formData.prop(it).stringValue() }

        ['receivedBy', 'certifiedBy', 'notes'].each { cephData[it] = submission('Activity_1eujure').formData.prop(it).stringValue() }

        //refusal reasons
        def checkComplianceFormData = submission('Activity_shared-check-complience').formData
        ['errorCheckFlag', 'regComplianceFlag', 'factorComplianceFlag', 'zvtComplianceFlag', 'staffComplianceFlag', 'reagentComplianceFlag', 'facilityComplianceFlag'].each { cephData[it] = checkComplianceFormData.prop(it).boolValue() }

        ['regRefusalReason', 'factorRefusalReason', 'zvtRefusalReason', 'staffRefusalReason', 'reagentRefusalReason', 'facilityRefusalReason'].each {
        if (checkComplianceFormData.hasProp(it)) {
        cephData[it] = checkComplianceFormData.prop(it).elements().stream().map(elem -&gt; {
        return ["refusalReasonId": elem.prop("refusalReasonId").value(), "name": elem.prop("name").value()]
        }).collect()
        }
        }

        execution.removeVariable('payload')
        set_transient_variable('payload', S(cephData, 'application/json'))</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:exclusiveGateway id="Gateway_19mmoz0">
      <bpmn:incoming>Flow_1qplogf</bpmn:incoming>
      <bpmn:incoming>Flow_002ddyj</bpmn:incoming>
      <bpmn:outgoing>Flow_1m26089</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:userTask id="Activity_shared-sign-app-deny" name="Підписати КЕП" camunda:modelerTemplate="officerSignTaskTemplate" camunda:formKey="shared-sign-app-deny" camunda:assignee="${initiator}">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="eSign" value="true" />
        </camunda:properties>
        <camunda:inputOutput>
          <camunda:inputParameter name="userTaskInputFormDataPrepopulate">${payload}</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1m26089</bpmn:incoming>
      <bpmn:outgoing>Flow_01m4t8u</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:scriptTask id="Activity_0xtdm1d" name="Підготовка даних для запису (transient var)" scriptFormat="groovy">
      <bpmn:incoming>Flow_095xjzl</bpmn:incoming>
      <bpmn:outgoing>Flow_0sxg0gr</bpmn:outgoing>
      <bpmn:script>def requestMap = [:]
        def factors = []

        def signedFormData = submission('Activity_shared-sign-app-include').formData

        factorNames = ['FactorsPhys', 'laborfact', 'biofactors', 'factorPesticide', 'chemfactgost', 'chemfacthyge', 'chemfactobrv', 'chemfactodovilni']
        factorNames.each { factors.addAll(signedFormData.prop(it).elements().collect { it.prop('factorId').stringValue() }) }

        signedFormData.fieldNames().findAll { fieldName -&gt; !factorNames.contains(fieldName) }.each { requestMap[it] = signedFormData.prop(it).value() }

        requestMap['factors'] = factors
        requestMap['applicationTypeId'] = applicationTypeResponse.responseBody.elements()[0].prop('applicationTypeId').stringValue()
        requestMap['laboratoryId'] = submission('start_event').formData.prop('laboratory').prop('laboratoryId').value()
        requestMap['solutionTypeId'] = solutionTypeId

        var payload = S(requestMap, 'application/json')
        execution.removeVariable('payload')
        set_transient_variable('payload', payload)</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:serviceTask id="Activity_0vb7epo" name="Отримання унікального ідентификатору типу заяви з дата фабрики" camunda:modelerTemplate="dataFactoryConnectorSearchDelegate" camunda:delegateExpression="${dataFactoryConnectorSearchDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">application-type-equal-constant-code</camunda:inputParameter>
          <camunda:inputParameter name="searchConditions">
            <camunda:map>
              <camunda:entry key="constantCode">ADD</camunda:entry>
            </camunda:map>
          </camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${completer('Activity_shared-sign-app-include').accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="applicationTypeResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1yxm2a4</bpmn:incoming>
      <bpmn:outgoing>Flow_095xjzl</bpmn:outgoing>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_1i8kr4j">
        <bpmn:targetRef>DataStoreReference_1fpf99h</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:serviceTask>
    <bpmn:dataStoreReference id="DataStoreReference_1fpf99h" name="Дата Фабрика" />
    <bpmn:serviceTask id="Activity_115jjbm" name="Отримання унікального ідентификатору типу заяви з дата фабрики" camunda:modelerTemplate="dataFactoryConnectorSearchDelegate" camunda:delegateExpression="${dataFactoryConnectorSearchDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">application-type-equal-constant-code</camunda:inputParameter>
          <camunda:inputParameter name="searchConditions">
            <camunda:map>
              <camunda:entry key="constantCode">ADD</camunda:entry>
            </camunda:map>
          </camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${completer('Activity_shared-sign-app-deny').accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="applicationTypeResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_01m4t8u</bpmn:incoming>
      <bpmn:outgoing>Flow_1yb4cif</bpmn:outgoing>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_0rq5677">
        <bpmn:targetRef>DataStoreReference_1v50epe</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:serviceTask>
    <bpmn:dataStoreReference id="DataStoreReference_1v50epe" name="Дата Фабрика" />
    <bpmn:scriptTask id="Activity_1183rrp" name="Підготовка даних для запису (transient var)" scriptFormat="groovy">
      <bpmn:incoming>Flow_1yb4cif</bpmn:incoming>
      <bpmn:outgoing>Flow_10rk4pw</bpmn:outgoing>
      <bpmn:script>def requestMap = [:]
        def factors = []
        def signedFormData = submission('Activity_shared-sign-app-deny').formData

def factorNames = ['FactorsPhys', 'laborfact', 'biofactors', 'factorPesticide', 'chemfactgost', 'chemfacthyge', 'chemfactobrv', 'chemfactodovilni']
factorNames.each {
    factors.addAll(signedFormData.prop(it).elements().collect { it.prop("factorId").stringValue() }) 
}

        //reasonIds
        def refusalReasons = []
        def reasonIds = ['regRefusalReason', 'factorRefusalReason', 'zvtRefusalReason', 'staffRefusalReason', 'reagentRefusalReason', 'facilityRefusalReason']
        reasonIds.each {
        if (signedFormData.hasProp(it) &amp;&amp; signedFormData.prop(it).elements().size() &gt; 0) {
        signedFormData.prop(it).elements().each { reason -&gt;
        refusalReasons &lt;&lt; reason.prop("refusalReasonId").value()
        }
        }
        }

        requestMap['refusalReasons'] = refusalReasons

        signedFormData.fieldNames().findAll { fieldName -&gt; !factorNames.contains(fieldName) &amp;&amp; !reasonIds.contains(fieldName) }.each { requestMap[it] = signedFormData.prop(it).value() }

        requestMap['factors'] = factors
        requestMap.put('applicationTypeId', applicationTypeResponse.responseBody.elements()[0].prop('applicationTypeId').stringValue())
        requestMap['laboratoryId'] = submission('start_event').formData.prop('laboratory').prop('laboratoryId').value()
        requestMap['solutionTypeId'] = solutionTypeId

        var payload = S(requestMap, 'application/json')
        execution.removeVariable('payload')
        set_transient_variable('payload', payload)</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:callActivity id="Activity_0cfy5es" name="Підписати дані системним ключем" calledElement="system-signature-bp">
      <bpmn:extensionElements>
        <camunda:in source="payload" target="dataToSign" />
        <camunda:out source="system_signature_ceph_key" target="system_signature_ceph_key" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0sxg0gr</bpmn:incoming>
      <bpmn:outgoing>Flow_0fvc6on</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:callActivity id="Activity_0z1mf20" name="Підписати дані системним ключем" calledElement="system-signature-bp">
      <bpmn:extensionElements>
        <camunda:in source="payload" target="dataToSign" />
        <camunda:out source="system_signature_ceph_key" target="system_signature_ceph_key" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_10rk4pw</bpmn:incoming>
      <bpmn:outgoing>Flow_0xg7s63</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:dataStoreReference id="DataStoreReference_0yo9kt5" name="Дата фабрика" />
    <bpmn:endEvent id="Event_0r6lc1n" name="Прийнято рішення про внесення лабораторії до переліку">
      <bpmn:incoming>Flow_1ez7nb5</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:serviceTask id="Activity_1hj4q4q" name="Формування результату розгляду" camunda:modelerTemplate="defineBusinessProcessStatusDelegate" camunda:delegateExpression="${defineBusinessProcessStatusDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="status">Прийнято рішення про внесення лабораторії до переліку</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_160q9z1</bpmn:incoming>
      <bpmn:outgoing>Flow_1ez7nb5</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_17h0e3v" name="Зберегти дані в Дата фабрику" camunda:modelerTemplate="dataFactoryConnectorCreateDelegate" camunda:delegateExpression="${dataFactoryConnectorCreateDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">registration</camunda:inputParameter>
          <camunda:inputParameter name="payload">${payload}</camunda:inputParameter>
          <camunda:inputParameter name="x_digital_signature_derived_ceph_key">${system_signature_ceph_key}</camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${completer('Activity_shared-sign-app-include').accessToken}</camunda:inputParameter>
          <camunda:inputParameter name="x_digital_signature_ceph_key">${sign_submission('Activity_shared-sign-app-include').signatureDocumentId}</camunda:inputParameter>
          <camunda:outputParameter name="response">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0fvc6on</bpmn:incoming>
      <bpmn:outgoing>Flow_160q9z1</bpmn:outgoing>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_0kjtn71">
        <bpmn:targetRef>DataStoreReference_0yo9kt5</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_0pkfuvm" name="Зберегти дані в Дата фабрику" camunda:modelerTemplate="dataFactoryConnectorCreateDelegate" camunda:delegateExpression="${dataFactoryConnectorCreateDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">registration</camunda:inputParameter>
          <camunda:inputParameter name="payload">${payload}</camunda:inputParameter>
          <camunda:inputParameter name="x_digital_signature_derived_ceph_key">${system_signature_ceph_key}</camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${completer('Activity_shared-sign-app-deny').accessToken}</camunda:inputParameter>
          <camunda:inputParameter name="x_digital_signature_ceph_key">${sign_submission('Activity_shared-sign-app-deny').signatureDocumentId}</camunda:inputParameter>
          <camunda:outputParameter name="response">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0xg7s63</bpmn:incoming>
      <bpmn:outgoing>Flow_01qip9y</bpmn:outgoing>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_0b1nhak">
        <bpmn:targetRef>DataStoreReference_1ifrfot</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:serviceTask>
    <bpmn:dataStoreReference id="DataStoreReference_1ifrfot" name="Дата фабрика" />
    <bpmn:serviceTask id="Activity_1hldx1b" name="Формування результату розгляду" camunda:modelerTemplate="defineBusinessProcessStatusDelegate" camunda:delegateExpression="${defineBusinessProcessStatusDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="status">Прийнято рішення про залишення без розгляду</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_01qip9y</bpmn:incoming>
      <bpmn:outgoing>Flow_1gkmy7i</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="Event_0dcgtvi" name="Прийнято рішення про залишення без розгляду">
      <bpmn:incoming>Flow_1gkmy7i</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:exclusiveGateway id="Gateway_08ah0a4" name="Статус суб&#39;єкта &#34;Скасовано&#34; або &#34;Припинено&#34;?">
      <bpmn:incoming>Flow_14s444c</bpmn:incoming>
      <bpmn:outgoing>Flow_0hkd2ao</bpmn:outgoing>
      <bpmn:outgoing>Flow_18r8jmf</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="Activity_1d0o873" name="Формування валідаційної помилки" camunda:modelerTemplate="userDataValidationErrorDelegate" camunda:delegateExpression="${userDataValidationErrorDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="validationErrors">
            <camunda:list>
              <camunda:value>{"field": "errorCheckFlag", "value": "${submission('Activity_shared-check-complience').formData.prop('errorCheckFlag').value()}", "message": "Статус суб'єкта в ЄДР \"Скаcовано\" або \"Припинено\", оберіть відповідну причину відмови"}</camunda:value>
            </camunda:list>
          </camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_18r8jmf</bpmn:incoming>
      <bpmn:outgoing>Flow_0668zhr</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="Event_0u7w7m9" name="Бізнес-процес не почато">
      <bpmn:incoming>Flow_1xadmvr</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:exclusiveGateway id="Gateway_1qwq4c4">
      <bpmn:incoming>Flow_1fddlbk</bpmn:incoming>
      <bpmn:incoming>Flow_1mhb3e2</bpmn:incoming>
      <bpmn:outgoing>Flow_11cf2n7</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:boundaryEvent id="Event_1lubmwc" attachedToRef="Activity_17h0e3v">
      <bpmn:outgoing>Flow_0s6qatb</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_1ayg8je" />
    </bpmn:boundaryEvent>
    <bpmn:boundaryEvent id="Event_0q95h6c" attachedToRef="Activity_0pkfuvm">
      <bpmn:outgoing>Flow_1qplogf</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_054tobr" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_1mhb3e2" name="true" sourceRef="Gateway_1wsaack" targetRef="Gateway_1qwq4c4">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${subjectResponse.value.responseBody.prop('absentEdrFlag').boolValue()}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
  </bpmn:process>
  <bpmn:signal id="Signal_12x926g" name="Signal_prepare_data" />
  <bpmn:error id="Error_15nwbju" name="Error_15d0dke" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_1ta1se6">
      <bpmndi:BPMNShape id="Participant_11d2pgr_di" bpmnElement="Participant_11d2pgr" isHorizontal="true">
        <dc:Bounds x="160" y="80" width="5030" height="1110" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1mhb3e2_di" bpmnElement="Flow_1mhb3e2">
        <di:waypoint x="460" y="435" />
        <di:waypoint x="460" y="310" />
        <di:waypoint x="870" y="310" />
        <di:waypoint x="870" y="435" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="656" y="292" width="19" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1pp2p8n_di" bpmnElement="Flow_1pp2p8n">
        <di:waypoint x="485" y="460" />
        <di:waypoint x="560" y="460" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="511" y="442" width="23" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0iv8xad_di" bpmnElement="Flow_0iv8xad">
        <di:waypoint x="410" y="460" />
        <di:waypoint x="435" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_11cf2n7_di" bpmnElement="Flow_11cf2n7">
        <di:waypoint x="895" y="460" />
        <di:waypoint x="930" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0samdb3_di" bpmnElement="Flow_0samdb3">
        <di:waypoint x="2270" y="460" />
        <di:waypoint x="2310" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_00ihut4_di" bpmnElement="Flow_00ihut4">
        <di:waypoint x="1420" y="210" />
        <di:waypoint x="1420" y="170" />
        <di:waypoint x="2040" y="170" />
        <di:waypoint x="2040" y="225" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1xadmvr_di" bpmnElement="Flow_1xadmvr">
        <di:waypoint x="2065" y="250" />
        <di:waypoint x="5122" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1em4nsp_di" bpmnElement="Flow_1em4nsp">
        <di:waypoint x="1940" y="250" />
        <di:waypoint x="2015" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_13wrb1w_di" bpmnElement="Flow_13wrb1w">
        <di:waypoint x="1580" y="460" />
        <di:waypoint x="1615" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1m21hoy_di" bpmnElement="Flow_1m21hoy">
        <di:waypoint x="1030" y="710" />
        <di:waypoint x="1090" y="710" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0668zhr_di" bpmnElement="Flow_0668zhr">
        <di:waypoint x="2890" y="350" />
        <di:waypoint x="2640" y="350" />
        <di:waypoint x="2640" y="435" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_18r8jmf_di" bpmnElement="Flow_18r8jmf">
        <di:waypoint x="3160" y="435" />
        <di:waypoint x="3160" y="350" />
        <di:waypoint x="2990" y="350" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3099" y="332" width="16" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0hkd2ao_di" bpmnElement="Flow_0hkd2ao">
        <di:waypoint x="3185" y="460" />
        <di:waypoint x="3250" y="460" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3213" y="442" width="9" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ahfme7_di" bpmnElement="Flow_0ahfme7">
        <di:waypoint x="1340" y="460" />
        <di:waypoint x="1395" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0oeyv0s_di" bpmnElement="Flow_0oeyv0s">
        <di:waypoint x="1190" y="460" />
        <di:waypoint x="1240" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_05f6jm9_di" bpmnElement="Flow_05f6jm9">
        <di:waypoint x="268" y="460" />
        <di:waypoint x="310" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ib1gio_di" bpmnElement="Flow_1ib1gio">
        <di:waypoint x="1190" y="710" />
        <di:waypoint x="1970" y="710" />
        <di:waypoint x="1970" y="485" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_10s3jst_di" bpmnElement="Flow_10s3jst">
        <di:waypoint x="800" y="710" />
        <di:waypoint x="930" y="710" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0xg7s63_di" bpmnElement="Flow_0xg7s63">
        <di:waypoint x="4750" y="870" />
        <di:waypoint x="4800" y="870" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_01m4t8u_di" bpmnElement="Flow_01m4t8u">
        <di:waypoint x="4290" y="870" />
        <di:waypoint x="4330" y="870" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_01nffya_di" bpmnElement="Flow_01nffya">
        <di:waypoint x="3910" y="870" />
        <di:waypoint x="3960" y="870" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1yxm2a4_di" bpmnElement="Flow_1yxm2a4">
        <di:waypoint x="4290" y="460" />
        <di:waypoint x="4330" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0dzoszc_di" bpmnElement="Flow_0dzoszc">
        <di:waypoint x="4060" y="460" />
        <di:waypoint x="4105" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ql0du7_di" bpmnElement="Flow_0ql0du7">
        <di:waypoint x="3910" y="460" />
        <di:waypoint x="3960" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0noeu0t_di" bpmnElement="Flow_0noeu0t">
        <di:waypoint x="3770" y="460" />
        <di:waypoint x="3810" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1xciytp_di" bpmnElement="Flow_1xciytp">
        <di:waypoint x="3770" y="870" />
        <di:waypoint x="3810" y="870" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_18e6jb4_di" bpmnElement="Flow_18e6jb4">
        <di:waypoint x="3490" y="870" />
        <di:waypoint x="3527" y="870" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0p576zs_di" bpmnElement="Flow_0p576zs">
        <di:waypoint x="3490" y="460" />
        <di:waypoint x="3527" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_06ftmz7_di" bpmnElement="Flow_06ftmz7">
        <di:waypoint x="2840" y="460" />
        <di:waypoint x="2890" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1f6bexx_di" bpmnElement="Flow_1f6bexx">
        <di:waypoint x="2140" y="460" />
        <di:waypoint x="2170" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_002ddyj_di" bpmnElement="Flow_002ddyj">
        <di:waypoint x="4060" y="870" />
        <di:waypoint x="4105" y="870" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1m26089_di" bpmnElement="Flow_1m26089">
        <di:waypoint x="4155" y="870" />
        <di:waypoint x="4190" y="870" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0l7mjsy_di" bpmnElement="Flow_0l7mjsy">
        <di:waypoint x="2410" y="460" />
        <di:waypoint x="2450" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1qtm8ta_di" bpmnElement="Flow_1qtm8ta">
        <di:waypoint x="3627" y="870" />
        <di:waypoint x="3670" y="870" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1mss6lk_di" bpmnElement="Flow_1mss6lk">
        <di:waypoint x="3627" y="460" />
        <di:waypoint x="3670" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_12s7c0i_di" bpmnElement="Flow_12s7c0i" bioc:stroke="black" bioc:fill="white">
        <di:waypoint x="2990" y="460" />
        <di:waypoint x="3035" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1sszi12_di" bpmnElement="Flow_1sszi12">
        <di:waypoint x="2550" y="460" />
        <di:waypoint x="2615" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0fkrtc2_di" bpmnElement="Flow_0fkrtc2">
        <di:waypoint x="1640" y="485" />
        <di:waypoint x="1640" y="670" />
        <di:waypoint x="1970" y="670" />
        <di:waypoint x="1970" y="485" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1612" y="540" width="16" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ifee32_di" bpmnElement="Flow_1ifee32">
        <di:waypoint x="1915" y="460" />
        <di:waypoint x="1945" y="460" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1916" y="442" width="16" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0bjjwl5_di" bpmnElement="Flow_0bjjwl5">
        <di:waypoint x="1890" y="435" />
        <di:waypoint x="1890" y="290" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1869" y="356" width="9" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ydogcf_di" bpmnElement="Flow_1ydogcf">
        <di:waypoint x="4155" y="460" />
        <di:waypoint x="4190" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1vs5ys0_di" bpmnElement="Flow_1vs5ys0">
        <di:waypoint x="3060" y="485" />
        <di:waypoint x="3060" y="870" />
        <di:waypoint x="3250" y="870" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3068" y="662" width="16" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0s6qatb_di" bpmnElement="Flow_0s6qatb">
        <di:waypoint x="4850" y="402" />
        <di:waypoint x="4850" y="350" />
        <di:waypoint x="4130" y="350" />
        <di:waypoint x="4130" y="435" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ez7nb5_di" bpmnElement="Flow_1ez7nb5">
        <di:waypoint x="5050" y="460" />
        <di:waypoint x="5122" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1qplogf_di" bpmnElement="Flow_1qplogf">
        <di:waypoint x="4850" y="812" />
        <di:waypoint x="4850" y="750" />
        <di:waypoint x="4130" y="750" />
        <di:waypoint x="4130" y="845" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1gkmy7i_di" bpmnElement="Flow_1gkmy7i">
        <di:waypoint x="5050" y="870" />
        <di:waypoint x="5122" y="870" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ocvyix_di" bpmnElement="Flow_0ocvyix">
        <di:waypoint x="1995" y="460" />
        <di:waypoint x="2040" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0rc8gzz_di" bpmnElement="Flow_0rc8gzz">
        <di:waypoint x="1665" y="460" />
        <di:waypoint x="1720" y="460" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1688" y="442" width="9" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_03g1pyj_di" bpmnElement="Flow_03g1pyj">
        <di:waypoint x="1820" y="460" />
        <di:waypoint x="1865" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_07fzwsa_di" bpmnElement="Flow_07fzwsa">
        <di:waypoint x="3350" y="870" />
        <di:waypoint x="3390" y="870" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_14s444c_di" bpmnElement="Flow_14s444c">
        <di:waypoint x="3085" y="460" />
        <di:waypoint x="3135" y="460" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3102" y="442" width="9" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1fmohce_di" bpmnElement="Flow_1fmohce">
        <di:waypoint x="3350" y="460" />
        <di:waypoint x="3390" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_095xjzl_di" bpmnElement="Flow_095xjzl">
        <di:waypoint x="4430" y="460" />
        <di:waypoint x="4480" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1yb4cif_di" bpmnElement="Flow_1yb4cif">
        <di:waypoint x="4430" y="870" />
        <di:waypoint x="4490" y="870" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_10rk4pw_di" bpmnElement="Flow_10rk4pw">
        <di:waypoint x="4590" y="870" />
        <di:waypoint x="4650" y="870" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_01qip9y_di" bpmnElement="Flow_01qip9y">
        <di:waypoint x="4900" y="870" />
        <di:waypoint x="4950" y="870" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0sxg0gr_di" bpmnElement="Flow_0sxg0gr">
        <di:waypoint x="4580" y="460" />
        <di:waypoint x="4650" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0fvc6on_di" bpmnElement="Flow_0fvc6on">
        <di:waypoint x="4750" y="460" />
        <di:waypoint x="4800" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_160q9z1_di" bpmnElement="Flow_160q9z1">
        <di:waypoint x="4900" y="460" />
        <di:waypoint x="4950" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0bntmmt_di" bpmnElement="Flow_0bntmmt" bioc:stroke="black" bioc:fill="white">
        <di:waypoint x="660" y="460" />
        <di:waypoint x="725" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1xtqrlt_di" bpmnElement="Flow_1xtqrlt">
        <di:waypoint x="750" y="485" />
        <di:waypoint x="750" y="670" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="732" y="543" width="16" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1fddlbk_di" bpmnElement="Flow_1fddlbk">
        <di:waypoint x="775" y="460" />
        <di:waypoint x="845" y="460" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1430" y="442" width="9" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0eqw8ly_di" bpmnElement="Flow_0eqw8ly">
        <di:waypoint x="1030" y="460" />
        <di:waypoint x="1090" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0uop016_di" bpmnElement="Flow_0uop016">
        <di:waypoint x="1445" y="460" />
        <di:waypoint x="1480" y="460" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="795" y="463" width="9" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1uh4xww_di" bpmnElement="Flow_1uh4xww">
        <di:waypoint x="1420" y="435" />
        <di:waypoint x="1420" y="290" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1397" y="351" width="16" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ar17vk_di" bpmnElement="Flow_0ar17vk">
        <di:waypoint x="2665" y="460" />
        <di:waypoint x="2740" y="460" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Event_02id5t3_di" bpmnElement="start_event" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="232" y="442" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="210" y="485" width="84" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1rh5bgq_di" bpmnElement="Activity_1rh5bgq">
        <dc:Bounds x="310" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1wsaack_di" bpmnElement="Gateway_1wsaack" isMarkerVisible="true">
        <dc:Bounds x="435" y="435" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="424" y="508" width="72" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1ggxhbd_di" bpmnElement="Gateway_1ggxhbd" isMarkerVisible="true" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="725" y="435" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="713" y="373" width="81" height="53" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1dg6vr0_di" bpmnElement="Activity_1dg6vr0" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="560" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1wtzxtv_di" bpmnElement="Activity_shared-subject-status-error" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="700" y="670" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_13fg2yb_di" bpmnElement="Activity_13fg2yb" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="930" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_162ny7c_di" bpmnElement="Gateway_162ny7c" isMarkerVisible="true" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="1395" y="435" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1383" y="495" width="85" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_17yrxpa_di" bpmnElement="Activity_1ka8zlc">
        <dc:Bounds x="1090" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0cc1wmb_di" bpmnElement="Activity_1dh67zh">
        <dc:Bounds x="1240" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_070vjg5_di" bpmnElement="DataStoreReference_070vjg5">
        <dc:Bounds x="1115" y="555" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1108" y="612" width="71" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_1rohhr1_di" bpmnElement="DataStoreReference_1rohhr1">
        <dc:Bounds x="1265" y="555" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1258" y="612" width="71" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_0xi9b6z_di" bpmnElement="DataStoreReference_0xi9b6z">
        <dc:Bounds x="955" y="555" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="948" y="612" width="71" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1rbx8dw_di" bpmnElement="Activity_0x5gqfo">
        <dc:Bounds x="1090" y="670" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1ups1ss_di" bpmnElement="Activity_1jiicwq">
        <dc:Bounds x="930" y="670" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_01wk2q7_di" bpmnElement="Gateway_01wk2q7" isMarkerVisible="true">
        <dc:Bounds x="1615" y="435" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1595" y="406" width="90" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_1j4lba4_di" bpmnElement="DataStoreReference_1j4lba4">
        <dc:Bounds x="1745" y="565" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1738" y="622" width="71" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0wa0mxl_di" bpmnElement="Gateway_0wa0mxl" isMarkerVisible="true">
        <dc:Bounds x="1865" y="435" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1870" y="495" width="39" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0jde3l2_di" bpmnElement="Gateway_0jde3l2" isMarkerVisible="true">
        <dc:Bounds x="1945" y="435" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0rn2jw3_di" bpmnElement="Activity_0g747qa">
        <dc:Bounds x="1720" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1tiuc6f_di" bpmnElement="Activity_0cp9hlw">
        <dc:Bounds x="1480" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1h0f0du_di" bpmnElement="Activity_1h0f0du">
        <dc:Bounds x="2040" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_022lvl7_di" bpmnElement="Activity_shared-add-application">
        <dc:Bounds x="2170" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1p9drdd_di" bpmnElement="Activity_1p9drdd">
        <dc:Bounds x="1840" y="210" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1frdjoy_di" bpmnElement="Activity_1frdjoy" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="1370" y="210" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0tzg04v_di" bpmnElement="Gateway_0tzg04v" isMarkerVisible="true">
        <dc:Bounds x="2015" y="225" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_14x5asd_di" bpmnElement="Activity_1xdhhss">
        <dc:Bounds x="2310" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0sp15w3_di" bpmnElement="Activity_shared-add-factors" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="2450" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_19gsmcp_di" bpmnElement="Activity_19gsmcp">
        <dc:Bounds x="2740" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_02b9fyp_di" bpmnElement="Activity_shared-check-complience" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="2890" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_04pw09i_di" bpmnElement="Gateway_04pw09i" isMarkerVisible="true" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="3035" y="435" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3032" y="403" width="60" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0f6psou_di" bpmnElement="Gateway_0f6psou" isMarkerVisible="true">
        <dc:Bounds x="2615" y="435" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_01n89u4_di" bpmnElement="Activity_01n89u4" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="3390" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1e08895_di" bpmnElement="Activity_1e08895" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="3390" y="830" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_1g4u9ze_di" bpmnElement="DataStoreReference_1g4u9ze">
        <dc:Bounds x="3275" y="975" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3764" y="823" width="71" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_1b3j6vm_di" bpmnElement="DataStoreReference_1b3j6vm">
        <dc:Bounds x="3275" y="565" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3268" y="622" width="71" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_03lo1k2_di" bpmnElement="Activity_0wnn70u">
        <dc:Bounds x="3250" y="830" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0b9f19j_di" bpmnElement="Activity_0qxn3m4">
        <dc:Bounds x="3250" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1qb0ygn_di" bpmnElement="Activity_shared-add-decision-include" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="3527" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1sbkhnj_di" bpmnElement="Activity_shared-add-decision-deny" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="3527" y="830" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_031ypjx_di" bpmnElement="Activity_1y6ev6g">
        <dc:Bounds x="3670" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1br9pbi_di" bpmnElement="Activity_0xp7isz">
        <dc:Bounds x="3670" y="830" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0g754lb_di" bpmnElement="Activity_shared-add-letter-data" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="3810" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1eujure_di" bpmnElement="Activity_1eujure" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="3810" y="830" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1e9m9dw_di" bpmnElement="Activity_1e9m9dw" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="3960" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1y6jgj4_di" bpmnElement="Gateway_083f29d" isMarkerVisible="true">
        <dc:Bounds x="4105" y="435" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0tmj599_di" bpmnElement="Activity_shared-sign-app-include" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="4190" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0czoyo0_di" bpmnElement="Activity_0czoyo0" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="3960" y="830" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_19mmoz0_di" bpmnElement="Gateway_19mmoz0" isMarkerVisible="true">
        <dc:Bounds x="4105" y="845" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_10rbhnv_di" bpmnElement="Activity_shared-sign-app-deny" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="4190" y="830" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0xtdm1d_di" bpmnElement="Activity_0xtdm1d" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="4480" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0hrz376_di" bpmnElement="Activity_0vb7epo">
        <dc:Bounds x="4330" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_1fpf99h_di" bpmnElement="DataStoreReference_1fpf99h">
        <dc:Bounds x="4355" y="565" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="4349" y="622" width="71" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_08ui2kg_di" bpmnElement="Activity_115jjbm">
        <dc:Bounds x="4330" y="830" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_1v50epe_di" bpmnElement="DataStoreReference_1v50epe">
        <dc:Bounds x="4355" y="975" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="4349" y="1032" width="71" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1183rrp_di" bpmnElement="Activity_1183rrp" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="4490" y="830" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_192gr20_di" bpmnElement="Activity_0cfy5es">
        <dc:Bounds x="4650" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0z1mf20_di" bpmnElement="Activity_0z1mf20">
        <dc:Bounds x="4650" y="830" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_0yo9kt5_di" bpmnElement="DataStoreReference_0yo9kt5" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="4825" y="555" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="4815" y="612" width="72" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0r6lc1n_di" bpmnElement="Event_0r6lc1n" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="5122" y="442" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="5105" y="485" width="75" height="66" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_126c8xx_di" bpmnElement="Activity_1hj4q4q">
        <dc:Bounds x="4950" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0b2dnlh_di" bpmnElement="Activity_17h0e3v">
        <dc:Bounds x="4800" y="420" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0awimvz_di" bpmnElement="Activity_0pkfuvm">
        <dc:Bounds x="4800" y="830" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_1ifrfot_di" bpmnElement="DataStoreReference_1ifrfot" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="4825" y="955" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="4815" y="1012" width="72" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1hldx1b_di" bpmnElement="Activity_1hldx1b">
        <dc:Bounds x="4950" y="830" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0dcgtvi_di" bpmnElement="Event_0dcgtvi" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="5122" y="852" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="5103" y="895" width="78" height="53" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_08ah0a4_di" bpmnElement="Gateway_08ah0a4" isMarkerVisible="true">
        <dc:Bounds x="3135" y="435" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3120" y="492" width="85" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1huwz5a_di" bpmnElement="Activity_1d0o873">
        <dc:Bounds x="2890" y="310" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0byp6ue_di" bpmnElement="Event_0u7w7m9">
        <dc:Bounds x="5122" y="232" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="5097" y="275" width="88" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1qwq4c4_di" bpmnElement="Gateway_1qwq4c4" isMarkerVisible="true">
        <dc:Bounds x="845" y="435" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0q95h6c_di" bpmnElement="Event_0q95h6c">
        <dc:Bounds x="4832" y="812" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1lubmwc_di" bpmnElement="Event_1lubmwc">
        <dc:Bounds x="4832" y="402" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="DataInputAssociation_037l3td_di" bpmnElement="DataInputAssociation_037l3td">
        <di:waypoint x="980" y="555" />
        <di:waypoint x="980" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataInputAssociation_1kkoy3a_di" bpmnElement="DataInputAssociation_1kkoy3a">
        <di:waypoint x="1140" y="555" />
        <di:waypoint x="1140" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataInputAssociation_0nu5dq2_di" bpmnElement="DataInputAssociation_0nu5dq2">
        <di:waypoint x="1290" y="555" />
        <di:waypoint x="1290" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_13ijfjx_di" bpmnElement="DataOutputAssociation_13ijfjx">
        <di:waypoint x="1770" y="500" />
        <di:waypoint x="1770" y="565" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_1w7m0r5_di" bpmnElement="DataOutputAssociation_1w7m0r5">
        <di:waypoint x="3300" y="910" />
        <di:waypoint x="3300" y="975" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_0o1r7ko_di" bpmnElement="DataOutputAssociation_0o1r7ko">
        <di:waypoint x="3300" y="500" />
        <di:waypoint x="3300" y="565" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_1i8kr4j_di" bpmnElement="DataOutputAssociation_1i8kr4j">
        <di:waypoint x="4380" y="500" />
        <di:waypoint x="4380" y="565" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_0rq5677_di" bpmnElement="DataOutputAssociation_0rq5677">
        <di:waypoint x="4380" y="910" />
        <di:waypoint x="4380" y="975" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_0kjtn71_di" bpmnElement="DataOutputAssociation_0kjtn71">
        <di:waypoint x="4850" y="500" />
        <di:waypoint x="4850" y="555" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_0b1nhak_di" bpmnElement="DataOutputAssociation_0b1nhak">
        <di:waypoint x="4850" y="910" />
        <di:waypoint x="4850" y="955" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
