= Реєстрація послуг та налаштування виклику платформи даних із СЕВ ДЕІР "Трембіта"
:toc:
:toc-title: ЗМІСТ
:toclevels: 5
:sectnums:
:sectnumlevels: 5
:sectanchors:

== Передумови
Для початку необхідно мати розгорнутий регламент реєстру, в якому точки інтеграції позначені відповідним тегом, та розгорнутий SOAP API.

== Додавання WSDL-файлу

* Після входу до вебінтерфейсу ШБО "Трембіта", перейдіть до пункту меню **КЛІЄНТИ СЕРВЕРА БЕЗПЕКИ**.

image:registry-admin/external-integration/api-publish/data-platform/trembita-add-wsdl-step-1.png[]

В результаті має з'явитися список доступних клієнтів.

[TIP]
====
Хорошим правилом є розділення клієнтів на "споживачів" (API consumers, `_cons`) та "постачальників" (API producers, `_prod`).

Наприклад, `DDMTest_prod` -- постачальник, а `DDMTest_cons` -- споживач.
====

. Увійдіть до розділу конфігурації **Сервіси SOAP** клієнта-постачальника, натиснувши на відповідну іконку image:registry-admin/external-integration/api-publish/data-platform/soap-config.png[width="25"]
та оберіть `Додати WSDL`.

image:registry-admin/external-integration/api-publish/data-platform/trembita-add-wsdl-step-2.png[]

* У вікні, що з'явилося, введіть посилання до WSDL, що буде доступне в SOAP-вебсервісі після розгортання регламенту.

* Натисніть кнопку `OK`.

image:registry-admin/external-integration/api-publish/data-platform/trembita-add-wsdl-step-4.png[]

В результаті стане доступним посилання до відповідного WSDL у списку, з усіма методами, які можуть бути сконфігуровані як точки інтеграції із зовнішніми клієнтами.

== Налаштування прав доступу

Трембіта дозволяє надавати доступ на рівні окремих SOAP-методів.

[NOTE]
За замовчуванням, після додавання WSDL, доступ до точок інтеграції через Трембіту для всіх заборонений.

image:registry-admin/external-integration/api-publish/data-platform/trembita-setup-consumer-step-1.png[]

* Для надання доступу до точки інтеграції іншому учасникові обміну, необхідно вибрати точку інтеграції та натиснути кнопку `Права доступу`.

image:registry-admin/external-integration/api-publish/data-platform/trembita-setup-consumer-step-2.png[]

* У вікні, що з'явилося, натисніть кнопку `Додати об'єкт`.

image:registry-admin/external-integration/api-publish/data-platform/trembita-setup-consumer-step-3.png[]

* За допомогою рядка пошуку, знайдіть клієнта, якому необхідно надати доступ (у нашому випадку -- це `DDMTest_cons`).

* Далі виділіть його та додайте за допомогою кнопки `Додати обране`.

image:registry-admin/external-integration/api-publish/data-platform/trembita-setup-consumer-step-5.png[]

В результаті, обраний клієнт має з'явитися в переліку учасників СЕВ ДЕІР.

image:registry-admin/external-integration/api-publish/data-platform/trembita-setup-consumer-step-6.png[]

* Закрийте вікно за допомогою кнопки `Закрити`.

image:registry-admin/external-integration/api-publish/data-platform/trembita-setup-consumer-step-7.png[]

NOTE: Також з'явиться цифра біля назви точки інтеграції, що буде відповідати кількості учасників, яким було надано доступ до цієї точки інтеграції.

== Увімкнення сервісу

Після налаштування всіх прав доступу, увімкніть сервіс в цілому. Для цього виділіть посилання (воно підсвічуватиметься червоним) та натисніть кнопку `Увімкнути`.

image:registry-admin/external-integration/api-publish/data-platform/trembita-setup-consumer-step-8.png[]