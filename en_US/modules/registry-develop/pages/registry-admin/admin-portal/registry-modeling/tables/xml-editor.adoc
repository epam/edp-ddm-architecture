:toc-title: ЗМІСТ
:toc: auto
:toclevels: 5
:experimental:
:important-caption:     ВАЖЛИВО
:note-caption:          ПРИМІТКА
:tip-caption:           ПІДКАЗКА
:warning-caption:       ПОПЕРЕДЖЕННЯ
:caution-caption:       УВАГА
:example-caption:           Приклад
:figure-caption:            Зображення
:table-caption:             Таблиця
:appendix-caption:          Додаток
:sectnums:
:sectnumlevels: 5
:sectanchors:
:sectlinks:
:partnums:

= Моделювання структур бази даних реєстру через XML-редактор коду

CAUTION: Документ у процесі розробки

Адміністративний портал надає вбудований XML-редактор, що дозволяє переглядати, створювати та редагувати модель даних реєстру без необхідності виходити із системи та переходити до Gerrit.

Для цього імплементовано рішення https://microsoft.github.io/monaco-editor/[Monaco Editor], візуалізоване темою *Visual Studio Dark*. Це значно полегшує процес редагування моделі даних, оскільки користувачі можуть швидко та зручно вносити зміни в єдиному інтерфейсі. Крім того, такий підхід дозволяє знизити кількість помилок та забезпечити більш продуктивний процес роботи з моделлю даних.

== Сценарії використання

* Зручне редагування структури даних у моделі регламенту реєстру за допомогою простого вікна редагування.
* Автоматичне збереження внесених змін до версії-кандидата регламенту, що дозволяє ефективно вести процес редагування.
* Відображення повідомлень про помилки у вікні редагування структури таблиць моделі даних регламенту реєстру, що допомагає швидко виявляти та виправляти помилки.
* Надання автопідказок та автодоповнень при редагуванні *`liquibase changelog xml`*, що спрощує процес редагування та дозволяє уникнути помилок.
* Перевірка liquibase-конфігурації згідно з *liquibase* та *DDM xsd*, що допомагає налаштувати конфігурацію коректно та уникнути проблем.

== Функціональні можливості

=== Загальний процес використання

Використовуйте візуальний редактор коду при створенні та редагуванні моделі даних реєстру за допомогою XML-тегів.

[CAUTION]
====
Редагування складових регламенту реєстру можливе лише в рамках версій-кандидатів на внесення змін. Для майстер-версії доступна лише опція перегляду.

Детальніше про особливості роботи з версіями регламенту дивіться на сторінці
xref:registry-admin/admin-portal/version-control/version-control-overview.adoc[].
====

. У [.underline]#Кабінеті адміністратора регламентів# відкрийте розділ [.underline]#Таблиці#.
+
TIP: Портал адміністратора ви можете знайти за посиланням: +
https://admin-tools-<назва-реєстру>.apps.envone.dev.registry.eua.gov.ua/.
+
image:registry-develop:registry-admin/admin-portal/tables-data-structures/xml-editor/xml-editor-1.png[]

. В рамках версії-кандидата відкрийте вкладку [.underline]#Файл опису структури# та розгорніть візуальний редактор у повноекранному режимі, натиснувши `Розгорнути`.

. Внесіть відповідні зміни до моделі даних та натисніть kbd:[Зберегти зміни].
+
TIP: Детальніше про роботу з моделлю даних реєстру ви можете дізнатися на сторінці xref:data-modeling/data/physical-model/overview.adoc[].
+
image:registry-develop:registry-admin/admin-portal/tables-data-structures/xml-editor/xml-editor-2.png[]
+
Ви отримаєте відповідне повідомлення-підказку про те, що зміни збережено.
+
image:registry-develop:registry-admin/admin-portal/tables-data-structures/xml-editor/xml-editor-3.png[]
+
Скасуйте зміни, натиснувши kbd:[Відмінити зміни]. При натисканні на цю кнопку, ви отримаєте наступне попереджувальне повідомлення із варіантами продовження:
+
====
`Ви впевнені, що хочете скасувати зміни?`
====
+
image:registry-develop:registry-admin/admin-portal/tables-data-structures/xml-editor/xml-editor-5.png[]

+
[WARNING]
====
Якщо ви змінили файл, але не зберегли зміни, і хочете вийти із вікна редагування, то отримаєте наступне повідомлення:

=====
`Файл опису структури було змінено. Якщо покинути сторінку зараз, то незбережені зміни будуть скасовані.`
=====

image:registry-develop:registry-admin/admin-portal/tables-data-structures/xml-editor/xml-editor-4.png[]

====


+
NOTE: Кнопка kbd:[Зберегти зміни] заблокована, якщо файл опису структури містить помилки, знайдені під час аналізу коду та liquibase-конфігурації згідно з liquibase та DDM xsd (_детальніше -- див. у розділі xref:#xsd-liquibase-validation[]_).

. Застосуйте зміни до майстер-версії регламенту.
+
TIP: Детальніше дивіться на сторінці xref:registry-admin/admin-portal/version-control/overview-new-change-request.adoc[].

[#xsd-liquibase-validation]
== Валідація внесених змін

TBD

image:registry-develop:registry-admin/admin-portal/tables-data-structures/xml-editor/xml-editor-6.png[]