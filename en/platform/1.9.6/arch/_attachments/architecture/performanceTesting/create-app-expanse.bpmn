<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_17aucpn" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.5.0">
  <bpmn:collaboration id="Collaboration_1ta1se6">
    <bpmn:extensionElements>
      <camunda:properties>
        <camunda:property name="eSign" value="true" />
      </camunda:properties>
    </bpmn:extensionElements>
    <bpmn:participant id="Participant_11d2pgr" name="Create an application for the expansion of factors" processRef="create-app-expanse" />
  </bpmn:collaboration>
  <bpmn:process id="create-app-expanse" name="Створення заяви на розширення факторів" isExecutable="true">
    <bpmn:startEvent id="start_event" name="Start" camunda:formKey="shared-search-lab-with-subject" camunda:initiator="initiator">
      <bpmn:outgoing>Flow_1astsfg</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="Flow_0fzm9lu" sourceRef="Activity_1f69u9q" targetRef="Activity_00kwvmn" />
    <bpmn:sequenceFlow id="Flow_0bqdujl" name="yes" sourceRef="Gateway_1mvylr3" targetRef="Activity_04ezlr6">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!lastSolutionResponse.value.responseBody.elements().isEmpty() &amp;&amp; lastSolutionResponse.value.responseBody.elements()[0].prop('applicationTypeId').value().equals(appTypeResponse.value.responseBody.elements()[0].prop('applicationTypeId').value()) &amp;&amp; lastSolutionResponse.value.responseBody.elements()[0].prop('solutionTypeId').value().equals(solTypeResponse.value.responseBody.elements()[0].prop('solutionTypeId').value())}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1k22rot" sourceRef="Activity_1xdhhss" targetRef="Activity_shared-add-factors" />
    <bpmn:sequenceFlow id="Flow_031mnm4" sourceRef="Activity_04ezlr6" targetRef="Gateway_01wk2q7" />
    <bpmn:sequenceFlow id="Flow_0grb2w7" name="no" sourceRef="Gateway_1mvylr3" targetRef="Activity_1ib9eoy">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${lastSolutionResponse.value.responseBody.elements().isEmpty() || !lastSolutionResponse.value.responseBody.elements()[0].prop('applicationTypeId').value().equals(appTypeResponse.value.responseBody.elements()[0].prop('applicationTypeId').value()) || !lastSolutionResponse.value.responseBody.elements()[0].prop('solutionTypeId').value().equals(solTypeResponse.value.responseBody.elements()[0].prop('solutionTypeId').value())}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_11psjdp" sourceRef="Gateway_1fnkviu" targetRef="Activity_0wnn70u" />
    <bpmn:sequenceFlow id="Flow_1oexxzl" name="yes" sourceRef="Gateway_1tfoihe" targetRef="Activity_shared-subject-status-error">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${responseEdr.value.responseBody.elements().get(0).prop('state').value().equals('SUSPENDED') || responseEdr.value.responseBody.elements().get(0).prop('state').value().equals('CANCELED')}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1noplvn" sourceRef="Activity_1atnxxt" targetRef="Gateway_1tfoihe" />
    <bpmn:sequenceFlow id="Flow_0fgba15" name="no" sourceRef="Gateway_1tfoihe" targetRef="Gateway_1ywry5e">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!responseEdr.value.responseBody.elements().get(0).prop('state').value().equals('SUSPENDED') &amp;&amp; !responseEdr.value.responseBody.elements().get(0).prop('state').value().equals('CANCELED')}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_01m4t8u" sourceRef="Activity_shared-sign-app-deny" targetRef="Activity_115jjbm" />
    <bpmn:sequenceFlow id="Flow_01nffya" sourceRef="Activity_1eujure" targetRef="Activity_0czoyo0" />
    <bpmn:sequenceFlow id="Flow_1yxm2a4" sourceRef="Activity_shared-sign-app-include" targetRef="Activity_0vb7epo" />
    <bpmn:sequenceFlow id="Flow_0dzoszc" sourceRef="Activity_1e9m9dw" targetRef="Gateway_083f29d" />
    <bpmn:sequenceFlow id="Flow_0ql0du7" sourceRef="Activity_shared-add-letter-data" targetRef="Activity_1e9m9dw" />
    <bpmn:sequenceFlow id="Flow_0noeu0t" sourceRef="Activity_1y6ev6g" targetRef="Activity_shared-add-letter-data" />
    <bpmn:sequenceFlow id="Flow_1xciytp" sourceRef="Activity_0xp7isz" targetRef="Activity_1eujure" />
    <bpmn:sequenceFlow id="Flow_18e6jb4" sourceRef="Activity_1e08895" targetRef="Activity_shared-add-decision-deny" />
    <bpmn:sequenceFlow id="Flow_0p576zs" sourceRef="Activity_01n89u4" targetRef="Activity_shared-add-decision-include" />
    <bpmn:sequenceFlow id="Flow_06ftmz7" sourceRef="Activity_19gsmcp" targetRef="Activity_shared-check-complience" />
    <bpmn:sequenceFlow id="Flow_1f6bexx" sourceRef="Activity_1h0f0du" targetRef="Activity_shared-add-application" />
    <bpmn:sequenceFlow id="Flow_002ddyj" sourceRef="Activity_0czoyo0" targetRef="Gateway_19mmoz0" />
    <bpmn:sequenceFlow id="Flow_1m26089" sourceRef="Gateway_19mmoz0" targetRef="Activity_shared-sign-app-deny" />
    <bpmn:sequenceFlow id="Flow_1qtm8ta" sourceRef="Activity_shared-add-decision-deny" targetRef="Activity_0xp7isz" />
    <bpmn:sequenceFlow id="Flow_1mss6lk" sourceRef="Activity_shared-add-decision-include" targetRef="Activity_1y6ev6g" />
    <bpmn:sequenceFlow id="Flow_12s7c0i" sourceRef="Activity_shared-check-complience" targetRef="Gateway_04pw09i" />
    <bpmn:sequenceFlow id="Flow_1sszi12" sourceRef="Activity_shared-add-factors" targetRef="Gateway_1muqt5p" />
    <bpmn:sequenceFlow id="Flow_1e2ivqf" sourceRef="Activity_shared-add-application" targetRef="Activity_1xdhhss" />
    <bpmn:sequenceFlow id="Flow_0fkrtc2" name="yes" sourceRef="Gateway_01wk2q7" targetRef="Gateway_0jde3l2">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${labResponse.value.responseBody.prop('accreditationFlag').boolValue()}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1ifee32" name="yes" sourceRef="Gateway_0wa0mxl" targetRef="Gateway_0jde3l2">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression" language="groovy">(staffResponse.responseBody.elements()[0]?.prop("cnt")?.numberValue() ?: 0) &gt; 0</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0bjjwl5" name="no" sourceRef="Gateway_0wa0mxl" targetRef="Activity_1p9drdd">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression" language="groovy">(staffResponse.responseBody.elements()[0]?.prop("cnt")?.numberValue() ?: 0) == 0</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1ydogcf" sourceRef="Gateway_083f29d" targetRef="Activity_shared-sign-app-include" />
    <bpmn:sequenceFlow id="Flow_1vs5ys0" name="yes" sourceRef="Gateway_04pw09i" targetRef="Gateway_1fnkviu">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${submission('Activity_shared-check-complience').formData.prop('errorCheckFlag').boolValue()}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0s6qatb" sourceRef="Event_1lubmwc" targetRef="Gateway_083f29d" />
    <bpmn:sequenceFlow id="Flow_1ez7nb5" sourceRef="Activity_1hj4q4q" targetRef="Event_0r6lc1n" />
    <bpmn:sequenceFlow id="Flow_1qplogf" sourceRef="Event_0q95h6c" targetRef="Gateway_19mmoz0" />
    <bpmn:sequenceFlow id="Flow_1gkmy7i" sourceRef="Activity_1hldx1b" targetRef="Event_0dcgtvi" />
    <bpmn:sequenceFlow id="Flow_0ocvyix" sourceRef="Gateway_0jde3l2" targetRef="Activity_1h0f0du" />
    <bpmn:sequenceFlow id="Flow_0rc8gzz" name="no" sourceRef="Gateway_01wk2q7" targetRef="Activity_0g747qa">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!labResponse.value.responseBody.prop('accreditationFlag').boolValue()}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_03g1pyj" sourceRef="Activity_0g747qa" targetRef="Gateway_0wa0mxl" />
    <bpmn:sequenceFlow id="Flow_07fzwsa" sourceRef="Activity_0wnn70u" targetRef="Activity_1e08895" />
    <bpmn:sequenceFlow id="Flow_14s444c" name="no" sourceRef="Gateway_04pw09i" targetRef="Gateway_0wozbu6">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!submission('Activity_shared-check-complience').formData.prop('errorCheckFlag').boolValue()}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1fmohce" sourceRef="Activity_0qxn3m4" targetRef="Activity_01n89u4" />
    <bpmn:sequenceFlow id="Flow_095xjzl" sourceRef="Activity_0vb7epo" targetRef="Activity_0xtdm1d" />
    <bpmn:sequenceFlow id="Flow_1yb4cif" sourceRef="Activity_115jjbm" targetRef="Activity_1183rrp" />
    <bpmn:sequenceFlow id="Flow_10rk4pw" sourceRef="Activity_1183rrp" targetRef="Activity_0vdpix5" />
    <bpmn:sequenceFlow id="Flow_1sfcjwg" sourceRef="Activity_0vdpix5" targetRef="Activity_0pkfuvm" />
    <bpmn:sequenceFlow id="Flow_01qip9y" sourceRef="Activity_0pkfuvm" targetRef="Activity_1hldx1b" />
    <bpmn:sequenceFlow id="Flow_0sxg0gr" sourceRef="Activity_0xtdm1d" targetRef="Activity_0cfy5es" />
    <bpmn:sequenceFlow id="Flow_0fvc6on" sourceRef="Activity_0cfy5es" targetRef="Activity_17h0e3v" />
    <bpmn:sequenceFlow id="Flow_160q9z1" sourceRef="Activity_17h0e3v" targetRef="Activity_1hj4q4q" />
    <bpmn:sequenceFlow id="Flow_1lgw1hb" sourceRef="Activity_14tqf9u" targetRef="Gateway_0jde3l2" />
    <bpmn:sequenceFlow id="Flow_03igog1" sourceRef="Activity_1nwe866" targetRef="Gateway_1mvylr3" />
    <bpmn:sequenceFlow id="Flow_0h1qeo7" sourceRef="Activity_00kwvmn" targetRef="Activity_1nwe866" />
    <bpmn:sequenceFlow id="Flow_17vdh7e" sourceRef="Activity_shared-subject-status-error" targetRef="Activity_1jp0kp8" />
    <bpmn:sequenceFlow id="Flow_0jutxh3" sourceRef="Activity_1jp0kp8" targetRef="Activity_14tqf9u" />
    <bpmn:sequenceFlow id="Flow_017q7vu" sourceRef="Activity_1ib9eoy" targetRef="Gateway_1qcgaxj" />
    <bpmn:sequenceFlow id="Flow_0cdk9hq" sourceRef="Activity_1p9drdd" targetRef="Gateway_1qcgaxj" />
    <bpmn:sequenceFlow id="Flow_1kk7u20" sourceRef="Gateway_1qcgaxj" targetRef="Event_1ybp5s4" />
    <bpmn:sequenceFlow id="Flow_0wvsc7d" name="no" sourceRef="Gateway_0wozbu6" targetRef="Activity_0qxn3m4">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!execution.hasVariable('edrSuspendedOrCancelled')}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0czqcon" name="yes" sourceRef="Gateway_0wozbu6" targetRef="Activity_1l19g83">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${execution.hasVariable('edrSuspendedOrCancelled')}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1sd5jtw" sourceRef="Gateway_1muqt5p" targetRef="Activity_19gsmcp" />
    <bpmn:sequenceFlow id="Flow_1yc27bu" sourceRef="Activity_1l19g83" targetRef="Gateway_1muqt5p" />
    <bpmn:serviceTask id="Activity_1atnxxt" name="Reading data from the EDR" camunda:modelerTemplate="searchSubjectsEdrRegistryConnectorDelegate" camunda:delegateExpression="${searchSubjectsEdrRegistryConnectorDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="passport" />
          <camunda:inputParameter name="name" />
          <camunda:inputParameter name="authorizationToken">1dc9f1f9b1e5be4d37c2b68993af243923ea7620</camunda:inputParameter>
          <camunda:inputParameter name="code">${!submission('start_event').formData.hasProp('edrpou') ? submission('start_event').formData.prop('rnokppCode').value() : submission('start_event').formData.prop('edrpou').value()}</camunda:inputParameter>
          <camunda:outputParameter name="responseEdr">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1ihuqog</bpmn:incoming>
      <bpmn:outgoing>Flow_1noplvn</bpmn:outgoing>
      <bpmn:property id="Property_1o3s6nn" name="__targetRef_placeholder" />
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_1tfoihe" name="Subject status -1 (&#34;cancelled&#34;) or 3 (&#34;terminated&#34;)">
      <bpmn:incoming>Flow_1noplvn</bpmn:incoming>
      <bpmn:outgoing>Flow_0fgba15</bpmn:outgoing>
      <bpmn:outgoing>Flow_1oexxzl</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:userTask id="Activity_shared-subject-status-error" name="Status in the EDR &#34;Deprecated&#34; or &#34;Terminated&#34;" camunda:modelerTemplate="formUserTaskTemplate" camunda:formKey="shared-subject-status-error" camunda:assignee="${initiator}">
      <bpmn:incoming>Flow_1oexxzl</bpmn:incoming>
      <bpmn:outgoing>Flow_17vdh7e</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:serviceTask id="Activity_1f69u9q" name="Request data about the current application" camunda:modelerTemplate="dataFactoryConnectorSearchDelegate" camunda:delegateExpression="${dataFactoryConnectorSearchDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">last-laboratory-solution</camunda:inputParameter>
          <camunda:inputParameter name="searchConditions">
            <camunda:map>
              <camunda:entry key="laboratoryId">${submission('start_event').formData.prop('laboratory').prop('laboratoryId').value()}</camunda:entry>
            </camunda:map>
          </camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${initiator().accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="lastSolutionResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0z7c524</bpmn:incoming>
      <bpmn:outgoing>Flow_0fzm9lu</bpmn:outgoing>
      <bpmn:property id="Property_0c99yai" name="__targetRef_placeholder" />
      <bpmn:dataInputAssociation id="DataInputAssociation_15nwbsr">
        <bpmn:sourceRef>DataStoreReference_1160iuc</bpmn:sourceRef>
        <bpmn:targetRef>Property_0c99yai</bpmn:targetRef>
      </bpmn:dataInputAssociation>
    </bpmn:serviceTask>
    <bpmn:dataStoreReference id="DataStoreReference_1h47kkh" name="Database" />
    <bpmn:dataStoreReference id="DataStoreReference_192rata" name="Database" />
    <bpmn:serviceTask id="Activity_1nwe866" name="Directory request to solutionType (ADD)" camunda:modelerTemplate="dataFactoryConnectorSearchDelegate" camunda:delegateExpression="${dataFactoryConnectorSearchDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">solution-type-equal-constant-code</camunda:inputParameter>
          <camunda:inputParameter name="searchConditions">
            <camunda:map>
              <camunda:entry key="constantCode">ADD</camunda:entry>
            </camunda:map>
          </camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${initiator().accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="solTypeResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0h1qeo7</bpmn:incoming>
      <bpmn:outgoing>Flow_03igog1</bpmn:outgoing>
      <bpmn:property id="Property_0okh8i5" name="__targetRef_placeholder" />
      <bpmn:dataInputAssociation id="DataInputAssociation_1bmalri">
        <bpmn:sourceRef>DataStoreReference_1h47kkh</bpmn:sourceRef>
        <bpmn:targetRef>Property_0okh8i5</bpmn:targetRef>
      </bpmn:dataInputAssociation>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_00kwvmn" name="Directory request to applicationType (ADD)" camunda:modelerTemplate="dataFactoryConnectorSearchDelegate" camunda:delegateExpression="${dataFactoryConnectorSearchDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">application-type-equal-constant-code</camunda:inputParameter>
          <camunda:inputParameter name="searchConditions">
            <camunda:map>
              <camunda:entry key="constantCode">ADD</camunda:entry>
            </camunda:map>
          </camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${initiator().accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="appTypeResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0fzm9lu</bpmn:incoming>
      <bpmn:outgoing>Flow_0h1qeo7</bpmn:outgoing>
      <bpmn:property id="Property_1d7o6t4" name="__targetRef_placeholder" />
      <bpmn:dataInputAssociation id="DataInputAssociation_1xdqasv">
        <bpmn:sourceRef>DataStoreReference_192rata</bpmn:sourceRef>
        <bpmn:targetRef>Property_1d7o6t4</bpmn:targetRef>
      </bpmn:dataInputAssociation>
    </bpmn:serviceTask>
    <bpmn:dataStoreReference id="DataStoreReference_1160iuc" name="Database" />
    <bpmn:exclusiveGateway id="Gateway_1mvylr3" name="Is the last application for inclusion accepted?">
      <bpmn:incoming>Flow_03igog1</bpmn:incoming>
      <bpmn:outgoing>Flow_0grb2w7</bpmn:outgoing>
      <bpmn:outgoing>Flow_0bqdujl</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="Activity_04ezlr6" name="Search for data about the laboratory" camunda:modelerTemplate="dataFactoryConnectorReadDelegate" camunda:delegateExpression="${dataFactoryConnectorReadDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">laboratory</camunda:inputParameter>
          <camunda:inputParameter name="id">${submission('start_event').formData.prop('laboratory').prop('laboratoryId').stringValue()}</camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${initiator().accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="labResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0bqdujl</bpmn:incoming>
      <bpmn:outgoing>Flow_031mnm4</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_01wk2q7" name="Is there a sign of accreditation?">
      <bpmn:incoming>Flow_031mnm4</bpmn:incoming>
      <bpmn:outgoing>Flow_0fkrtc2</bpmn:outgoing>
      <bpmn:outgoing>Flow_0rc8gzz</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:dataStoreReference id="DataStoreReference_1j4lba4" name="Database" />
    <bpmn:exclusiveGateway id="Gateway_0wa0mxl" name="Is there any data?">
      <bpmn:incoming>Flow_03g1pyj</bpmn:incoming>
      <bpmn:outgoing>Flow_0bjjwl5</bpmn:outgoing>
      <bpmn:outgoing>Flow_1ifee32</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:scriptTask id="Activity_1h0f0du" name="Preparation of document data for display" scriptFormat="groovy">
      <bpmn:incoming>Flow_0ocvyix</bpmn:incoming>
      <bpmn:outgoing>Flow_1f6bexx</bpmn:outgoing>
      <bpmn:script>def cephData = [:]
        ['name', 'edrpou'].each {
        cephData[it] = labResponse.responseBody.prop(it).stringValue()
        }
        execution.removeVariable('payload')
        set_transient_variable('payload', S(cephData, 'application/json'))
def fullName = initiator().fullName
if (fullName == null) {
  fullName = completer('Activity_shared-subject-status-error').fullName
}
execution.setVariable('fullName', fullName)</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:exclusiveGateway id="Gateway_0jde3l2">
      <bpmn:incoming>Flow_1ifee32</bpmn:incoming>
      <bpmn:incoming>Flow_0fkrtc2</bpmn:incoming>
      <bpmn:incoming>Flow_1lgw1hb</bpmn:incoming>
      <bpmn:outgoing>Flow_0ocvyix</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="Activity_0g747qa" name="Is there a sign of accreditation?" camunda:modelerTemplate="dataFactoryConnectorSearchDelegate" camunda:delegateExpression="${dataFactoryConnectorSearchDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">staff-equal-laboratory-id-count</camunda:inputParameter>
          <camunda:inputParameter name="searchConditions">
            <camunda:map>
              <camunda:entry key="laboratoryId">${submission('start_event').formData.prop('laboratory').prop('laboratoryId').value()}</camunda:entry>
            </camunda:map>
          </camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${initiator().accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="staffResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0rc8gzz</bpmn:incoming>
      <bpmn:outgoing>Flow_03g1pyj</bpmn:outgoing>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_13ijfjx">
        <bpmn:targetRef>DataStoreReference_1j4lba4</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:serviceTask>
    <bpmn:userTask id="Activity_shared-add-application" name="Enter application data" camunda:modelerTemplate="formUserTaskTemplate" camunda:formKey="shared-add-application" camunda:assignee="${initiator}">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="formVariables" value="fullName" />
        </camunda:properties>
        <camunda:inputOutput>
          <camunda:inputParameter name="userTaskInputFormDataPrepopulate">${payload}</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1f6bexx</bpmn:incoming>
      <bpmn:outgoing>Flow_1e2ivqf</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:scriptTask id="Activity_1xdhhss" name="Preparation of document data for display" scriptFormat="groovy">
      <bpmn:incoming>Flow_1e2ivqf</bpmn:incoming>
      <bpmn:outgoing>Flow_1k22rot</bpmn:outgoing>
      <bpmn:script>def cephData = [:]
        ['name', 'registrationNo'].each {
        cephData[it] = submission('Activity_shared-add-application').formData.prop(it).stringValue()
        }

        execution.removeVariable('payload')
        set_transient_variable('payload', S(cephData, 'application/json'))</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:userTask id="Activity_shared-add-factors" name="Enter the factors" camunda:modelerTemplate="formUserTaskTemplate" camunda:formKey="shared-add-factors" camunda:assignee="${initiator}">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="eSign" value="" />
        </camunda:properties>
        <camunda:inputOutput>
          <camunda:inputParameter name="userTaskInputFormDataPrepopulate">${payload}</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1k22rot</bpmn:incoming>
      <bpmn:outgoing>Flow_1sszi12</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:scriptTask id="Activity_14tqf9u" name="Save subject status" camunda:resultVariable="edrSuspendedOrCancelled">
      <bpmn:incoming>Flow_0jutxh3</bpmn:incoming>
      <bpmn:outgoing>Flow_1lgw1hb</bpmn:outgoing>
      <bpmn:script>true</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:serviceTask id="Activity_1jp0kp8" name="Search for data about the laboratory" camunda:modelerTemplate="dataFactoryConnectorReadDelegate" camunda:delegateExpression="${dataFactoryConnectorReadDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">laboratory</camunda:inputParameter>
          <camunda:inputParameter name="id">${submission('start_event').formData.prop('laboratory').prop('laboratoryId').stringValue()}</camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${completer('Activity_shared-subject-status-error').accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="labResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_17vdh7e</bpmn:incoming>
      <bpmn:outgoing>Flow_0jutxh3</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_1ib9eoy" name="Formation of a validation error" camunda:modelerTemplate="userDataValidationErrorDelegate" camunda:delegateExpression="${userDataValidationErrorDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="validationErrors">
            <camunda:list>
              <camunda:value>{"field": "laboratory", "value": "${submission('start_event').formData.prop('laboratory').prop('laboratoryId').value()}", "message": "Заява на первинне внесення не створена"}</camunda:value>
            </camunda:list>
          </camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0grb2w7</bpmn:incoming>
      <bpmn:outgoing>Flow_017q7vu</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_1p9drdd" name="Formation of a validation error" camunda:modelerTemplate="userDataValidationErrorDelegate" camunda:delegateExpression="${userDataValidationErrorDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="validationErrors">
            <camunda:list>
              <camunda:value>{"field": "laboratory", "value": "${submission('start_event').formData.prop('laboratory').prop('laboratoryId').value()}", "message": "Додайте кадровий склад до лабораторії"}</camunda:value>
            </camunda:list>
          </camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0bjjwl5</bpmn:incoming>
      <bpmn:outgoing>Flow_0cdk9hq</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_1qcgaxj">
      <bpmn:incoming>Flow_0cdk9hq</bpmn:incoming>
      <bpmn:incoming>Flow_017q7vu</bpmn:incoming>
      <bpmn:outgoing>Flow_1kk7u20</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:scriptTask id="Activity_19gsmcp" name="Preparation of document data for display" scriptFormat="groovy">
      <bpmn:incoming>Flow_1sd5jtw</bpmn:incoming>
      <bpmn:outgoing>Flow_06ftmz7</bpmn:outgoing>
      <bpmn:script>def cephData = [:]
        ['name', 'registrationNo'].each {
        cephData[it] = submission('Activity_shared-add-application').formData.prop(it).stringValue()
        }

        execution.removeVariable('payload')
        set_transient_variable('payload', S(cephData, 'application/json'))</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:userTask id="Activity_shared-check-complience" name="Check for compliance" camunda:modelerTemplate="formUserTaskTemplate" camunda:formKey="shared-check-complience" camunda:assignee="${initiator}">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="eSign" value="" />
        </camunda:properties>
        <camunda:inputOutput>
          <camunda:inputParameter name="userTaskInputFormDataPrepopulate">${payload}</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_06ftmz7</bpmn:incoming>
      <bpmn:outgoing>Flow_12s7c0i</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_04pw09i" name="Is error exist?">
      <bpmn:incoming>Flow_12s7c0i</bpmn:incoming>
      <bpmn:outgoing>Flow_1vs5ys0</bpmn:outgoing>
      <bpmn:outgoing>Flow_14s444c</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:exclusiveGateway id="Gateway_1fnkviu">
      <bpmn:incoming>Flow_1vs5ys0</bpmn:incoming>
      <bpmn:outgoing>Flow_11psjdp</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:exclusiveGateway id="Gateway_0wozbu6" name="Entity status &#34;Cancelled&#34; or &#34;Terminated&#34;?">
      <bpmn:incoming>Flow_14s444c</bpmn:incoming>
      <bpmn:outgoing>Flow_0wvsc7d</bpmn:outgoing>
      <bpmn:outgoing>Flow_0czqcon</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="Activity_1l19g83" name="Formation of a validation error" camunda:modelerTemplate="userDataValidationErrorDelegate" camunda:delegateExpression="${userDataValidationErrorDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="validationErrors">
            <camunda:list>
              <camunda:value>{"field": "errorCheckFlag", "value": "${submission('Activity_shared-check-complience').formData.prop('errorCheckFlag').value()}", "message": "Статус суб'єкта в ЄДР \"Скаcовано\" або \"Припинено\", оберіть відповідну причину відмови"}</camunda:value>
            </camunda:list>
          </camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0czqcon</bpmn:incoming>
      <bpmn:outgoing>Flow_1yc27bu</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_1muqt5p">
      <bpmn:incoming>Flow_1sszi12</bpmn:incoming>
      <bpmn:incoming>Flow_1yc27bu</bpmn:incoming>
      <bpmn:outgoing>Flow_1sd5jtw</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:scriptTask id="Activity_01n89u4" name="Preparation of document data for display" scriptFormat="groovy">
      <bpmn:incoming>Flow_1fmohce</bpmn:incoming>
      <bpmn:outgoing>Flow_0p576zs</bpmn:outgoing>
      <bpmn:script>def cephData = [:]
        ['name', 'registrationNo'].each {
        cephData[it] = submission('Activity_shared-check-complience').formData.prop(it).stringValue()
        }

        def solution = solutionResponse.responseBody.elements()[0]
        cephData['solutionName'] = solution.prop('name').stringValue()

        execution.removeVariable('payload')
        set_transient_variable('payload', S(cephData, 'application/json'))

        execution.setVariable('solutionTypeId', solution.prop('solutionTypeId').stringValue())</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:scriptTask id="Activity_1e08895" name="Preparation of document data for display" scriptFormat="groovy">
      <bpmn:incoming>Flow_07fzwsa</bpmn:incoming>
      <bpmn:outgoing>Flow_18e6jb4</bpmn:outgoing>
      <bpmn:script>def cephData = [:]
        ['name', 'registrationNo'].each {
        cephData[it] = submission('Activity_shared-check-complience').formData.prop(it).stringValue()
        }

        def solution = solutionResponse.responseBody.elements()[0]
        cephData['solutionName'] = solution.prop('name').stringValue()

        execution.removeVariable('payload')
        set_transient_variable('payload', S(cephData, 'application/json'))

        execution.setVariable('solutionTypeId', solution.prop('solutionTypeId').stringValue())</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:dataStoreReference id="DataStoreReference_1g4u9ze" />
    <bpmn:dataStoreReference id="DataStoreReference_1b3j6vm" name="Database" />
    <bpmn:serviceTask id="Activity_0wnn70u" name="Obtaining the result from the datebase" camunda:modelerTemplate="dataFactoryConnectorSearchDelegate" camunda:delegateExpression="${dataFactoryConnectorSearchDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">solution-type-equal-constant-code</camunda:inputParameter>
          <camunda:inputParameter name="searchConditions">
            <camunda:map>
              <camunda:entry key="constantCode">WO_CONSIDER</camunda:entry>
            </camunda:map>
          </camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${completer('Activity_shared-check-complience').accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="solutionResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_11psjdp</bpmn:incoming>
      <bpmn:outgoing>Flow_07fzwsa</bpmn:outgoing>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_1w7m0r5">
        <bpmn:targetRef>DataStoreReference_1g4u9ze</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_0qxn3m4" name="Obtaining the result from the datebase" camunda:modelerTemplate="dataFactoryConnectorSearchDelegate" camunda:delegateExpression="${dataFactoryConnectorSearchDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">solution-type-equal-constant-code</camunda:inputParameter>
          <camunda:inputParameter name="searchConditions">
            <camunda:map>
              <camunda:entry key="constantCode">ADD</camunda:entry>
            </camunda:map>
          </camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${completer('Activity_shared-check-complience').accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="solutionResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0wvsc7d</bpmn:incoming>
      <bpmn:outgoing>Flow_1fmohce</bpmn:outgoing>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_0o1r7ko">
        <bpmn:targetRef>DataStoreReference_1b3j6vm</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:serviceTask>
    <bpmn:userTask id="Activity_shared-add-decision-include" name="Make a decision on inclusion in the information list" camunda:modelerTemplate="formUserTaskTemplate" camunda:formKey="shared-add-decision-include" camunda:assignee="${initiator}">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="eSign" value="" />
        </camunda:properties>
        <camunda:inputOutput>
          <camunda:inputParameter name="userTaskInputFormDataPrepopulate">${payload}</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0p576zs</bpmn:incoming>
      <bpmn:outgoing>Flow_1mss6lk</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="Activity_shared-add-decision-deny" name="Make a decision to leave without consideration" camunda:modelerTemplate="formUserTaskTemplate" camunda:formKey="shared-add-decision-deny" camunda:assignee="${initiator}">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="eSign" value="" />
        </camunda:properties>
        <camunda:inputOutput>
          <camunda:inputParameter name="userTaskInputFormDataPrepopulate">${payload}</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_18e6jb4</bpmn:incoming>
      <bpmn:outgoing>Flow_1qtm8ta</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:scriptTask id="Activity_1y6ev6g" name="Preparation of document data for display" scriptFormat="groovy">
      <bpmn:incoming>Flow_1mss6lk</bpmn:incoming>
      <bpmn:outgoing>Flow_0noeu0t</bpmn:outgoing>
      <bpmn:script>def cephData = [:]
        ['name', 'registrationNo', 'solutionName'].each {
        cephData[it] = submission('Activity_shared-add-decision-include').formData.prop(it).value()
        }

        execution.removeVariable('payload')
        set_transient_variable('payload', S(cephData, 'application/json'))</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:scriptTask id="Activity_0xp7isz" name="Preparation of document data for display" scriptFormat="groovy">
      <bpmn:incoming>Flow_1qtm8ta</bpmn:incoming>
      <bpmn:outgoing>Flow_1xciytp</bpmn:outgoing>
      <bpmn:script>def cephData = [:]
        ['name', 'registrationNo', 'solutionName'].each {
        cephData[it] = submission('Activity_shared-add-decision-deny').formData.prop(it).stringValue()
        }

        execution.removeVariable('payload')
        set_transient_variable('payload', S(cephData, 'application/json'))</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:userTask id="Activity_shared-add-letter-data" name="Enter information about receiving a letter with a decision (Date, name, number)" camunda:modelerTemplate="formUserTaskTemplate" camunda:formKey="shared-add-letter-data" camunda:assignee="${initiator}">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="eSign" value="" />
        </camunda:properties>
        <camunda:inputOutput>
          <camunda:inputParameter name="userTaskInputFormDataPrepopulate">${payload}</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0noeu0t</bpmn:incoming>
      <bpmn:outgoing>Flow_0ql0du7</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="Activity_1eujure" name="Enter information about receiving a letter with a decision (Date, name, number)" camunda:modelerTemplate="formUserTaskTemplate" camunda:formKey="shared-add-letter-data" camunda:assignee="${initiator}">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="eSign" value="" />
        </camunda:properties>
        <camunda:inputOutput>
          <camunda:inputParameter name="userTaskInputFormDataPrepopulate">${payload}</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1xciytp</bpmn:incoming>
      <bpmn:outgoing>Flow_01nffya</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:scriptTask id="Activity_1e9m9dw" name="Preparation of document data for display" scriptFormat="groovy">
      <bpmn:incoming>Flow_0ql0du7</bpmn:incoming>
      <bpmn:outgoing>Flow_0dzoszc</bpmn:outgoing>
      <bpmn:script>def cephData = [:]

        ['name', 'edrpou', 'registrationSource', 'registrationNo', 'createdDate', 'acceptedBy'].each { cephData[it] = submission('Activity_shared-add-application').formData.prop(it).stringValue() }

        ['FactorsPhys', 'laborfact', 'biofactors', 'factorPesticide', 'chemfactgost', 'chemfacthyge', 'chemfactobrv', 'chemfactodovilni'].each {
        cephData[it] = submission('Activity_shared-add-factors').formData.prop(it).elements().stream().map(elem -&gt; {
        return ["factorId": elem.prop('factorId').value(), "name": elem.prop("name").value()]
        }).collect()
        }
        
        ['solutionName', 'solutionDate', 'letterNo', 'letterDate'].each { cephData[it] = submission('Activity_shared-add-decision-include').formData.prop(it).stringValue() }

        ['receivedBy', 'certifiedBy', 'notes'].each { cephData[it] = submission('Activity_shared-add-letter-data').formData.prop(it).stringValue() }

        execution.removeVariable('payload')
        set_transient_variable('payload', S(cephData, 'application/json'))</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:exclusiveGateway id="Gateway_083f29d">
      <bpmn:incoming>Flow_0s6qatb</bpmn:incoming>
      <bpmn:incoming>Flow_0dzoszc</bpmn:incoming>
      <bpmn:outgoing>Flow_1ydogcf</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:userTask id="Activity_shared-sign-app-include" name="Sign the QES" camunda:modelerTemplate="officerSignTaskTemplate" camunda:formKey="shared-sign-app-include" camunda:assignee="${initiator}">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="eSign" value="true" />
        </camunda:properties>
        <camunda:inputOutput>
          <camunda:inputParameter name="userTaskInputFormDataPrepopulate">${payload}</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1ydogcf</bpmn:incoming>
      <bpmn:outgoing>Flow_1yxm2a4</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:scriptTask id="Activity_0czoyo0" name="Preparation of document data for display" scriptFormat="groovy">
      <bpmn:incoming>Flow_01nffya</bpmn:incoming>
      <bpmn:outgoing>Flow_002ddyj</bpmn:outgoing>
      <bpmn:script>def cephData = [:]
        ['name', 'edrpou', 'registrationSource', 'registrationNo', 'createdDate', 'acceptedBy'].each {
        cephData[it] = submission('Activity_shared-add-application').formData.prop(it).stringValue()
        }

        ['FactorsPhys', 'laborfact', 'biofactors', 'factorPesticide', 'chemfactgost', 'chemfacthyge', 'chemfactobrv', 'chemfactodovilni'].each {
        cephData[it] = submission('Activity_shared-add-factors').formData.prop(it).elements().stream().map(elem -&gt; {
        return ["factorId": elem.prop('factorId').value(), "name": elem.prop("name").value()]
        }).collect()
        }

        ['solutionName', 'solutionDate', 'letterNo', 'letterDate'].each { cephData[it] = submission('Activity_shared-add-decision-deny').formData.prop(it).stringValue() }

        ['receivedBy', 'certifiedBy', 'notes'].each { cephData[it] = submission('Activity_1eujure').formData.prop(it).stringValue() }

        //refusal reasons
        def checkComplianceFormData = submission('Activity_shared-check-complience').formData
        ['errorCheckFlag', 'regComplianceFlag', 'factorComplianceFlag', 'zvtComplianceFlag', 'staffComplianceFlag', 'reagentComplianceFlag', 'facilityComplianceFlag'].each { cephData[it] = checkComplianceFormData.prop(it).boolValue() }

        ['regRefusalReason', 'factorRefusalReason', 'zvtRefusalReason', 'staffRefusalReason', 'reagentRefusalReason', 'facilityRefusalReason'].each {
        if (checkComplianceFormData.hasProp(it)) {
        cephData[it] = checkComplianceFormData.prop(it).elements().stream().map(elem -&gt; {
        return ["refusalReasonId": elem.prop("refusalReasonId").value(), "name": elem.prop("name").value()]
        }).collect()
        }
        }

        execution.removeVariable('payload')
        set_transient_variable('payload', S(cephData, 'application/json'))</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:exclusiveGateway id="Gateway_19mmoz0">
      <bpmn:incoming>Flow_1qplogf</bpmn:incoming>
      <bpmn:incoming>Flow_002ddyj</bpmn:incoming>
      <bpmn:outgoing>Flow_1m26089</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:userTask id="Activity_shared-sign-app-deny" name="Sign the QES" camunda:modelerTemplate="officerSignTaskTemplate" camunda:formKey="shared-sign-app-deny" camunda:assignee="${initiator}">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="eSign" value="true" />
        </camunda:properties>
        <camunda:inputOutput>
          <camunda:inputParameter name="userTaskInputFormDataPrepopulate">${payload}</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1m26089</bpmn:incoming>
      <bpmn:outgoing>Flow_01m4t8u</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:scriptTask id="Activity_0xtdm1d" name="Preparing data for writing (transient var)" scriptFormat="groovy">
      <bpmn:incoming>Flow_095xjzl</bpmn:incoming>
      <bpmn:outgoing>Flow_0sxg0gr</bpmn:outgoing>
      <bpmn:script>def requestMap = [:]
        def factors = []

        def signedFormData = submission('Activity_shared-sign-app-include').formData

        factorNames = ['FactorsPhys', 'laborfact', 'biofactors', 'factorPesticide', 'chemfactgost', 'chemfacthyge', 'chemfactobrv', 'chemfactodovilni']
        factorNames.each { factors.addAll(signedFormData.prop(it).elements().collect { it.prop('factorId').stringValue() }) }

        signedFormData.fieldNames().findAll { fieldName -&gt; !factorNames.contains(fieldName) }.each { requestMap[it] = signedFormData.prop(it).value() }

        requestMap['factors'] = factors
        requestMap['applicationTypeId'] = applicationTypeResponse.responseBody.elements()[0].prop('applicationTypeId').stringValue()
        requestMap['laboratoryId'] = submission('start_event').formData.prop('laboratory').prop('laboratoryId').value()
        requestMap['solutionTypeId'] = solutionTypeId

        var payload = S(requestMap, 'application/json')
        execution.removeVariable('payload')
        set_transient_variable('payload', payload)</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:serviceTask id="Activity_0vb7epo" name="Obtaining the unique identifier of the application type from the database" camunda:modelerTemplate="dataFactoryConnectorSearchDelegate" camunda:delegateExpression="${dataFactoryConnectorSearchDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">application-type-equal-constant-code</camunda:inputParameter>
          <camunda:inputParameter name="searchConditions">
            <camunda:map>
              <camunda:entry key="constantCode">EXPANSE</camunda:entry>
            </camunda:map>
          </camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${completer('Activity_shared-sign-app-include').accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="applicationTypeResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1yxm2a4</bpmn:incoming>
      <bpmn:outgoing>Flow_095xjzl</bpmn:outgoing>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_1i8kr4j">
        <bpmn:targetRef>DataStoreReference_1fpf99h</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:serviceTask>
    <bpmn:dataStoreReference id="DataStoreReference_1fpf99h" name="Database" />
    <bpmn:serviceTask id="Activity_115jjbm" name="Obtaining the unique identifier of the application type from the database" camunda:modelerTemplate="dataFactoryConnectorSearchDelegate" camunda:delegateExpression="${dataFactoryConnectorSearchDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">application-type-equal-constant-code</camunda:inputParameter>
          <camunda:inputParameter name="searchConditions">
            <camunda:map>
              <camunda:entry key="constantCode">EXPANSE</camunda:entry>
            </camunda:map>
          </camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${completer('Activity_shared-sign-app-deny').accessToken}</camunda:inputParameter>
          <camunda:outputParameter name="applicationTypeResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_01m4t8u</bpmn:incoming>
      <bpmn:outgoing>Flow_1yb4cif</bpmn:outgoing>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_0rq5677">
        <bpmn:targetRef>DataStoreReference_1v50epe</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:serviceTask>
    <bpmn:dataStoreReference id="DataStoreReference_1v50epe" name="Database" />
    <bpmn:scriptTask id="Activity_1183rrp" name="Preparing data for writing (transient var)" scriptFormat="groovy">
      <bpmn:incoming>Flow_1yb4cif</bpmn:incoming>
      <bpmn:outgoing>Flow_10rk4pw</bpmn:outgoing>
      <bpmn:script>def requestMap = [:]
        def factors = []
        def signedFormData = submission('Activity_shared-sign-app-deny').formData

        def factorNames = ['FactorsPhys', 'laborfact', 'biofactors', 'factorPesticide', 'chemfactgost', 'chemfacthyge', 'chemfactobrv', 'chemfactodovilni']
        factorNames.each { factors.addAll(signedFormData.prop(it).elements().collect { it.prop("factorId").stringValue() }) }

        //reasonIds
        def refusalReasons = []
        def reasonIds = ['regRefusalReason', 'factorRefusalReason', 'zvtRefusalReason', 'staffRefusalReason', 'reagentRefusalReason', 'facilityRefusalReason']
        reasonIds.each {
        if (signedFormData.hasProp(it) &amp;&amp; signedFormData.prop(it).elements().size() &gt; 0) {
        signedFormData.prop(it).elements().each { reason -&gt;
        refusalReasons &lt;&lt; reason.prop("refusalReasonId").value()
        }
        }
        }

        requestMap['refusalReasons'] = refusalReasons

        signedFormData.fieldNames().findAll { fieldName -&gt; !factorNames.contains(fieldName) &amp;&amp; !reasonIds.contains(fieldName) }.each { requestMap[it] = signedFormData.prop(it).value() }

        requestMap['factors'] = factors
        requestMap.put('applicationTypeId', applicationTypeResponse.responseBody.elements()[0].prop('applicationTypeId').stringValue())
        requestMap['laboratoryId'] = submission('start_event').formData.prop('laboratory').prop('laboratoryId').value()
        requestMap['solutionTypeId'] = solutionTypeId

        var payload = S(requestMap, 'application/json')
        execution.removeVariable('payload')
        set_transient_variable('payload', payload)</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:callActivity id="Activity_0cfy5es" name="Sign the data with the system key" calledElement="system-signature-bp">
      <bpmn:extensionElements>
        <camunda:in source="payload" target="dataToSign" />
        <camunda:out source="system_signature_ceph_key" target="system_signature_ceph_key" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0sxg0gr</bpmn:incoming>
      <bpmn:outgoing>Flow_0fvc6on</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:callActivity id="Activity_0vdpix5" name="Sign the data with the system key" calledElement="system-signature-bp">
      <bpmn:extensionElements>
        <camunda:out source="system_signature_ceph_key" target="system_signature_ceph_key" />
        <camunda:in source="payload" target="dataToSign" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_10rk4pw</bpmn:incoming>
      <bpmn:outgoing>Flow_1sfcjwg</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:dataStoreReference id="DataStoreReference_0yo9kt5" name="Database" />
    <bpmn:endEvent id="Event_0r6lc1n" name="A decision was made to expand the factors">
      <bpmn:incoming>Flow_1ez7nb5</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:serviceTask id="Activity_1hj4q4q" name="Forming the result of the review" camunda:modelerTemplate="defineBusinessProcessStatusDelegate" camunda:delegateExpression="${defineBusinessProcessStatusDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="status">Прийнято рішення про розширення факторів</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_160q9z1</bpmn:incoming>
      <bpmn:outgoing>Flow_1ez7nb5</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_17h0e3v" name="Save the data to the database" camunda:modelerTemplate="dataFactoryConnectorCreateDelegate" camunda:delegateExpression="${dataFactoryConnectorCreateDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">registration</camunda:inputParameter>
          <camunda:inputParameter name="payload">${payload}</camunda:inputParameter>
          <camunda:inputParameter name="x_digital_signature_derived_ceph_key">${system_signature_ceph_key}</camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${completer('Activity_shared-sign-app-include').accessToken}</camunda:inputParameter>
          <camunda:inputParameter name="x_digital_signature_ceph_key">${sign_submission('Activity_shared-sign-app-include').signatureDocumentId}</camunda:inputParameter>
          <camunda:outputParameter name="response">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0fvc6on</bpmn:incoming>
      <bpmn:outgoing>Flow_160q9z1</bpmn:outgoing>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_0kjtn71">
        <bpmn:targetRef>DataStoreReference_0yo9kt5</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Activity_0pkfuvm" name="Save the data to the database" camunda:modelerTemplate="dataFactoryConnectorCreateDelegate" camunda:delegateExpression="${dataFactoryConnectorCreateDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">registration</camunda:inputParameter>
          <camunda:inputParameter name="payload">${payload}</camunda:inputParameter>
          <camunda:inputParameter name="x_digital_signature_derived_ceph_key">${system_signature_ceph_key}</camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${completer('Activity_shared-sign-app-deny').accessToken}</camunda:inputParameter>
          <camunda:inputParameter name="x_digital_signature_ceph_key">${sign_submission('Activity_shared-sign-app-deny').signatureDocumentId}</camunda:inputParameter>
          <camunda:outputParameter name="response">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1sfcjwg</bpmn:incoming>
      <bpmn:outgoing>Flow_01qip9y</bpmn:outgoing>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_0b1nhak">
        <bpmn:targetRef>DataStoreReference_1ifrfot</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:serviceTask>
    <bpmn:dataStoreReference id="DataStoreReference_1ifrfot" name="Database" />
    <bpmn:serviceTask id="Activity_1hldx1b" name="Forming the result of the review" camunda:modelerTemplate="defineBusinessProcessStatusDelegate" camunda:delegateExpression="${defineBusinessProcessStatusDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="status">Прийнято рішення про залишення без розгляду</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_01qip9y</bpmn:incoming>
      <bpmn:outgoing>Flow_1gkmy7i</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="Event_0dcgtvi" name="A decision was made to leave it without consideration">
      <bpmn:incoming>Flow_1gkmy7i</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:endEvent id="Event_1ybp5s4" name="Business process not started">
      <bpmn:incoming>Flow_1kk7u20</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:boundaryEvent id="Event_1lubmwc" attachedToRef="Activity_17h0e3v">
      <bpmn:outgoing>Flow_0s6qatb</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_1ayg8je" />
    </bpmn:boundaryEvent>
    <bpmn:boundaryEvent id="Event_0q95h6c" attachedToRef="Activity_0pkfuvm">
      <bpmn:outgoing>Flow_1qplogf</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_054tobr" />
    </bpmn:boundaryEvent>
    <bpmn:exclusiveGateway id="Gateway_1ywry5e">
      <bpmn:incoming>Flow_0fgba15</bpmn:incoming>
      <bpmn:incoming>Flow_0jwfvs6</bpmn:incoming>
      <bpmn:outgoing>Flow_0z7c524</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_0z7c524" sourceRef="Gateway_1ywry5e" targetRef="Activity_1f69u9q" />
    <bpmn:sequenceFlow id="Flow_04zmfyx" sourceRef="Activity_0qj7ktf" targetRef="Gateway_154fbpf" />
    <bpmn:sequenceFlow id="Flow_1astsfg" sourceRef="start_event" targetRef="Activity_0qj7ktf" />
    <bpmn:serviceTask id="Activity_0qj7ktf" name="Subject search" camunda:modelerTemplate="dataFactoryConnectorReadDelegate" camunda:delegateExpression="${dataFactoryConnectorReadDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="resource">subject</camunda:inputParameter>
          <camunda:inputParameter name="x_access_token">${initiator().accessToken}</camunda:inputParameter>
          <camunda:inputParameter name="id">${submission('start_event').formData.prop('laboratory').prop('subjectId').value()}</camunda:inputParameter>
          <camunda:outputParameter name="subjectResponse">${ response }</camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1astsfg</bpmn:incoming>
      <bpmn:outgoing>Flow_04zmfyx</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_154fbpf" name="edrAbsentFlag">
      <bpmn:incoming>Flow_04zmfyx</bpmn:incoming>
      <bpmn:outgoing>Flow_1ihuqog</bpmn:outgoing>
      <bpmn:outgoing>Flow_0jwfvs6</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_1ihuqog" name="false" sourceRef="Gateway_154fbpf" targetRef="Activity_1atnxxt">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!subjectResponse.value.responseBody.prop('absentEdrFlag').boolValue()}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0jwfvs6" name="true" sourceRef="Gateway_154fbpf" targetRef="Gateway_1ywry5e">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${subjectResponse.value.responseBody.prop('absentEdrFlag').boolValue()}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
  </bpmn:process>
  <bpmn:signal id="Signal_12x926g" name="Signal_prepare_data" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_1ta1se6">
      <bpmndi:BPMNShape id="Participant_11d2pgr_di" bpmnElement="Participant_11d2pgr" isHorizontal="true">
        <dc:Bounds x="160" y="80" width="5030" height="950" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_02id5t3_di" bpmnElement="start_event" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="222" y="422" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="229" y="465" width="24" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1atnxxt_di" bpmnElement="Activity_1atnxxt" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="550" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1tfoihe_di" bpmnElement="Gateway_1tfoihe" isMarkerVisible="true" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="695" y="415" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="679" y="365" width="84" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0jpusp6_di" bpmnElement="Activity_shared-subject-status-error" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="670" y="640" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1f69u9q_di" bpmnElement="Activity_1f69u9q" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="970" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_1h47kkh_di" bpmnElement="DataStoreReference_1h47kkh">
        <dc:Bounds x="1295" y="535" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1288" y="592" width="71" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_192rata_di" bpmnElement="DataStoreReference_192rata">
        <dc:Bounds x="1145" y="535" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1138" y="592" width="71" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1nwe866_di" bpmnElement="Activity_1nwe866">
        <dc:Bounds x="1270" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_00kwvmn_di" bpmnElement="Activity_00kwvmn">
        <dc:Bounds x="1120" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_1160iuc_di" bpmnElement="DataStoreReference_1160iuc">
        <dc:Bounds x="995" y="535" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="988" y="592" width="71" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1mvylr3_di" bpmnElement="Gateway_1mvylr3" isMarkerVisible="true" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="1415" y="415" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1406" y="475" width="69" height="53" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_04ezlr6_di" bpmnElement="Activity_04ezlr6">
        <dc:Bounds x="1520" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_01wk2q7_di" bpmnElement="Gateway_01wk2q7" isMarkerVisible="true">
        <dc:Bounds x="1655" y="415" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1639" y="378" width="82" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_1j4lba4_di" bpmnElement="DataStoreReference_1j4lba4">
        <dc:Bounds x="1785" y="545" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1777" y="602" width="71" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0wa0mxl_di" bpmnElement="Gateway_0wa0mxl" isMarkerVisible="true">
        <dc:Bounds x="1905" y="415" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1885" y="475" width="89" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1h0f0du_di" bpmnElement="Activity_1h0f0du">
        <dc:Bounds x="2050" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0jde3l2_di" bpmnElement="Gateway_0jde3l2" isMarkerVisible="true">
        <dc:Bounds x="1985" y="415" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0rn2jw3_di" bpmnElement="Activity_0g747qa">
        <dc:Bounds x="1760" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_022lvl7_di" bpmnElement="Activity_shared-add-application" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="2180" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_14x5asd_di" bpmnElement="Activity_1xdhhss">
        <dc:Bounds x="2320" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0sp15w3_di" bpmnElement="Activity_shared-add-factors" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)">
        <dc:Bounds x="2450" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_14tqf9u_di" bpmnElement="Activity_14tqf9u">
        <dc:Bounds x="1120" y="640" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1jp0kp8_di" bpmnElement="Activity_1jp0kp8">
        <dc:Bounds x="970" y="640" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1ib9eoy_di" bpmnElement="Activity_1ib9eoy" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="1390" y="160" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1p9drdd_di" bpmnElement="Activity_1p9drdd">
        <dc:Bounds x="1880" y="160" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1qcgaxj_di" bpmnElement="Gateway_1qcgaxj" isMarkerVisible="true">
        <dc:Bounds x="2055" y="175" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_19gsmcp_di" bpmnElement="Activity_19gsmcp">
        <dc:Bounds x="2740" y="400" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_02b9fyp_di" bpmnElement="Activity_shared-check-complience" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="2880" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_04pw09i_di" bpmnElement="Gateway_04pw09i" isMarkerVisible="true" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="3025" y="415" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3019" y="383" width="67" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1fnkviu_di" bpmnElement="Gateway_1fnkviu" isMarkerVisible="true">
        <dc:Bounds x="3025" y="825" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0wozbu6_di" bpmnElement="Gateway_0wozbu6" isMarkerVisible="true">
        <dc:Bounds x="3135" y="415" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3126" y="472" width="70" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1l19g83_di" bpmnElement="Activity_1l19g83">
        <dc:Bounds x="2880" y="270" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1muqt5p_di" bpmnElement="Gateway_1muqt5p" isMarkerVisible="true">
        <dc:Bounds x="2615" y="415" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_01n89u4_di" bpmnElement="Activity_01n89u4" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="3380" y="400" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1e08895_di" bpmnElement="Activity_1e08895" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="3380" y="810" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_1g4u9ze_di" bpmnElement="DataStoreReference_1g4u9ze">
        <dc:Bounds x="3265" y="955" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3764" y="823" width="71" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_1b3j6vm_di" bpmnElement="DataStoreReference_1b3j6vm">
        <dc:Bounds x="3265" y="545" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3257" y="602" width="71" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_03lo1k2_di" bpmnElement="Activity_0wnn70u">
        <dc:Bounds x="3240" y="810" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0b9f19j_di" bpmnElement="Activity_0qxn3m4">
        <dc:Bounds x="3240" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1qb0ygn_di" bpmnElement="Activity_shared-add-decision-include" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="3517" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1sbkhnj_di" bpmnElement="Activity_shared-add-decision-deny" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="3517" y="810" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_031ypjx_di" bpmnElement="Activity_1y6ev6g">
        <dc:Bounds x="3660" y="400" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1br9pbi_di" bpmnElement="Activity_0xp7isz">
        <dc:Bounds x="3660" y="810" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0g754lb_di" bpmnElement="Activity_shared-add-letter-data" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="3800" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1eujure_di" bpmnElement="Activity_1eujure" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="3800" y="810" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1e9m9dw_di" bpmnElement="Activity_1e9m9dw" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)">
        <dc:Bounds x="3950" y="400" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1y6jgj4_di" bpmnElement="Gateway_083f29d" isMarkerVisible="true">
        <dc:Bounds x="4095" y="415" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0tmj599_di" bpmnElement="Activity_shared-sign-app-include" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="4180" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0czoyo0_di" bpmnElement="Activity_0czoyo0" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)">
        <dc:Bounds x="3950" y="810" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_19mmoz0_di" bpmnElement="Gateway_19mmoz0" isMarkerVisible="true">
        <dc:Bounds x="4095" y="825" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_10rbhnv_di" bpmnElement="Activity_shared-sign-app-deny" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="4180" y="810" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0xtdm1d_di" bpmnElement="Activity_0xtdm1d" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="4470" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0hrz376_di" bpmnElement="Activity_0vb7epo">
        <dc:Bounds x="4320" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_1fpf99h_di" bpmnElement="DataStoreReference_1fpf99h">
        <dc:Bounds x="4345" y="545" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="4338" y="602" width="71" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_08ui2kg_di" bpmnElement="Activity_115jjbm">
        <dc:Bounds x="4320" y="810" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_1v50epe_di" bpmnElement="DataStoreReference_1v50epe">
        <dc:Bounds x="4345" y="955" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="4338" y="1012" width="71" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1183rrp_di" bpmnElement="Activity_1183rrp" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="4480" y="810" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_030s5ap_di" bpmnElement="Activity_0cfy5es">
        <dc:Bounds x="4640" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1lzpyk7_di" bpmnElement="Activity_0vdpix5">
        <dc:Bounds x="4640" y="810" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_0yo9kt5_di" bpmnElement="DataStoreReference_0yo9kt5" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="4825" y="535" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="4814" y="592" width="72" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0r6lc1n_di" bpmnElement="Event_0r6lc1n" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="5122" y="422" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="5104" y="465" width="79" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_126c8xx_di" bpmnElement="Activity_1hj4q4q">
        <dc:Bounds x="4950" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0b2dnlh_di" bpmnElement="Activity_17h0e3v">
        <dc:Bounds x="4800" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0awimvz_di" bpmnElement="Activity_0pkfuvm">
        <dc:Bounds x="4800" y="810" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_1ifrfot_di" bpmnElement="DataStoreReference_1ifrfot" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="4825" y="935" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="4814" y="992" width="72" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1hldx1b_di" bpmnElement="Activity_1hldx1b">
        <dc:Bounds x="4950" y="810" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0dcgtvi_di" bpmnElement="Event_0dcgtvi" bioc:stroke="black" bioc:fill="white">
        <dc:Bounds x="5122" y="832" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="5104" y="875" width="78" height="53" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1ybp5s4_di" bpmnElement="Event_1ybp5s4">
        <dc:Bounds x="5122" y="182" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="5097" y="225" width="87" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1ywry5e_di" bpmnElement="Gateway_1ywry5e" isMarkerVisible="true">
        <dc:Bounds x="855" y="415" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0qj7ktf_di" bpmnElement="Activity_0qj7ktf">
        <dc:Bounds x="290" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_154fbpf_di" bpmnElement="Gateway_154fbpf" isMarkerVisible="true">
        <dc:Bounds x="425" y="415" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="414" y="488" width="72" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0q95h6c_di" bpmnElement="Event_0q95h6c">
        <dc:Bounds x="4832" y="792" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1lubmwc_di" bpmnElement="Event_1lubmwc">
        <dc:Bounds x="4832" y="382" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0fzm9lu_di" bpmnElement="Flow_0fzm9lu">
        <di:waypoint x="1070" y="440" />
        <di:waypoint x="1120" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0bqdujl_di" bpmnElement="Flow_0bqdujl">
        <di:waypoint x="1465" y="440" />
        <di:waypoint x="1520" y="440" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1494" y="422" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1k22rot_di" bpmnElement="Flow_1k22rot">
        <di:waypoint x="2420" y="440" />
        <di:waypoint x="2450" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_031mnm4_di" bpmnElement="Flow_031mnm4">
        <di:waypoint x="1620" y="440" />
        <di:waypoint x="1655" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0grb2w7_di" bpmnElement="Flow_0grb2w7">
        <di:waypoint x="1440" y="415" />
        <di:waypoint x="1440" y="240" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1418" y="346" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_11psjdp_di" bpmnElement="Flow_11psjdp">
        <di:waypoint x="3075" y="850" />
        <di:waypoint x="3240" y="850" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1oexxzl_di" bpmnElement="Flow_1oexxzl">
        <di:waypoint x="720" y="465" />
        <di:waypoint x="720" y="640" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="726" y="580" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1noplvn_di" bpmnElement="Flow_1noplvn" bioc:stroke="black" bioc:fill="white">
        <di:waypoint x="650" y="440" />
        <di:waypoint x="695" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0fgba15_di" bpmnElement="Flow_0fgba15">
        <di:waypoint x="745" y="440" />
        <di:waypoint x="855" y="440" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="775" y="422" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_01m4t8u_di" bpmnElement="Flow_01m4t8u">
        <di:waypoint x="4280" y="850" />
        <di:waypoint x="4320" y="850" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_01nffya_di" bpmnElement="Flow_01nffya">
        <di:waypoint x="3900" y="850" />
        <di:waypoint x="3950" y="850" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1yxm2a4_di" bpmnElement="Flow_1yxm2a4">
        <di:waypoint x="4280" y="440" />
        <di:waypoint x="4320" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0dzoszc_di" bpmnElement="Flow_0dzoszc">
        <di:waypoint x="4050" y="440" />
        <di:waypoint x="4095" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ql0du7_di" bpmnElement="Flow_0ql0du7">
        <di:waypoint x="3900" y="440" />
        <di:waypoint x="3950" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0noeu0t_di" bpmnElement="Flow_0noeu0t">
        <di:waypoint x="3760" y="440" />
        <di:waypoint x="3800" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1xciytp_di" bpmnElement="Flow_1xciytp">
        <di:waypoint x="3760" y="850" />
        <di:waypoint x="3800" y="850" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_18e6jb4_di" bpmnElement="Flow_18e6jb4">
        <di:waypoint x="3480" y="850" />
        <di:waypoint x="3517" y="850" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0p576zs_di" bpmnElement="Flow_0p576zs">
        <di:waypoint x="3480" y="440" />
        <di:waypoint x="3517" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_06ftmz7_di" bpmnElement="Flow_06ftmz7">
        <di:waypoint x="2840" y="440" />
        <di:waypoint x="2880" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1f6bexx_di" bpmnElement="Flow_1f6bexx">
        <di:waypoint x="2150" y="440" />
        <di:waypoint x="2180" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_002ddyj_di" bpmnElement="Flow_002ddyj">
        <di:waypoint x="4050" y="850" />
        <di:waypoint x="4095" y="850" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1m26089_di" bpmnElement="Flow_1m26089">
        <di:waypoint x="4145" y="850" />
        <di:waypoint x="4180" y="850" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1qtm8ta_di" bpmnElement="Flow_1qtm8ta">
        <di:waypoint x="3617" y="850" />
        <di:waypoint x="3660" y="850" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1mss6lk_di" bpmnElement="Flow_1mss6lk">
        <di:waypoint x="3617" y="440" />
        <di:waypoint x="3660" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_12s7c0i_di" bpmnElement="Flow_12s7c0i" bioc:stroke="black" bioc:fill="white">
        <di:waypoint x="2980" y="440" />
        <di:waypoint x="3025" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1sszi12_di" bpmnElement="Flow_1sszi12">
        <di:waypoint x="2550" y="440" />
        <di:waypoint x="2615" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1e2ivqf_di" bpmnElement="Flow_1e2ivqf">
        <di:waypoint x="2280" y="440" />
        <di:waypoint x="2320" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0fkrtc2_di" bpmnElement="Flow_0fkrtc2">
        <di:waypoint x="1680" y="465" />
        <di:waypoint x="1680" y="640" />
        <di:waypoint x="2010" y="640" />
        <di:waypoint x="2010" y="465" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1651" y="523" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ifee32_di" bpmnElement="Flow_1ifee32">
        <di:waypoint x="1955" y="440" />
        <di:waypoint x="1985" y="440" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1955" y="422" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0bjjwl5_di" bpmnElement="Flow_0bjjwl5">
        <di:waypoint x="1930" y="415" />
        <di:waypoint x="1930" y="240" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1907" y="322" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ydogcf_di" bpmnElement="Flow_1ydogcf">
        <di:waypoint x="4145" y="440" />
        <di:waypoint x="4180" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1vs5ys0_di" bpmnElement="Flow_1vs5ys0">
        <di:waypoint x="3050" y="465" />
        <di:waypoint x="3050" y="825" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3057" y="642" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0s6qatb_di" bpmnElement="Flow_0s6qatb">
        <di:waypoint x="4850" y="382" />
        <di:waypoint x="4850" y="330" />
        <di:waypoint x="4120" y="330" />
        <di:waypoint x="4120" y="415" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ez7nb5_di" bpmnElement="Flow_1ez7nb5">
        <di:waypoint x="5050" y="440" />
        <di:waypoint x="5122" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1qplogf_di" bpmnElement="Flow_1qplogf">
        <di:waypoint x="4850" y="792" />
        <di:waypoint x="4850" y="730" />
        <di:waypoint x="4120" y="730" />
        <di:waypoint x="4120" y="825" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1gkmy7i_di" bpmnElement="Flow_1gkmy7i">
        <di:waypoint x="5050" y="850" />
        <di:waypoint x="5122" y="850" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ocvyix_di" bpmnElement="Flow_0ocvyix">
        <di:waypoint x="2035" y="440" />
        <di:waypoint x="2050" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0rc8gzz_di" bpmnElement="Flow_0rc8gzz">
        <di:waypoint x="1705" y="440" />
        <di:waypoint x="1760" y="440" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1726" y="422" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_03g1pyj_di" bpmnElement="Flow_03g1pyj">
        <di:waypoint x="1860" y="440" />
        <di:waypoint x="1905" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_07fzwsa_di" bpmnElement="Flow_07fzwsa">
        <di:waypoint x="3340" y="850" />
        <di:waypoint x="3380" y="850" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_14s444c_di" bpmnElement="Flow_14s444c">
        <di:waypoint x="3075" y="440" />
        <di:waypoint x="3135" y="440" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3091" y="422" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1fmohce_di" bpmnElement="Flow_1fmohce">
        <di:waypoint x="3340" y="440" />
        <di:waypoint x="3380" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_095xjzl_di" bpmnElement="Flow_095xjzl">
        <di:waypoint x="4420" y="440" />
        <di:waypoint x="4470" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1yb4cif_di" bpmnElement="Flow_1yb4cif">
        <di:waypoint x="4420" y="850" />
        <di:waypoint x="4480" y="850" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_10rk4pw_di" bpmnElement="Flow_10rk4pw">
        <di:waypoint x="4580" y="850" />
        <di:waypoint x="4640" y="850" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1sfcjwg_di" bpmnElement="Flow_1sfcjwg">
        <di:waypoint x="4740" y="850" />
        <di:waypoint x="4800" y="850" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_01qip9y_di" bpmnElement="Flow_01qip9y">
        <di:waypoint x="4900" y="850" />
        <di:waypoint x="4950" y="850" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0sxg0gr_di" bpmnElement="Flow_0sxg0gr">
        <di:waypoint x="4570" y="440" />
        <di:waypoint x="4640" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0fvc6on_di" bpmnElement="Flow_0fvc6on">
        <di:waypoint x="4740" y="440" />
        <di:waypoint x="4800" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_160q9z1_di" bpmnElement="Flow_160q9z1">
        <di:waypoint x="4900" y="440" />
        <di:waypoint x="4950" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1lgw1hb_di" bpmnElement="Flow_1lgw1hb">
        <di:waypoint x="1220" y="680" />
        <di:waypoint x="2010" y="680" />
        <di:waypoint x="2010" y="465" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_03igog1_di" bpmnElement="Flow_03igog1">
        <di:waypoint x="1370" y="440" />
        <di:waypoint x="1415" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0h1qeo7_di" bpmnElement="Flow_0h1qeo7">
        <di:waypoint x="1220" y="440" />
        <di:waypoint x="1270" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_17vdh7e_di" bpmnElement="Flow_17vdh7e">
        <di:waypoint x="770" y="680" />
        <di:waypoint x="970" y="680" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0jutxh3_di" bpmnElement="Flow_0jutxh3">
        <di:waypoint x="1070" y="680" />
        <di:waypoint x="1120" y="680" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_017q7vu_di" bpmnElement="Flow_017q7vu">
        <di:waypoint x="1440" y="160" />
        <di:waypoint x="1440" y="110" />
        <di:waypoint x="2080" y="110" />
        <di:waypoint x="2080" y="175" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0cdk9hq_di" bpmnElement="Flow_0cdk9hq">
        <di:waypoint x="1980" y="200" />
        <di:waypoint x="2055" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1kk7u20_di" bpmnElement="Flow_1kk7u20">
        <di:waypoint x="2105" y="200" />
        <di:waypoint x="5122" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0wvsc7d_di" bpmnElement="Flow_0wvsc7d">
        <di:waypoint x="3185" y="440" />
        <di:waypoint x="3240" y="440" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3203" y="422" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0czqcon_di" bpmnElement="Flow_0czqcon">
        <di:waypoint x="3160" y="415" />
        <di:waypoint x="3160" y="310" />
        <di:waypoint x="2980" y="310" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3166" y="360" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1sd5jtw_di" bpmnElement="Flow_1sd5jtw">
        <di:waypoint x="2665" y="440" />
        <di:waypoint x="2740" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1yc27bu_di" bpmnElement="Flow_1yc27bu">
        <di:waypoint x="2880" y="310" />
        <di:waypoint x="2640" y="310" />
        <di:waypoint x="2640" y="415" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0z7c524_di" bpmnElement="Flow_0z7c524">
        <di:waypoint x="905" y="440" />
        <di:waypoint x="970" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_04zmfyx_di" bpmnElement="Flow_04zmfyx">
        <di:waypoint x="390" y="440" />
        <di:waypoint x="425" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1astsfg_di" bpmnElement="Flow_1astsfg">
        <di:waypoint x="258" y="440" />
        <di:waypoint x="290" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ihuqog_di" bpmnElement="Flow_1ihuqog">
        <di:waypoint x="475" y="440" />
        <di:waypoint x="550" y="440" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="501" y="422" width="23" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0jwfvs6_di" bpmnElement="Flow_0jwfvs6">
        <di:waypoint x="450" y="415" />
        <di:waypoint x="450" y="310" />
        <di:waypoint x="880" y="310" />
        <di:waypoint x="880" y="415" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="656" y="292" width="19" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataInputAssociation_15nwbsr_di" bpmnElement="DataInputAssociation_15nwbsr">
        <di:waypoint x="1020" y="535" />
        <di:waypoint x="1020" y="480" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataInputAssociation_1bmalri_di" bpmnElement="DataInputAssociation_1bmalri">
        <di:waypoint x="1320" y="535" />
        <di:waypoint x="1320" y="480" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataInputAssociation_1xdqasv_di" bpmnElement="DataInputAssociation_1xdqasv">
        <di:waypoint x="1170" y="535" />
        <di:waypoint x="1170" y="480" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_13ijfjx_di" bpmnElement="DataOutputAssociation_13ijfjx">
        <di:waypoint x="1810" y="480" />
        <di:waypoint x="1810" y="545" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_1w7m0r5_di" bpmnElement="DataOutputAssociation_1w7m0r5">
        <di:waypoint x="3290" y="890" />
        <di:waypoint x="3290" y="955" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_0o1r7ko_di" bpmnElement="DataOutputAssociation_0o1r7ko">
        <di:waypoint x="3290" y="480" />
        <di:waypoint x="3290" y="545" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_1i8kr4j_di" bpmnElement="DataOutputAssociation_1i8kr4j">
        <di:waypoint x="4370" y="480" />
        <di:waypoint x="4370" y="545" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_0rq5677_di" bpmnElement="DataOutputAssociation_0rq5677">
        <di:waypoint x="4370" y="890" />
        <di:waypoint x="4370" y="955" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_0kjtn71_di" bpmnElement="DataOutputAssociation_0kjtn71">
        <di:waypoint x="4850" y="480" />
        <di:waypoint x="4850" y="535" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_0b1nhak_di" bpmnElement="DataOutputAssociation_0b1nhak">
        <di:waypoint x="4850" y="890" />
        <di:waypoint x="4850" y="935" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
