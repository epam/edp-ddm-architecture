= Розгортання регламенту новоствореного реєстру на базі шаблону

[NOTE]
--
В даній статті фіксується обсяг змін що були виконані для реалізації підтримки Платформою регіонів обслуговування.
--

== Опис

В залежності від регіону обслуговування, реєстр на Платформі може надавати різні можливості, налаштування яких виконується розробником регламенту. При створенні нового реєстру, репозиторій регламенту ініціалізується шаблоном, який поставляється разом з Платформою і який, в свою чергу, може відрізнятись для різних регіонів.

== Епіки

* _https://jiraeu.epam.com/browse/MDTUDDM-29656[[BN-08-03\][S23\][OSS\] Розгортання регламенту новоствореного реєстру на базі шаблону в залежності від обраного регіону обслуговування]_

== Функціональні сценарії

* Створення нового реєстру
* Перегляд витягу історичності даних
* Підтвердження каналу зв’язку шляхом відправлення повідомлень зі згенерованими OTP-кодами

== Зміни в підсистемах

|===
|Підсистема|Компонент|Зміна

.2+|_Підсистема управління Платформою та реєстрами_
|`_control-plane-gerrit_`
.2+a|
* Переіменувати компонент / репозиторій регламенту _empty-template-registry-regulation_ в _registry-regulation-template-ua_
* Створити компонент / репозиторій регламенту _registry-regulation-template-global_
* В репозиторії _registry-regulation-template-global_:
** Локалізувати витяг історичності даних _/excerpts/HistoryExcerpt/index.html.ftl_
** Локалізувати шаблон поштових повідомлень зі згенерованим OTP-кодом _/notifications/email/channel-confirmation/_
* Розширити CI новою компонентою-бібліотекою _registry-regulation-template-global_
* Включити компонент _registry-regulation-template-global_ в збірку інсталера
* При розгортанні нового реєстру в залежності від налаштованого регіону обслуговування використовувати для ініціалізації репозиторію регламенту реєстру (_CICD_ та _TARGET_):
** _ua_-регіон: _registry-regulation-template-ua_
** _global_-регіон: _registry-regulation-template-global_
|`_edp-library-stages-fork_`
|===

== Поза скоупом

|===
|Підсистема|Компонент|Зміна|Коментар
|_Підсистема управління Платформою та реєстрами_
|`_control-plane-gerrit_`
|Селективне включення репозиторіїв шаблонів регламенту при збірці інсталятора під конкретний регіон
|Поза скоупом першої фази
.4+|_Підсистема управління Платформою та реєстрами_
.3+a|
* `_registry-regulation-template-global_`
* `_registry-regulation-template-ua_`
|Переіменування складової регламенту "_bp-trembita_" та файлів налаштувань
a|В рамках окремих епіків:

* https://jiraeu.epam.com/browse/MDTUDDM-29207[[BN-15-08\][S24\][Dev\] Генералізація складової регламенту управління інтеграціями "bp-trembita" та розмежування управління публікацією API бізнес-процесів для Трембіти / без Трембіти]

|Розширення шаблону регламенту темою / логотипами за замовчуванням
a|Включення в регламент та локалізація є частиною епіків:

* https://jiraeu.epam.com/browse/MDTUDDM-28829[[BN-08-03\][S23\][OpenSource\] Адаптування інтерфейсу Адмін Порталу під open source kit]
* https://jiraeu.epam.com/browse/MDTUDDM-28829[[BN-08-03\][S23\][OpenSource\] Додавання diia_dark теми для open source кабінетів користувачів]

|Розширення шаблону регламенту інформаційними панелями журналів аудиту
a|Включення в регламент та локалізація є частиною епіків:

* https://jiraeu.epam.com/browse/MDTUDDM-29883[[BN-08-03\][S23\][OSS\] Локалізація службових інформаційних панелей]

|===

== Вплив на підсистеми

|===
|Підсистема|Опис
|_Підсистема формування витягів реєстру_
|При запиті на формування витягу історичності даних, використовується шаблон витягу в залежності від регіону
|_Підсистема нотифікацій користувачів_
|При відправці поштових повідомлень підтвердження каналу зв'язку використовується шаблон повідомлення в залежності від регіону
|_Підсистема моделювання регламенту реєстру_
.2+|Репозиторій регламенту реєстру наповнений складовими в залежності від регіону обслуговування
|_Підсистема розгортання регламенту реєстру_
|===

== Перелік git-комітів

Для відстеження MR зі змінами використовувати https://gerrit-mdtu-ddm-edp-cicd.apps.cicd2.mdtu-ddm.projects.epam.com/q/status:open+-is:wip+MDTUDDM-29656[фільтр].