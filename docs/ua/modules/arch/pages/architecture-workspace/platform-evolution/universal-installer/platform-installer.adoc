= Адаптація "Компоненти керування станом ресурсів Платформи"

[NOTE]
--
В даній статті фіксується обсяг змін що були виконані для реалізації підтримки Платформою регіонів обслуговування.
--

== Опис
Задля забезпечення підтримки роботи Платформи реєстрів в різних регіонах або країнах і платформному інсталері
вводиться поняття "Регіон Платформи". Впроваджується можливість при встановленні Платформи вказати регіон обслуговування,
передати його на рівень конфігурації реєстрів та самої Платформи, а також, розгортання тестового оточення на CICD2 з
можливістю вказання регіону обслуговування.

== Епіки
* _https://jiraeu.epam.com/browse/MDTUDDM-28890[[BN-08-03\][S23\][OSS\]Розширення інсталятора Платформи можливістю задати регіон обслуговування_]

== Функціональні сценарії
* Встановлення Платформи реєстрів
* Оновлення Платформи реєстрів
* Розробка та тестування Платформи реєстрів

== Зміни в підсистемах

|===
|Підсистема|Компонент|Зміна

.3+|Компонент керування станом ресурсів Платформи
.3+|`_control-plane-installer_`
|Реалізація можливості передати регіон обслуговування в інсталяційний образ Платформи.

|Обробка регіону обслуговування та його застосування в конфігурації `cluster-mgmt` та `registry-tenant-template`.

|Привести всі вхідні параметри оточення до єдиного стилю написання.

.3+|Jenkins бібліотеки
.3+|`_edp-library-stages-fork_`
|Адаптація jenkins stages (prepare-helmfile) для розгортання Платформи та реєстрів обробкою переданого з пайплайну обраного регіону та передання його в values чартів.

|Обробка регіону обслуговування та його застосування в конфігурації `cluster-mgmt` та `registry-tenant-template` на CICD2.

|Привести всі вхідні параметри оточення в інсталяторі до єдиного стилю написання.

.2+|Підсистема управління Платформою та реєстрами
|`_control-plane-gerrit_`
|Привести всі вхідні параметри оточення до єдиного стилю написання.

|`control-plane-console`
|Адаптація по роботі з values під час створення МР

|Оточення розробки платформи CI/CD2
|`_devops-technical_`
|Адаптація jenkins job-provisioners додаванням нового параметра регіону. Створення нового тестового оточення без UA-oriented quality gates через EDP консоль.

|===

== Поза скоупом

|===
|Підсистема|Компонент|Зміна|Коментар
|Всі підсистеми
|Всі компоненти реєстрів та Платформи
|Адаптація компонента до роботи з регіонами обслуговування.
|-

|Компонент керування станом ресурсів Платформи
|`_control-plane-installer_`
|Прибирання обовʼязкових сертифікатів для розгортання Платформи.
|Буде виконано в рамках епіку https://jiraeu.epam.com/browse/MDTUDDM-29640[по покращенню інсталлятора Платформи].

|===

== Вплив на підсистеми

|===
|Підсистема|Компонент|Опис
|Впливає на всі підсистеми і реєстру і Платформи.
|Впливає на всі компоненти і реєстру і Платформи.
|Передається нове значення регіону обслуговування в конфігурацію та у всі чарти компонентів.
|===

== Перелік git-комітів
Для відстеження MR зі змінами використовувати https://gerrit-mdtu-ddm-edp-cicd.apps.cicd2.mdtu-ddm.projects.epam.com/q/status:merged+-is:wip+branch:master+MDTUDDM-28890[фільтр].
