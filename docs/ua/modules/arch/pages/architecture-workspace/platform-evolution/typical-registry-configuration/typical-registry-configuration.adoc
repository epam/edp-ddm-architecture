= [BN-02-02][S23][A] Вибір рекомендованої конфігурації розподілення ресурсів згідно профілю реєстру через веб-інтерфейс Control Plane

== Загальний опис
В поточній версії Платформи конфігурація ресурсів реєстру зберігається в git репозиторії і для налаштування застосовується
інтерфейс адмін-консолі або ручне конфігурування в репозиторії. Цей підхід не завжди зручний, особливо коли необхідно
задати конфігурацію для всіх компонентів реєстру. Для надання адміністратору реєстру більш зручної можливості
налаштовувати конфігурацію реєстрів необхідно впровадити типові конфігурації ресурсів реєстрів.

== Функціональні сценарії
* Створення реєстру
* Редагування конфігурації реєстру

== Ролі користувачів
* Адміністратор Платформи
* Адміністратор Реєстру

== Загальні принципи та положення
. В дистрибутив Платформи Реєстрів включено набір "типових/рекомендованих" конфігурацій для розгортання реєстрів з оптимальним
використанням ресурсів згідно вимог у вигляді yaml-файлів структури, яка повторює операційну конфігурацію
** Реєстр для розробки / мінімальний
** Оперативний
** Тактичний
** Стратегічний
. Адміністратору реєстру / Платформи доступна опція вибору конфігурації ресурсів з переліку доступних
. При виборі конфігурації ресурсів з переліку, формується МР на внесення змін в операційну конфігурацію реєстру зі значеннями з цільового файлу конфігурації

== Високорівневий дизайн рішення

=== Мокап інтерфейсу

.Орієнтовний UI mockup
image::architecture-workspace/platform-evolution/typical-registry-configuration/mockup1.png[]

=== Типові конфігурації
Файл з типовою конфігурацією ресурсів реєстру являє собою частину реєстрового values.yaml з наступними параметрами:

* `global.computeResources.*`
* `global.container.*`
* `global.istio.*`
* `global.registry.*`

та знаходяться за шляхом в `control-plane-gerrit` репозиторії `resources/repositories/templates/registry-tenant-template.git/typical-registry-configurations`.

=== Застосування типової конфігурації
. Адмін-консоль відображає список наявних типових конфігурацій ресурсів реєстру.
. При виборі однієї з конфігурацій, всі поля мають заповнитись відповідними значеннями з цього файлу.
. Адміністратор може відредагувати значення полів, як він вважає за потрібне або підтвердити вибір конфігурації.
. Відбувається застосування конфігурації до реєстру підсистемою розгортання на налаштування.

== Компоненти системи та їх призначення в рамках дизайну рішення
У даному розділі наведено перелік компонент системи, які задіяні або потребують змін в рамках реалізації дизайну.

|===
|Підсистема|Компонент|Модуль|Опис змін

|Підсистема управління Платформою та реєстрами
|*control-plane-console*
|https://github.com/epam/edp-ddm-control-plane-console[github:/epam/edp-ddm-control-plane-console]
|Роботи по впровадженню фунціоналу для вибору рекомендованої конфігурації ресурсів реєстру.

|Підсистема управління Платформою та реєстрами
|*control-plane-gerrit*
|https://github.com/epam/edp-ddm-control-plane-gerrit[github:/epam/edp-ddm-control-plane-gerrit]
|Внесення в єдиний шаблон реєстру типових конфігурацій (перелік може розширюватись).

|===

== Високорівневий план розробки
=== Технічні експертизи
* _DevOps_
* _FE_

=== Попередній план розробки
. Розробка та впровадження рекомендованих конфігурацій ресурсів реєстрів (взяти з perf оточення)
. Розробка та впровадження веб-інтерфейсу для вибору рекомендованої конфігурації ресурсів реєстру

