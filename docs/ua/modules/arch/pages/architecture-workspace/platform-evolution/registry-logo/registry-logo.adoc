= Налаштування логотипу реєстру

== Загальний опис

Необхідно надати можливість налаштовувати логотипи у хедері сторінок, логотип лоадера, favicon для окремого реєстру.
Обрані логотипи платформи мають відображатись у всіх кабінетах.

== Актори та ролі користувачів

* Адміністратор платформи
* Моделювальник реєстру
* Посадова особа
* Користувач порталыв

== Функціональні сценарії

* Перегляд логотипів у порталах реєстру (officer, citizen, admin).
* Оновлення логотипів для окремого реєстру

== Загальні принципи та положення

* Налаштування логотипів відбувається на рівні регламенту реєстру
* Моделювальник може вказати наступні логотипи:
** Логотип у навігаційному меню
** Логотип у вкладці браузера (favicon)
** Логотип у лоадеру
* За замовчуванням використовуються поточні українські логотипи та іконки

== Високорівневий дизайн рішення

На рівні регламенту з'являється нова папка _assets_, яка міститиме необхідні файли

Структура папки:

* ./assets
** ./header-logo.svg
** ./loader-logo.svg
** ./favicon.png

Файли з цієї папки читаються на рівні пайплайну публікації регламенту, перетворюються на base64 рядки і додаються до конфігмапи *registry-logos*.
Дана конфігмапа маунтиться до порталів.

[source,yaml]
.deployments/officer-portal
----
volumeMounts:
  - name: registry-logos
    mountPath: /usr/share/nginx/html/portal-officer/logos/registry-logos
----

[source,javascript]
.Приблизний вміст конфігмапи
----
const REGISTRY_LOGOS = {
  headerLogo: 'fileInbase64',
  loaderLogo: 'fileInbase64',
  favicon: 'fileInbase64'
}
----

Інша опція - маунтити кожен окремий файл у форматі base64 як конфігмапу до порталів, на рівні порталів обробляти цей файл

[source,yaml]
.deployments/officer-portal
----
volumeMounts:
  - name: header-logo
    mountPath: /usr/share/nginx/html/portal-officer/logos/header-logo
----

== Компоненти системи та їх призначення в рамках дизайну рішення

У даному розділі наведено перелік компонент системи, які залучені або потребують змін в рамках реалізації функціональних вимог.

|===
|Підсистема|Компонент|Опис змін

|Підсистема кабінетів
|*common-web-app*
|Додати обробку логотипів які будуть потрапляти до порталів у форматі base64 тексту.
|Підсистема розгортання регламенту
|*registry-regulation-publication-pipeline*
|Додати стейдж обробки логотипів з регламенту і оновлення конфігмапи
|Підсистема розгортання регламенту
|*registry-regulation-validator*
|Додати перевірку наявності та не пустоти трьох нових файлів
|Підсистема розгортання та налаштування Платформи та реєстрів
|*registry-configuration*
|Додати створення конфігмапи _registry-logos_ для подальшого оновлення пайплайном публікацї
|===

=== Експертизи

* DevOps
* BE
* FE (react)

== Міграція існуючих реєстрів при оновленні

Необхідний міграційний скрипт, який до усіх існуючих реєстрів додасть файли з дефолтними українськими логотипами

== Поза скоупом

* Вплив логотипів на сторінки автентифікації
