= Налаштування логотипу реєстру

== Загальний опис

Обрані логотипи платформи мають застосовуватись також і для кабінетів реєстру.

== Актори та ролі користувачів

* Адміністратор платформи
* Технічний адміністратор реєстру
* Моделювальник реєстру
* Посадова особа
* Користувач citizen-portal

== Функціональні сценарії

* Перегляд логотипів обраних для платформи у порталах реєстру (officer, citizen, admin) та сторінках автентифікації.

== Загальні принципи та положення

* Кожен реєстр використовує логотипи обрані на рівні платформи
* До порталів мають застосовуватись наступні логотипи платформи:
** Логотип у навігаційному меню
** Логотип у вкладці браузера (favicon)
** Логотип у лоадеру
* Зміни логотипів платформи не повинні призводити до переразгортання реєстрів

== Компоненти системи та їх призначення в рамках дизайну рішення

У даному розділі наведено перелік компонент системи, які залучені або потребують змін в рамках реалізації функціональних вимог.

|===
|Підсистема|Компонент|Опис змін

|Підсистема управління Платформою та Реєстрами
|*control-plane-console*
|Додати заповнення параметрів логотипів у Codebase реєстру

|Репозиторій порталів платформи
|*common-web-app*
|Додати обробку логотипів які будуть потрапляти до порталів та сторінок автентифікації як змінні у Config Map (`environment.js`) у форматі base64 рядку.

|Репозиторій порталів платформи
|*keycloak*
|Прийняти значення логотипів як env змінну та передати їх додаткам сторінок автентифікації (officer, citizen).

|===

== Ключові сценарії

=== Зміна логотипів платформи

* перехід у налаштування платформи
* перехід на вкладку Загальне
* на цій вкладці обрати нові файли для логотипів платформи
* після збереження значення обраних логотипів записуються у Codebase `values.yaml` *кожного* реєстру.

=== Створення нового реєстру

- При створенні реєстру значення змінних логотипів у Codebase `values.yaml` записуються такі самі як на платформі

== Міграція існуючих реєстрів при оновленні

???

== Технічне рішення

=== Експертизи

* Devops
* BE (_Go_)
* BE (Java)
* FE (react)

=== Високорівневий дизайн рішення

TBA diagram

[source,yaml]
.:registry/deploy-templates/values.yaml
----
global:
  logoMain: base64
  logoLoader: base64
  logoFavicon: base64
----

[source,yaml]
.????.yaml
----
env:
  - name: LOGO_MAIN
    value: {{ .Values.global.logoMain }}
  - name: LOGO_LOADER
    value: {{ .Values.global.logoLoader }}
----

=== План розробки

==== Рівень control-plane-console

* Оновити всі codebase реєстрів при зміні логотипів платформи
** Оновлення не повинне спричиняти переразгортання реєстру
* Задати дефолтне значення логотипів для codebase реєстру з `values.yaml` платформи

==== Рівень порталів
* Значення логотипів за допомогою Config Map (`environment.js`) потрапляють у officer portal, citizen portal, admin-portal (Devops).
* Значення логотипів за допомогою env var потрапляють у keycloak який передає їх сторінкам автентифікації за допомогою template vars (Devops).
* Значення файла логотипу використовується у рендерингу порталів та сторінок автентифікації у:
** Логотип у навігаційному меню
** Логотип у лоадеру
** Логотип у вкладці браузера (favicon)

== Поза скоупом

* Вибір окремих логотипів на рівні реєстру.
