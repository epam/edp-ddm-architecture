== Робота з цифровим підписом для файлів

=== Накладання цифрового підпису на файл

Діаграма послідовності пакладання підпису для файлу у Ceph сховищі:
[plantuml]
----
include::arch:partial$architecture/registry/operational/digital-signatures/services/sign-file.puml[]
----

Сервіс здійснюює пошук файлу у Ceph сховищі додає в системний підпис у файл та оновлює данні в сховищі. Пошук файлу відбувається у сегменті данних Ceph заданому у конфігурації сервісу ceph.bucket ceph.http-endpoint та за допомогою ключа у тілі запиту.

Запит:
[source]
----
POST /api/file/sign
----

Тіло запиту:
[source, json]
----
{
    "cephKey": "string"
}
----

Відповіді:

* 200 OK Файл успішно підписано

Тіло відповіді:
[source, json]
----
{
    "signed": true
}
----

* 404 Помилка файл не знайдено
Тіло відповіді:
[source]
----
{
    "Excerpt not found in Ceph"
}
----

* 400 Помилка невалідний запит
* 500 Помилка обробки запиту
