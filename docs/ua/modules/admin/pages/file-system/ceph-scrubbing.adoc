= –ü–µ—Ä–≤–∏–Ω–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—ñ–≤ Scrubbing —Ç–∞ Deep Scrubbing —É Ceph-–∫–ª–∞—Å—Ç–µ—Ä—ñ
include::platform:ROOT:partial$templates/document-attributes/default-set-ua.adoc[]

include::platform:ROOT:partial$admonitions/language-ua.adoc[]

–ü—ñ—Å–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ü–ª–∞—Ç—Ñ–æ—Ä–º–∏ –Ω–∞ *OKD-–∫–ª–∞—Å—Ç–µ—Ä* —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –≤–∏–∫–æ–Ω–∞—Ç–∏ –ø–µ—Ä–≤–∏–Ω–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—ñ–≤ *scrubbing* —Ç–∞ *deep scrubbing* —É Ceph-–∫–ª–∞—Å—Ç–µ—Ä—ñ –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —Ü—ñ–ª—ñ—Å–Ω–æ—Å—Ç—ñ –¥–∞–Ω–∏—Ö —Ç–∞ —Å—Ç–∞–±—ñ–ª—å–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ —Å–∏—Å—Ç–µ–º–∏.

[IMPORTANT]
====
–¶—ñ –ø–µ—Ä–≤–∏–Ω–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ –¥–ª—è **–≤–∏—Ä–æ–±–Ω–∏—á–∏—Ö (production) –æ—Ç–æ—á–µ–Ω—å** —ñ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –¥–æ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –æ–¥—Ä–∞–∑—É –ø—ñ—Å–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ü–ª–∞—Ç—Ñ–æ—Ä–º–∏.
====

[#scrubbing-overview]
== –ó–∞–≥–∞–ª—å–Ω—ñ –≤—ñ–¥–æ–º–æ—Å—Ç—ñ

*Scrubbing* (*—Å–∫—Ä–∞–±—É–≤–∞–Ω–Ω—è*) —Ç–∞ *deep scrubbing* -- —Ü–µ —Ñ–æ–Ω–æ–≤—ñ –ø—Ä–æ—Ü–µ—Å–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –¥–∞–Ω–∏—Ö, —â–æ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è —É Ceph-–∫–ª–∞—Å—Ç–µ—Ä—ñ –¥–ª—è –≤–∏—è–≤–ª–µ–Ω–Ω—è –ø–æ—à–∫–æ–¥–∂–µ–Ω–∏—Ö –∞–±–æ –Ω–µ–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö –æ–±'—î–∫—Ç—ñ–≤:

- *Scrubbing* –ø–µ—Ä–µ–≤—ñ—Ä—è—î –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ñ —Å—É–º–∏ –æ–±'—î–∫—Ç—ñ–≤ —É *Placement Groups (PG)* —Ç–∞ –¥–æ–∑–≤–æ–ª—è—î –≤–∏—è–≤–∏—Ç–∏ –ø–æ–º–∏–ª–∫–∏ –≤ –º–µ—Ç–∞–¥–∞–Ω–∏—Ö.
- *Deep scrubbing* –≤–∏–∫–æ–Ω—É—î –≥–ª–∏–±—à—É –ø–µ—Ä–µ–≤—ñ—Ä–∫—É, –ø–æ—Ä—ñ–≤–Ω—é—é—á–∏ —Ä–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ –æ–±'—î–∫—Ç—ñ–≤ –∑ —ó—Ö–Ω—ñ–º–∏ —Ö–µ—à–∞–º–∏, —â–æ–± –≤–∏—è–≤–∏—Ç–∏ –ø–æ—à–∫–æ–¥–∂–µ–Ω—ñ –∞–±–æ –Ω–µ–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ –¥–∞–Ω—ñ.
- Scrubbing –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ, –∞–ª–µ –º–æ–∂–µ –±—É—Ç–∏ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –≤—Ä—É—á–Ω—É –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ.

[#why-scrubbing-matters]
== –ß–æ–º—É –≤–∞–∂–ª–∏–≤–æ –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏ scrubbing

–ù–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è, —è–∫–µ —Å—Ç–≤–æ—Ä—é—î –ø—Ä–æ—Ü–µ—Å scrubbing, –º–æ–∂–µ –≤–ø–ª–∏–≤–∞—Ç–∏ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–∞, —Ç–æ–º—É —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è:

- –ó–∞–ø–ª–∞–Ω—É–≤–∞—Ç–∏ –∑–≤–∏—á–∞–π–Ω–∏–π scrubbing –Ω–∞ –Ω—ñ—á–Ω–∏–π —á–∞—Å –∞–±–æ –≤ –ø–µ—Ä—ñ–æ–¥–∏ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ–≥–æ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è.
- –ó–∞–ø—É—Å–∫–∞—Ç–∏ *deep scrubbing* –≤—Ä—É—á–Ω—É –∞–±–æ –∑–∞ —á—ñ—Ç–∫–∏–º —Ä–æ–∑–∫–ª–∞–¥–æ–º.
- –û–±–º–µ–∂—É–≤–∞—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤ –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –≤–ø–ª–∏–≤—É –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–∞.

[#recommended-initial-settings]
== –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –ø–µ—Ä–≤–∏–Ω–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Scrubbing —Ç–∞ Deep Scrubbing

–í–∏–∫–æ–Ω–∞–π—Ç–µ —Ç–∞–∫—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –¥—ñ—ó —É Ceph-–∫–ª–∞—Å—Ç–µ—Ä—ñ –ø—ñ—Å–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ü–ª–∞—Ç—Ñ–æ—Ä–º–∏ –Ω–∞ OKD-–∫–ª–∞—Å—Ç–µ—Ä:

[%interactive]
* [ ] ‚ë† –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∑–∞–≥–∞–ª—å–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ scrubbing.
* [ ] ‚ë° –í–∏–º–∫–Ω—ñ—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø—É—Å–∫ deep scrubbing.
* [ ] ‚ë¢ –ù–∞–ª–∞—à—Ç—É–π—Ç–µ —Ä–æ–∑–∫–ª–∞–¥ –∑–≤–∏—á–∞–π–Ω–æ–≥–æ scrubbing.

–î–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å –∫–æ–∂–Ω–æ–≥–æ –ø—É–Ω–∫—Ç—É –Ω–∞–≤–µ–¥–µ–Ω–æ –Ω–∏–∂—á–µ.

[#scrubbing-general-settings]
=== –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞–≥–∞–ª—å–Ω–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ scrubbing

[#scrub-priority]
==== –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—É –ø—Ä–æ—Ü–µ—Å—ñ–≤ scrubbing

–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –ø–æ–Ω–∏–∑–∏—Ç–∏ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç –ø—Ä–æ—Ü–µ—Å—ñ–≤ —Å–∫—Ä–∞–±—É–≤–∞–Ω–Ω—è, –∑–∞–ø—É—â–µ–Ω–∏—Ö –≤—Ä—É—á–Ω—É, –¥–ª—è *–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ–≥–æ –Ω–∞–¥–∞–Ω–Ω—è –ø–µ—Ä–µ–≤–∞–≥–∏ –∑–∞–ø–∏—Ç–∞–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤*. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è `10`.

.–ü–∞—Ä–∞–º–µ—Ç—Ä Requested Scrub Priority
[source,bash]
----
osd_requested_scrub_priority 10
----

–ó–º—ñ–Ω–∏—Ç–∏ —Ü–µ–π –ø–∞—Ä–∞–º–µ—Ç—Ä –º–æ–∂–Ω–∞ —á–µ—Ä–µ–∑ *UI Ceph Dashboard*. –î–ª—è —Ü—å–æ–≥–æ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏:

. –í—ñ–¥–∫—Ä–∏–π—Ç–µ *UI Ceph Dashboard*.
. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ menu:Cluster[OSDs > Cluster-wide configuration].
. –û–±–µ—Ä—ñ—Ç—å *PG scrub* —Ç–∞ —Ä–æ–∑–≥–æ—Ä–Ω—ñ—Ç—å –≤–∫–ª–∞–¥–∫—É *Advanced*.
. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–ª—è *Requested Scrub Priority*.

+
.UI Ceph Dashboard. Requested Scrub Priority
image::admin:file-system/ceph-scrubbing/ceph-scrubbing-1.png[]

–ê–Ω–∞–ª–æ–≥—ñ—á–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–æ–∂–Ω–∞ –≤–∏–∫–æ–Ω–∞—Ç–∏ —á–µ—Ä–µ–∑ *Ceph CLI* –∑ –ø–æ–¥—É `rook-operator` –≤ OKD-–ø—Ä–æ—î–∫—Ç—ñ `openshift-storage`:

.–ü—Ä–∏–∫–ª–∞–¥ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Requested Scrub Priority —á–µ—Ä–µ–∑ CLI
[source,bash]
----
ceph config --conf=/var/lib/rook/openshift-storage/openshift-storage.config set osd osd_requested_scrub_priority 10
----

[#max-concurrent-scrubs]
==== –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤ scrubbing

–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ *–Ω–µ –±—ñ–ª—å—à–µ 1 –ø—Ä–æ—Ü–µ—Å—É scrubbing –æ–¥–Ω–æ—á–∞—Å–Ω–æ –Ω–∞ –∫–æ–∂–Ω–æ–º—É OSD* (Object Storage Daemon). –î–ª—è —Ü—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä `osd_max_scrubs = 1`.

–¶–µ–π –ø–∞—Ä–∞–º–µ—Ç—Ä –≤–∏–∑–Ω–∞—á–∞—î, *—Å–∫—ñ–ª—å–∫–∏ –æ–¥–Ω–æ—á–∞—Å–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤ —Å–∫—Ä–∞–±—É–≤–∞–Ω–Ω—è (scrub)* –º–æ–∂–µ –±—É—Ç–∏ –∑–∞–ø—É—â–µ–Ω–æ *–Ω–∞ –æ–¥–∏–Ω OSD*. –û–±–º–µ–∂–µ–Ω–Ω—è –¥–æ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É –¥–æ–∑–≤–æ–ª—è—î:

* –∑–º–µ–Ω—à–∏—Ç–∏ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ –¥–∏—Å–∫–æ–≤—É –ø—ñ–¥—Å–∏—Å—Ç–µ–º—É —Ç–∞ CPU;
* —É–Ω–∏–∫–Ω—É—Ç–∏ –≤–ø–ª–∏–≤—É –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –æ–±—Ä–æ–±–∫–∏ –∫–ª—ñ—î–Ω—Ç—Å—å–∫–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤;
* –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å —Ä–æ–±–æ—Ç–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ —É –≤–∏—Ä–æ–±–Ω–∏—á–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ.

TIP: *OSD (Object Storage Daemon)* -- —Ü–µ –æ—Å–Ω–æ–≤–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Ceph, —è–∫–∏–π –∑–±–µ—Ä—ñ–≥–∞—î –¥–∞–Ω—ñ, –æ–±—Ä–æ–±–ª—è—î –∑–∞–ø–∏—Ç–∏ —á–∏—Ç–∞–Ω–Ω—è/–∑–∞–ø–∏—Å—É —Ç–∞ –≤–∏–∫–æ–Ω—É—î —Å–∫—Ä–∞–±—É–≤–∞–Ω–Ω—è. –ö–æ–∂–µ–Ω OSD –ø—Ä–∞—Ü—é—î –Ω–µ–∑–∞–ª–µ–∂–Ω–æ, —ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ü—ñ–ª—ñ—Å–Ω–æ—Å—Ç—ñ –¥–∞–Ω–∏—Ö (scrub) -- —Ü–µ –ª–æ–∫–∞–ª—å–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ OSD.

[NOTE]
====
–£ –≤–∏–ø–∞–¥–∫–∞—Ö, –∫–æ–ª–∏ —É –∫–ª–∞—Å—Ç–µ—Ä—ñ –Ω–∞–∫–æ–ø–∏—á–∏–ª–∞—Å—è *–≤–µ–ª–∏–∫–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å PG (Placement Groups)*, –¥–ª—è —è–∫–∏—Ö —Å–∫—Ä–∞–±—É–≤–∞–Ω–Ω—è –¥–∞–≤–Ω–æ –Ω–µ –ø—Ä–æ–≤–æ–¥–∏–ª–æ—Å—å, —ñ —è–∫—ñ —î "–ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–∏–º–∏", –¥–æ–∑–≤–æ–ª—è—î—Ç—å—Å—è *—Ç–∏–º—á–∞—Å–æ–≤–æ –∑–±—ñ–ª—å—à–∏—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä `osd_max_scrubs` –¥–æ `4`*.

–¶–µ –ø—Ä–∏—Å–∫–æ—Ä–∏—Ç—å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è "–ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–æ–≥–æ" —Å–∫—Ä–∞–±—É–≤–∞–Ω–Ω—è, –∞–ª–µ *–º–æ–∂–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –ø—ñ–¥–≤–∏—â–µ–Ω–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è*.

‚ùó–ü—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –æ–±–æ–≤'—è–∑–∫–æ–≤–æ –ø–æ–≤–µ—Ä–Ω—ñ—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–æ –∑–Ω–∞—á–µ–Ω–Ω—è `1`.

‚û°Ô∏è –î–µ—Ç–∞–ª—å–Ω—ñ—à–µ –ø—Ä–æ —Å—Ç–∞—Ç—É—Å–∏ PG –¥–∏–≤. —É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó Ceph: https://docs.ceph.com/en/latest/rados/operations/pg-states/[Placement Group States].
====

–ó–º—ñ–Ω–∏—Ç–∏ —Ü–µ–π –ø–∞—Ä–∞–º–µ—Ç—Ä –º–æ–∂–Ω–∞ —á–µ—Ä–µ–∑ *UI Ceph Dashboard*. –î–ª—è —Ü—å–æ–≥–æ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏:

. –í—ñ–¥–∫—Ä–∏–π—Ç–µ *UI Ceph Dashboard*.
. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ menu:Cluster[OSDs > Cluster-wide configuration].
. –û–±–µ—Ä—ñ—Ç—å *PG scrub* —Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–ª—è *Max Scrubs*.

+
.UI Ceph Dashboard. Max Scrubs
image::admin:file-system/ceph-scrubbing/ceph-scrubbing-2.png[]

–ê–Ω–∞–ª–æ–≥—ñ—á–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–æ–∂–Ω–∞ –≤–∏–∫–æ–Ω–∞—Ç–∏ —á–µ—Ä–µ–∑ *Ceph CLI* –∑ –ø–æ–¥—É `rook-operator` –≤ OKD-–ø—Ä–æ—î–∫—Ç—ñ `openshift-storage`:

.–ü—Ä–∏–∫–ª–∞–¥ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Max Scrubs —á–µ—Ä–µ–∑ CLI
[source,bash]
----
ceph config --conf=/var/lib/rook/openshift-storage/openshift-storage.config set osd osd_max_scrubs 1
----

[#disable-deep-scrub]
=== –í–∏–º–∫–Ω–µ–Ω–Ω—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ deep scrubbing

–£ Ceph –∫–ª–∞—Å—Ç–µ—Ä—ñ –ø—Ä–æ—Ü–µ—Å *deep scrubbing* –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑ –ø–µ—Ä—ñ–æ–¥–∏—á–Ω—ñ—Å—Ç—é, —è–∫–∞ –≤–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è —É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó. –•–æ—á–∞ —Ü—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —î –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤–æ—é –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —Ü—ñ–ª—ñ—Å–Ω–æ—Å—Ç—ñ –¥–∞–Ω–∏—Ö, –≤–æ–Ω–∞ —Ç–∞–∫–æ–∂ —î –∑–Ω–∞—á–Ω–æ –±—ñ–ª—å—à *—Ä–µ—Å—É—Ä—Å–æ–º—ñ—Å—Ç–∫–æ—é*, –Ω—ñ–∂ –∑–≤–∏—á–∞–π–Ω–∏–π scrubbing, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–∏–∫–æ–Ω—É—î –ø–æ–≤–Ω—É –ø–µ—Ä–µ–≤—ñ—Ä–∫—É *–≤–º—ñ—Å—Ç—É –æ–±'—î–∫—Ç—ñ–≤*, –∞ –Ω–µ –ª–∏—à–µ –º–µ—Ç–∞–¥–∞–Ω–∏—Ö.

[CAUTION]
====
–£ –≤–∏—Ä–æ–±–Ω–∏—á–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞—Ö —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –∑–∞–ø—É—Å–∫–∞—Ç–∏ *deep scrubbing* **–≤—Ä—É—á–Ω—É**, —É –≤–∏–∑–Ω–∞—á–µ–Ω—ñ –≤—ñ–∫–Ω–∞ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è –∞–±–æ –ø–µ—Ä—ñ–æ–¥–∏ –Ω–∏–∑—å–∫–æ–≥–æ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏:

- –ø—ñ–∫–æ–≤–∏—Ö –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å –Ω–∞ OSD-–¥–∏—Å–∫–∏;
- –¥–µ–≥—Ä–∞–¥–∞—Ü—ñ—ó –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ —ñ–Ω—à–∏—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤ –ü–ª–∞—Ç—Ñ–æ—Ä–º–∏;
- —Ä–∏–∑–∏–∫—É –≤–ø–ª–∏–≤—É –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω—ñ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó.

–û–∑–Ω–∞–π–æ–º—Ç–µ—Å—è –¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ —ñ–∑ –ø—Ä–æ—Ü–µ—Å–æ–º: xref:file-system/ceph-cluster-maintenance.adoc#manual-deep-scrub[–†—É—á–Ω–∏–π –∑–∞–ø—É—Å–∫ —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å–∞–º–∏ Deep Scrubbing].
====

[#disable-auto-deep-scrub]
==== –Ø–∫ –≤–∏–º–∫–Ω—É—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π deep scrubbing

Ceph –¥–æ–∑–≤–æ–ª—è—î *–±–ª–æ–∫—É–≤–∞—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—É deep scrubbing* –Ω–∞ —Ä—ñ–≤–Ω—ñ –∫–æ–∂–Ω–æ–≥–æ –ø—É–ª—É (pool). –î–ª—è —Ü—å–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ –ø—Ä–∞–ø–æ—Ä—Ü—ñ *`nodeep-scrub`*.

.*–ö—Ä–æ–∫–∏ –¥–ª—è –≤–∏–º–∫–Ω–µ–Ω–Ω—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É:*

. –í–∏–∑–Ω–∞—á—Ç–µ —à–ª—è—Ö –¥–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω–æ–≥–æ —Ñ–∞–π–ª—É `ceph.conf`, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —É –≤–∞—à–æ–º—É –∫–ª–∞—Å—Ç–µ—Ä—ñ (*_—É –ø—Ä–∏–∫–ª–∞–¥—ñ –Ω–∏–∂—á–µ –≤—ñ–Ω –≤–∫–∞–∑–∞–Ω–∏–π —è–≤–Ω–æ_*).
. –í–∏–∫–æ–Ω–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—É –∫–æ–º–∞–Ω–¥—É, —â–æ–± *–¥–æ–¥–∞—Ç–∏ –ø—Ä–∞–ø–æ—Ä–µ—Ü—å `nodeep-scrub` –¥–ª—è –≤—Å—ñ—Ö –ø—É–ª—ñ–≤*:
+
[source,bash]
----
for pool in $(ceph --conf=/var/lib/rook/openshift-storage/openshift-storage.config osd pool ls); do
  ceph --conf=/var/lib/rook/openshift-storage/openshift-storage.config osd pool set "$pool" nodeep-scrub true
done
----
+
TIP: –ö–æ–º–∞–Ω–¥–∞ –ø–µ—Ä–µ–ª—ñ–∫—É –ø—É–ª—ñ–≤ `osd pool ls` –ø–æ–≤–µ—Ä—Ç–∞—î –≤—Å—ñ –Ω–∞—è–≤–Ω—ñ –ø—É–ª–∏ —É –∫–ª–∞—Å—Ç–µ—Ä—ñ. –¶–∏–∫–ª –∑–∞—Å—Ç–æ—Å–æ–≤—É—î –ø—Ä–∞–ø–æ—Ä–µ—Ü—å `nodeep-scrub` –¥–æ –∫–æ–∂–Ω–æ–≥–æ –∑ –Ω–∏—Ö.

[#nodeep-scrub-check]
==== –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø—Ä–∞–ø–æ—Ä–µ—Ü—å

–©–æ–± –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ –ø–∞—Ä–∞–º–µ—Ç—Ä `nodeep-scrub` —É—Å–ø—ñ—à–Ω–æ –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω–æ, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –ø—Ä–∞–ø–æ—Ä—Ü—ñ–≤ (flags) –Ω–∞ –ø—É–ª–∞—Ö:

[source,bash]
----
ceph --conf=/var/lib/rook/openshift-storage/openshift-storage.config osd pool ls detail
----

–£ –≤–∏–≤–æ–¥—ñ —à—É–∫–∞–π—Ç–µ –∫–ª—é—á `flags`, –¥–µ –º–∞—î –±—É—Ç–∏ –≤–∫–∞–∑–∞–Ω–æ `nodeep-scrub`.

[IMPORTANT]
====
‚ùó *–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç–∏ deep scrubbing –≤—Ä—É—á–Ω—É —Ä–µ–≥—É–ª—è—Ä–Ω–æ*, —â–æ–Ω–∞–π–º–µ–Ω—à–µ *—Ä–∞–∑ –Ω–∞ –∫—ñ–ª—å–∫–∞ —Ç–∏–∂–Ω—ñ–≤*, –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ SLA —Ç–∞ –æ–±—Å—è–≥—É –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –¥–∞–Ω–∏—Ö.

–ó–∞–ø—É—Å–∫–∞–π—Ç–µ deep scrubbing —É —Ç—ñ –ø–µ—Ä—ñ–æ–¥–∏, –∫–æ–ª–∏ —É –≤–∞—à–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ *–∫–ª–∞—Å—Ç–µ—Ä –Ω–∞–π–º–µ–Ω—à–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–π* -- –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —É–Ω–æ—á—ñ –≤ –±—É–¥–Ω—ñ –∞–±–æ –Ω–∞ –≤–∏—Ö—ñ–¥–Ω–∏—Ö, —è–∫—â–æ –¥–æ–∑–≤–æ–ª—è—î –≥—Ä–∞—Ñ—ñ–∫.
–§–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ, —è–∫—â–æ –ø—Ä–æ—Ü–µ—Å –Ω–µ –≤–ø–ª–∏–≤–∞—î –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏.

üìå –í–∞–∂–ª–∏–≤–æ -- *–Ω–µ –¥–æ–ø—É—Å–∫–∞—Ç–∏ –Ω–∞–∫–æ–ø–∏—á–µ–Ω–Ω—è —á–µ—Ä–≥–∏ PG*, —è–∫—ñ —Ç—Ä–∏–≤–∞–ª–∏–π —á–∞—Å –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –±–µ–∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏.
–£ –∫–ª–∞—Å—Ç–µ—Ä—ñ –∑ –≤–µ–ª–∏–∫–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é –æ–±'—î–∫—Ç—ñ–≤ —ñ PG –º–æ–∂–µ –∑–Ω–∞–¥–æ–±–∏—Ç–∏—Å—è –∑–∞–ø—É—Å–∫ —â–æ–¥–Ω—è –∑ –æ–±–º–µ–∂–µ–Ω–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤ (`osd_max_scrubs`), —Ç–æ–¥—ñ —è–∫ —É –º–µ–Ω—à –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –æ–¥–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É –Ω–∞ –≤–∏—Ö—ñ–¥–Ω–∏—Ö.
====

[#scrub-schedule]
=== –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ä–æ–∑–∫–ª–∞–¥—É –∑–≤–∏—á–∞–π–Ω–æ–≥–æ scrubbing

–†–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –∑–∞–ø—É—Å–∫–∞—Ç–∏ –∑–≤–∏—á–∞–π–Ω–∏–π scrubbing *—â–æ–Ω–æ—á—ñ*, –∑ 00:00 –¥–æ 06:00 –∑–∞ –∫–∏—ó–≤—Å—å–∫–∏–º —á–∞—Å–æ–º (`UTC+2` –∞–±–æ `UTC+3`), –∑–∞–±–µ–∑–ø–µ—á—É—é—á–∏ –Ω–µ –±—ñ–ª—å—à–µ –æ–¥–Ω–æ–≥–æ –æ–¥–Ω–æ—á–∞—Å–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É —Å–∫—Ä–∞–±—É–≤–∞–Ω–Ω—è –Ω–∞ –∫–æ–∂–µ–Ω OSD (`osd_max_scrubs = 1`). –¢–∞–∫–∏–π —Ä–µ–∂–∏–º –¥–æ–∑–≤–æ–ª—è—î —Ä–µ–≥—É–ª—è—Ä–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ —Ü—ñ–ª—ñ—Å–Ω—ñ—Å—Ç—å –¥–∞–Ω–∏—Ö –±–µ–∑ –∑–Ω–∞—á–Ω–æ–≥–æ –≤–ø–ª–∏–≤—É –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–∞ (_–¥–∏–≤. <<max-concurrent-scrubs>>_).

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –ø—Ä–æ—Ü–µ—Å scrubbing —É–∂–µ —É–≤—ñ–º–∫–Ω–µ–Ω–æ. –î–ª—è –π–æ–≥–æ —Ç–æ—á–Ω–æ–≥–æ –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è –º–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —Ä–æ–∑–∫–ª–∞–¥—É.

[#setup-schedule-ceph-dashboard]
==== –Ø–∫ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Ä–æ–∑–∫–ª–∞–¥ —á–µ—Ä–µ–∑ Ceph Dashboard

. –í—ñ–¥–∫—Ä–∏–π—Ç–µ *UI Ceph Dashboard*.
. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ menu:Cluster[OSDs > Cluster-wide configuration].
. –û–±–µ—Ä—ñ—Ç—å —Ä–æ–∑–¥—ñ–ª *PG scrub* —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤, –≤–∏–∑–Ω–∞—á–µ–Ω–∏—Ö —É —Ç–∞–±–ª–∏—Ü—ñ –Ω–∏–∂—á–µ.
+
TIP: –¶—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –∑–∞–¥–∞—Ç–∏ —Ç–æ—á–Ω–∏–π –ø–µ—Ä—ñ–æ–¥, —É —è–∫–∏–π Ceph –º–∞—î –ø—Ä–∞–≤–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç–∏ –∑–≤–∏—á–∞–π–Ω–∏–π scrubbing. –ó–Ω–∞—á–µ–Ω–Ω—è –≤—Å—Ç–∞–Ω–æ–≤–ª—é—é—Ç—å—Å—è –≤ UTC, —Ç–æ–º—É –ø—Ä–∏ –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—ñ –∑–∞ –ª–æ–∫–∞–ª—å–Ω–∏–º —á–∞—Å–æ–º (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑–∞ –ö–∏—î–≤–æ–º ‚Äî UTC+2) —Å–ª—ñ–¥ –≤—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ –∑–º—ñ—â–µ–Ω–Ω—è.
+

.UI Ceph Dashboard. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ä–æ–∑–∫–ª–∞–¥—É PG scrub
[cols="1,1,3", options="header"]
|===
^| –ü–∞—Ä–∞–º–µ—Ç—Ä ^| –ó–Ω–∞—á–µ–Ω–Ω—è ^| –û–ø–∏—Å

| `osd_scrub_begin_hour` | `22`
| –í–∏–∑–Ω–∞—á–∞—î –≥–æ–¥–∏–Ω—É –ø–æ—á–∞—Ç–∫—É –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ –≤—ñ–∫–Ω–∞ –¥–ª—è scrubbing.

22 –≥–æ–¥–∏–Ω–∞ –∑–∞ UTC = 00:00 –∑–∞ –ö–∏—î–≤–æ–º.
–¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ scrubbing –º–æ–∂–µ –ø–æ—á–∏–Ω–∞—Ç–∏—Å—è –Ω–µ —Ä–∞–Ω—ñ—à–µ –Ω—ñ–∂ –æ–ø—ñ–≤–Ω–æ—á—ñ –∑–∞ –ª–æ–∫–∞–ª—å–Ω–∏–º —á–∞—Å–æ–º.

| `osd_scrub_end_hour` | `4`
| –í–∏–∑–Ω–∞—á–∞—î –≥–æ–¥–∏–Ω—É –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ –≤—ñ–∫–Ω–∞ –¥–ª—è scrubbing.

4 –≥–æ–¥–∏–Ω–∞ –∑–∞ UTC = 06:00 –∑–∞ –ö–∏—î–≤–æ–º.
–£—Å—ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ø—Ä–æ—Ü–µ—Å–∏ scrubbing –±—É–¥—É—Ç—å –∑—É–ø–∏–Ω–µ–Ω—ñ –ø—ñ—Å–ª—è 06:00.

| `osd_scrub_begin_week_day` | `0`
| –í–∏–∑–Ω–∞—á–∞—î –¥–µ–Ω—å —Ç–∏–∂–Ω—è, –∑ —è–∫–æ–≥–æ –¥–æ–∑–≤–æ–ª–µ–Ω–æ –∑–∞–ø—É—Å–∫ scrubbing.

`0` = –Ω–µ–¥—ñ–ª—è (–∑–∞ Ceph-–Ω—É–º–µ—Ä–∞—Ü—ñ—î—é –¥–Ω—ñ–≤ —Ç–∏–∂–Ω—è, –¥–µ `0` = –Ω–µ–¥—ñ–ª—è, `1` = –ø–æ–Ω–µ–¥—ñ–ª–æ–∫, ..., `6` = —Å—É–±–æ—Ç–∞).
–Ø–∫—â–æ `begin` —ñ `end` –º–∞—é—Ç—å –æ–¥–Ω–∞–∫–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è (0), scrubbing –¥–æ–∑–≤–æ–ª–µ–Ω–æ —â–æ–¥–Ω—è.

| `osd_scrub_end_week_day` | `0`
| –í–∏–∑–Ω–∞—á–∞—î –¥–µ–Ω—å —Ç–∏–∂–Ω—è, –¥–æ —è–∫–æ–≥–æ –¥–æ–∑–≤–æ–ª–µ–Ω–æ –∑–∞–ø—É—Å–∫ scrubbing.

–¢–∞–∫–æ–∂ 0 = –Ω–µ–¥—ñ–ª—è.
–Ø–∫—â–æ `begin_week_day = end_week_day = 0`, —Ü–µ –Ω–µ –æ–±–º–µ–∂—É—î –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ª–∏—à–µ –æ–¥–Ω–∏–º –¥–Ω–µ–º, –∞ –Ω–∞–≤–ø–∞–∫–∏ -- –æ–∑–Ω–∞—á–∞—î, —â–æ scrubbing –¥–æ–∑–≤–æ–ª–µ–Ω–æ –∫–æ–∂–Ω–æ–≥–æ –¥–Ω—è —Ç–∏–∂–Ω—è.
|===
+
[TIP]
====
üìå *–Ø–∫ –ø—Ä–∞—Ü—é—î –ª–æ–≥—ñ–∫–∞ –¥–Ω—ñ–≤ —Ç–∏–∂–Ω—è –≤ Ceph?*

–ü–∞—Ä–∞ `begin_week_day = 0`, `end_week_day = 0` –æ–∑–Ω–∞—á–∞—î "–≤—ñ–¥ –Ω–µ–¥—ñ–ª—ñ –¥–æ –Ω–µ–¥—ñ–ª—ñ –≤–∫–ª—é—á–Ω–æ", —Ç–æ–±—Ç–æ —É—Å—ñ –¥–Ω—ñ —Ç–∏–∂–Ω—è –¥–æ–∑–≤–æ–ª–µ–Ω—ñ.

–Ø–∫—â–æ –∂ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `begin_week_day = 1` (–ø–æ–Ω–µ–¥—ñ–ª–æ–∫), –∞ `end_week_day = 5` (–ø'—è—Ç–Ω–∏—Ü—è), —Ç–æ scrubbing –±—É–¥–µ –∑–∞–ø—É—Å–∫–∞—Ç–∏—Å—è –ª–∏—à–µ –∑ –ø–æ–Ω–µ–¥—ñ–ª–∫–∞ –ø–æ –ø'—è—Ç–Ω–∏—Ü—é.
====

+
. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å *Edit PG scrub options*, —â–æ–± –∑–±–µ—Ä–µ–≥—Ç–∏ –∑–º—ñ–Ω–∏.

+
.UI Ceph Dashboard. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ä–æ–∑–∫–ª–∞–¥—É PG scrub
image::admin:file-system/ceph-scrubbing/ceph-scrubbing-3.png[]

[#setup-schedule-ceph-cli]
==== –Ø–∫ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Ä–æ–∑–∫–ª–∞–¥ —á–µ—Ä–µ–∑ Ceph CLI

–ê–Ω–∞–ª–æ–≥—ñ—á–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏ —á–µ—Ä–µ–∑ Ceph CLI. –î–ª—è —Ü—å–æ–≥–æ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –Ω–∞–≤–µ–¥–µ–Ω—ñ –Ω–∏–∂—á–µ –∫–æ–º–∞–Ω–¥–∏ –∑ –ø–æ–¥—É `rook-operator` –≤ OKD-–ø—Ä–æ—î–∫—Ç—ñ `openshift-storage`.

. –í–∫–∞–∂—ñ—Ç—å —á–∞—Å –ø–æ—á–∞—Ç–∫—É —ñ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è scrubbing (UTC).
+
[source,bash]
----
ceph config set osd --conf=/var/lib/rook/openshift-storage/openshift-storage.config osd_scrub_begin_hour 22

ceph config set osd --conf=/var/lib/rook/openshift-storage/openshift-storage.config osd_scrub_end_hour 4
----

. –í–∫–∞–∂—ñ—Ç—å –¥–Ω—ñ —Ç–∏–∂–Ω—è (0 = –Ω–µ–¥—ñ–ª—è; –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –∑–∞–ø—É—Å–∫ —â–æ–¥–Ω—è).
+
----
ceph config set osd --conf=/var/lib/rook/openshift-storage/openshift-storage.config osd_scrub_begin_week_day 0

ceph config set osd --conf=/var/lib/rook/openshift-storage/openshift-storage.config osd_scrub_end_week_day 0
----

. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–æ–º–∞–Ω–¥–∏ (–∑–∞–º—ñ–Ω—ñ—Ç—å `<–ø–∞—Ä–∞–º–µ—Ç—Ä>` –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º):
+
[source,bash]
----
ceph config get osd --conf=/var/lib/rook/openshift-storage/openshift-storage.config <–ø–∞—Ä–∞–º–µ—Ç—Ä>
----
+
.–ü—Ä–∏–∫–ª–∞–¥ –¥–ª—è osd_scrub_begin_hour
[source,bash]
----
ceph config get osd --conf=/var/lib/rook/openshift-storage/openshift-storage.config osd_scrub_begin_hour
----

[#related-pages]
== –ü–æ–≤'—è–∑–∞–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏

* xref:file-system/ceph-cluster-maintenance.adoc[]
* xref:file-system/ceph-osd-scaling-and-rebalancing.adoc[]
