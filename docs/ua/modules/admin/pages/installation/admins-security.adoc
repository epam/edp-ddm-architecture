= Безпечне налаштування адміністративних акаунтів

== Політика паролів

=== Загальна інформація

Вимоги до політики паролів базуються на OWASP ASVS 2.1 Password Security та NIST Special Publication 800-63: Digital Identity Guidelines задля забезпечення безпеки адміністративних користувачів. Приведені налаштування є рекомендацією, а не нормативною вимогою.

=== Кроки налаштування

1. Вхід в Адміністративну Консоль Keycloak
- Відкрийте адміністративну консоль Keycloak.
- Увійдіть за допомогою облікових даних адміністратора.
2. Вибір Realm
- Виберіть openshift realm, для якого буде налаштована політика паролів. 
3. Налаштування Політики Паролів
- У меню зліва виберіть "Authentication".
- Перейдіть до вкладки "Password Policy".
4. Конфігурація Політик
- Натисніть на "Add policy" для додавання нової політики.
- Виберіть потрібні вам опції, такі як:

*Мінімальна довжина:* Налаштування мінімальної довжини пароля в 12 символів. +
*Максимальна довжина:* Keycloak підтримує паролі довжиною 64 символи або більше за замовчуванням. +
*Дозвіл на пробіли в паролях:* Keycloak дозволяє використовувати пробіли у паролях та не обрізає їх за замовчуванням. +
*Підтримка символів Unicode:* Використання символів Unicode у паролях підтримується за замовчуванням. +
*Відсутність обмежень на склад пароля:* Не створюйте політик, які обмежують типи символів у паролі.

== Налаштування чорного списку паролів

CAUTION: Інструкція знаходиться у розробоці

== Двохфакторна автентифікація

1. Вхід в Адміністративну Консоль Keycloak
- Відкрийте адміністративну консоль Keycloak.
- Увійдіть за допомогою облікових даних адміністратора.
2. Вибір Realm
- Виберіть openshift realm, для якого буде налаштована політика паролів. 
3. Налаштування двохфакторної автентифікації
- У меню зліва виберіть "Authentication".
- Перейдіть у вкладку "Flows"
- Навпроти "Browser - Conditional OTP " поставте перемикач у положення "REQUIRED"
4. При наступному вході адміністративному користувачеві буде запропоновано налаштувати двухфакторну автентифікацію

== Захист від підбору паролів

1. Вхід в Адміністративну Консоль Keycloak
- Відкрийте адміністративну консоль Keycloak.
- Увійдіть за допомогою облікових даних адміністратора.
2. Вибір Realm
- Виберіть openshift realm, для якого буде налаштована політика паролів. 
3. Налаштування Політики Паролів
- У меню зліва виберіть "Realm Settings".
- Перейдіть до вкладки "Security Defenses".
- Нище перейдіть до вкладки "Brute Force Detection"
- Увімкніть перекмиках
4. Конфігурація параметрів +
*Постійне Блокування (Permanent Lockout):* Не рекомендується включати постійне блокування, оскільки це може призвести до відмови у обслуговуванні та незручностей для користувачів. +
*Максимальна Кількість Невдалих Спроб Входу (Max Login Failures):* 5 спроб +
*Збільшення Часу Очікування (Wait Increment):* 300 секунд +
Це часовий період, що додається до часу блокування після кожної невдалої спроби входу після досягнення порога максимальної кількості невдалих спроб. +
*Швидка Перевірка Входу (Quick Login Check):* Рекомендоване значення 1000 мілісекунд (1 секунда) +
Це мінімальний час між спробами входу. Установка його на 1 секунду може запобігти швидким автоматизованим атакам, не впливаючи значно на користувацький досвід. +
*Мінімальний Час Швидкого Входу (Minimum Quick Login Wait):* 2 хвилини +
Це мінімальний час очікування для спроби входу після невдачі. +
*Максимальний Час Очікування (Max Wait):* 30 хвилин +
Це максимальний час, протягом якого користувач буде заблокований після повторних невдач. +
*Час Скидання Невдач (Failure Reset Time):* 12 годин +
Це час, після якого кількість невдач для користувача скидається, якщо не було невдач. +

