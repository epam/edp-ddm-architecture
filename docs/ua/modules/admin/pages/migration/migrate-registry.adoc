= –ú—ñ–≥—Ä–∞—Ü—ñ—è —Ä–µ—î—Å—Ç—Ä—ñ–≤
include::platform:ROOT:partial$templates/document-attributes/default-set-ua.adoc[]

include::platform:ROOT:partial$admonitions/language-ua.adoc[]

–¶—è —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –Ω–∞–¥–∞—î –ø—Ä–∞–∫—Ç–∏—á–Ω–µ –∫–µ—Ä—ñ–≤–Ω–∏—Ü—Ç–≤–æ –∑ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ—ó –º—ñ–∂ OKD –∫–ª–∞—Å—Ç–µ—Ä–∞–º–∏ A —Ç–∞ B.

== –ü–æ–∑–Ω–∞—á–µ–Ω–Ω—è —Ç–∞ —Å–∫–æ—Ä–æ—á–µ–Ω–Ω—è

* [.underline]#–ö–ª–∞—Å—Ç–µ—Ä –ê# -- –∫–ª–∞—Å—Ç–µ—Ä, –Ω–∞ —è–∫–æ–º—É —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–æ –Ω–∞—è–≤–Ω–∏–π —Ä–µ—î—Å—Ç—Ä.
* [.underline]#–ö–ª–∞—Å—Ç–µ—Ä B# -- –∫–ª–∞—Å—Ç–µ—Ä, –∫—É–¥–∏ –±—É–¥–µ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –Ω–∞—è–≤–Ω–∏–π —Ä–µ—î—Å—Ç—Ä (—Ü—ñ–ª—å–æ–≤–∏–π –∫–ª–∞—Å—Ç–µ—Ä).

NOTE: –ú—ñ–≥—Ä–∞—Ü—ñ—è —Ä–µ—î—Å—Ç—Ä—É –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –∑ –æ—Å—Ç–∞–Ω–Ω—å–æ—ó —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó –Ω–∞—è–≤–Ω–æ–≥–æ —Ä–µ—î—Å—Ç—Ä—É —Ç–∞, –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó, –±—É–¥–µ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç–∏—Å—è —ñ–∑ –∫–ª–∞—Å—Ç–µ—Ä–∞ –ê –¥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ B –π –≤—ñ–¥–Ω–æ–≤–ª—é–≤–∞—Ç–∏—Å—è –≤–∂–µ –Ω–∞ —Ü—å–æ–º—É –∫–ª–∞—Å—Ç–µ—Ä—ñ.

== –ü–µ—Ä–µ–¥—É–º–æ–≤–∏ –¥–ª—è –º—ñ–≥—Ä–∞—Ü—ñ—ó

[NOTE]
====
üìå –ü—Ä–∏–º—ñ—Ç–∫–∞ –¥–æ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó –º—ñ–≥—Ä–∞—Ü—ñ—ó::

. _–ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è_: –≤–∞–∂–ª–∏–≤–æ —Ä–æ–∑—Ä–æ–±–∏—Ç–∏ —á—ñ—Ç–∫–∏–π –≥—Ä–∞—Ñ—ñ–∫ –º—ñ–≥—Ä–∞—Ü—ñ—ó. –í—ñ–Ω –º–∞—î –≤–∫–ª—é—á–∞—Ç–∏:

* –î–∞—Ç—É —Ç–∞ —á–∞—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–µ–∫–∞–ø—É.
* –ß–∞—Å –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è.
* –í–∏–∑–Ω–∞—á–µ–Ω–∏–π —á–∞—Å –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏ –Ω–∞–¥–∞–≤–∞—á—ñ–≤ –ø–æ—Å–ª—É–≥ –ø–µ—Ä–µ–¥ –±–µ–∫–∞–ø–æ–º.

. _–ö–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è_: –≤–∞–∂–ª–∏–≤–æ –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏, —â–æ–± —É—Å—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ-–Ω–∞–¥–∞–≤–∞—á—ñ –ø–æ—Å–ª—É–≥ –±—É–ª–∏ –≤—á–∞—Å–Ω–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—ñ:

* –°–ø–æ–≤—ñ—â–∞–π—Ç–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ–π–Ω–∏—Ö –∫–∞–Ω–∞–ª—ñ–≤ –ø–æ–∑–∞ –º–µ–∂–∞–º–∏ –ü–ª–∞—Ç—Ñ–æ—Ä–º–∏.
* –í–∫–∞–∂—ñ—Ç—å —ó–º –ø—Ä–æ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ—Å—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏ –¥–æ –≤–∏–∑–Ω–∞—á–µ–Ω–æ–≥–æ —É –≥—Ä–∞—Ñ—ñ–∫—É —á–∞—Å—É.

–î–æ—Ç—Ä–∏–º—É—é—á–∏—Å—å —Ü–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π, –≤–∏ –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–µ –ø–ª–∞–≤–Ω–∏–π –ø—Ä–æ—Ü–µ—Å –º—ñ–≥—Ä–∞—Ü—ñ—ó –±–µ–∑ –Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω–∏—Ö –∑–∞—Ç—Ä–∏–º–æ–∫ —Ç–∞ –Ω–µ–∑—Ä—É—á–Ω–æ—Å—Ç–µ–π –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.
====

. –ü—Ä–æ—Ü–µ—Å –º—ñ–≥—Ä–∞—Ü—ñ—ó –≤–∫–ª—é—á–∞—î –∑–∞–ø—É—Å–∫ bash-—Å–∫—Ä–∏–ø—Ç—É, —â–æ –∑–¥—ñ–π—Å–Ω—é—î –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ –∫–ª–∞—Å—Ç–µ—Ä–∞ –ê –¥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ B. –î–ª—è —É—Å–ø—ñ—à–Ω–æ—ó –º—ñ–≥—Ä–∞—Ü—ñ—ó, —Ü–µ–π —Å–∫—Ä–∏–ø—Ç –º–∞—î –±—É—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–∏–π –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ñ Linux –∑ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–æ—é –º—ñ–∫—Ä–æ–ø—Ä–æ—Ü–µ—Å–æ—Ä–∞ `x86-64` (–≤—ñ–¥–æ–º–æ—é —Ç–∞–∫–æ–∂ —è–∫ `AMD64`, Intel 64, —á–∏ `x64`)
. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á, —è–∫–∏–π –±—É–¥–µ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç–∏ —Ä–µ—î—Å—Ç—Ä –Ω–∞ —ñ–Ω—à–∏–π –∫–ª–∞—Å—Ç–µ—Ä, –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –¥–æ–¥–∞–Ω–∏–π –¥–æ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤ –ü–ª–∞—Ç—Ñ–æ—Ä–º–∏ –Ω–∞ –æ–±–æ—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞—Ö —á–µ—Ä–µ–∑ *`control-plane-console`*.
+
TIP: –î–∏–≤. –¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ -- xref:admin:registry-management/control-plane-assign-platform-admins.adoc#add-platform-admin-cp[–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏].
. –ù–∞ –∫–ª–∞—Å—Ç–µ—Ä—ñ, –Ω–∞ —è–∫–∏–π –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å—Å—è —Ä–µ—î—Å—Ç—Ä, –ø–æ–≤–∏–Ω–Ω–∞ –±—É—Ç–∏ —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∞ —Ç–∞ –≤–µ—Ä—Å—ñ—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏, —É —è–∫–æ—ó –≤–µ—Ä—Å—ñ—è `control-plane-gerrit` –±—É–¥–µ –¥–æ—Ä—ñ–≤–Ω—é–≤–∞—Ç–∏ –≤–µ—Ä—Å—ñ—ó —Å–∞–º–æ–≥–æ —Ä–µ—î—Å—Ç—Ä—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–µ—Ä—Å—ñ—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏ -- *`1.9.4.11`*, –≤–µ—Ä—Å—ñ—è —Ä–µ—î—Å—Ç—Ä—É -- *`1.9.4.7`*, –≤–µ—Ä—Å—ñ—è `control-plane-gerrit` ‚Äì *`1.9.4.7`*). –¶—é –≤–µ—Ä—Å—ñ—é –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞—è–≤–Ω—ñ—Å—Ç—é –≥—ñ–ª–∫–∏ —É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó *`cluster-mgmt`* –≤ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–º—É *Gerrit*. –Ø–∫—â–æ –≥—ñ–ª–∫–∞ –∑ –≤–µ—Ä—Å—ñ—î—é —Ä–µ—î—Å—Ç—Ä—É —ñ—Å–Ω—É—î, —Ç–æ –≤–µ—Ä—Å—ñ—é —Ä–µ—î—Å—Ç—Ä—É –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç–∏ –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä B. –Ø–∫—â–æ –Ω—ñ, —Ç–æ —ñ—Å–Ω—É—î –¥–≤–∞ —à–ª—è—Ö–∏:

* –û–Ω–æ–≤–∏—Ç–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä—ñ B, —è–∫–∞ –±—É–¥–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –≤–µ—Ä—Å—ñ—ó —Å–∞–º–æ–≥–æ —Ä–µ—î—Å—Ç—Ä—É.
* –û–Ω–æ–≤–∏—Ç–∏ —Ä–µ—î—Å—Ç—Ä –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä—ñ A –¥–æ –≤–µ—Ä—Å—ñ—ó, —è–∫–∞ –≤–∂–µ —ñ—Å–Ω—É—î –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä—ñ B.

. –û–¥–Ω–æ—á–∞—Å–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ –ê —Ç–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞ B.

. –ù–∞—è–≤–Ω—ñ—Å—Ç—å –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –∫–æ–º–∞–Ω–¥ –≤ Terminal:

* `oc`
* `velero`
* `rclone`
* `vault`

. –°—Ç–∞–±—ñ–ª—å–Ω–µ –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º. _–ß–∏–º –±—ñ–ª—å—à–∞ –ø—Ä–æ–ø—É—Å–∫–Ω–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å, —Ç–∏–º —à–≤–∏–¥—à–µ –±—É–¥–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—è_. –í —ñ–Ω—à–æ–º—É –≤–∏–ø–∞–¥–∫—É, –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ *jumpbox* (—ñ–∑ –¥–æ—Å—Ç—É–ø–æ–º –¥–æ –æ–±–æ—Ö –∫–ª–∞—Å—Ç–µ—Ä—ñ–≤), —è–∫–∏–π –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –∞–±–æ –≤ AWS, –∞–±–æ –≤ —ñ–Ω—à–æ–≥–æ cloud-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è jumpbox –∑–º–µ–Ω—à–∏—Ç—å —á–∞—Å –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—è —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó –∑ –æ–¥–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ –Ω–∞ —ñ–Ω—à–∏–π.
+
[NOTE]
====
–Ø–∫—â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ *jumpbox*, —Ç–æ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–Ω–∏—Ö Minio/Vault –∑ IP-–∞–¥—Ä–µ—Å–∏ *jumpbox*. –î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è IP *jumpbox* –≤–∏–∫–æ–Ω–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—É –∫–æ–º–∞–Ω–¥—É:
----
ssh sshmyip.com
----

–î–∞–ª—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –∞–±–æ –¥–æ–¥–∞—Ç–∏ IP-–∞–¥—Ä–µ—Å—É *jumpbox* –¥–æ –ø–µ—Ä–µ–ª—ñ–∫—É –¥–æ–∑–≤–æ–ª–µ–Ω–Ω–∏—Ö CIDR –Ω–∞ —Ä—ñ–≤–Ω—ñ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ—é –¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä–∞ –ê —Ç–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞ B ( _–¥–∏–≤. –¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ xref:admin:registry-management/control-plane-cidr-access-endpoints.adoc[]_).

–Ø–∫—â–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ–π –¥–æ—Å—Ç—É–ø –¥–æ control-plane-console, –∑–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ L2-–∫–æ–º–∞–Ω–¥–∏ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø—É.
====
+
[IMPORTANT]
====
–ü—Ä–∏ –º—ñ–≥—Ä–∞—Ü—ñ—ó —Ä–µ—î—Å—Ç—Ä—É, –≤–∞–∂–ª–∏–≤–æ —â–æ–± –ø–µ—Ä–µ–¥ –ø–æ—á–∞—Ç–∫–æ–º –º—ñ–≥—Ä–∞—Ü—ñ—ó, –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä—ñ B –Ω–µ –±—É–ª–æ —Ä–µ—Å—É—Ä—Å—ñ–≤ –ø–æ–≤'—è–∑–∞–Ω–∏—Ö —ñ–∑ —Ä–µ—î—Å—Ç—Ä–æ–º.

_–Ø–∫—â–æ —Ä–∞–Ω—ñ—à–µ —Ä–µ—î—Å—Ç—Ä –Ω–µ —ñ—Å–Ω—É–≤–∞–≤ –Ω–∞ —Ü—å–æ–º—É –∫–ª–∞—Å—Ç–µ—Ä—ñ, —Ç–æ –ø–æ–¥–∞–ª—å—à—ñ –¥—ñ—ó –º–æ–∂–Ω–∞ –Ω–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏._

–Ø–∫—â–æ —Ä–µ—î—Å—Ç—Ä —ñ—Å–Ω—É–≤–∞–≤, —Ç–æ –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è —É—Å—ñ—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏/–≤–∏–¥–∞–ª–∏—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω–µ: ::
* –í–∏–¥–∞–ª—ñ—Ç—å —Ä–µ—î—Å—Ç—Ä —á–µ—Ä–µ–∑ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ—ó –ø–∞–Ω–µ–ª—ñ Control Plane.
+
TIP: –î–µ—Ç–∞–ª—å–Ω—ñ—à–µ –ø—Ä–æ —Ü–µ –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ xref:registry-management/control-plane-remove-registry.adoc[].
+
////
–ü–µ—Ä–µ–π—Ç–∏ –≤ control-plane-console –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä—ñ B (Openshift-–∫–æ–Ω—Å–æ–ª—å > Projects > control-plane > Networking > control-plane-console), –ø—Ä–æ–π—Ç–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é —á–µ—Ä–µ–∑ openshift-sso, –ø–µ—Ä–µ–π—Ç–∏ –≤ –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª - –†–µ—î—Å—Ç—Ä–∏, —Ç–∞ –Ω–∞—Ç–∏—Å–Ω—É—Ç–∏ –Ω–∞ –∫–æ—à–∏–∫ –Ω–∞–≤–ø—Ä–æ—Ç–∏ –Ω–∞–∑–≤–∏ —Ä–µ—î—Å—Ç—Ä—É, –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –∑–º—ñ–Ω–∏ —Ç–∞ –¥–æ—á–µ–∫–∞—Ç–∏—Å—å –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ä–µ—î—Å—Ç—Ä—É
////

* –ü—ñ–¥—Ç–≤–µ—Ä–¥—å—Ç–µ –∑–º—ñ–Ω–∏ —Ç–∞ –¥–æ—á–µ–∫–∞—Ç–∏—Å—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ä–µ—î—Å—Ç—Ä—É.

* –ü—ñ—Å–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –ø—Ä–æ—î–∫—Ç—É —É —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ Gerrit.

** –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ Gerrit (*Openshift*-–∫–æ–Ω—Å–æ–ª—å > *Projects* > *`control-plane`* > *Networking* > *Routes* > *`control-plane-gerrit`* ).
** –ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫—É–π—Ç–µ—Å—è —á–µ—Ä–µ–∑ *openshift-sso*, –≤—ñ–¥–∫—Ä–∏–π—Ç–µ –º–µ–Ω—é *Browse* > *Repositories* —Ç–∞ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –ø–æ—à—É–∫ –∑–∞ –Ω–∞–∑–≤–æ—é —Ä–µ—î—Å—Ç—Ä—É.
** –Ø–∫—â–æ –ø–æ—à—É–∫ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π, —Ç–æ –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ *Openshift*-–∫–æ–Ω—Å–æ–ª—å > *Projects* > *`control-plane`* > *Home* > *API Explorer* > —É –ø–æ—à—É–∫—É ( `Filter by kind ...` ) –∑–Ω–∞–π–¥—ñ—Ç—å `gerritproject` > `<–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É>` > *Actions* > *`Delete GerritProject`*.
** –ü—ñ—Å–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è Gerrit-–ø—Ä–æ—î–∫—Ç—É, –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ Gerrit-–∫–æ–Ω—Å–æ–ª—ñ —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –≤—ñ–¥—Å—É—Ç–Ω—ñ–π. –Ø–∫—â–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π —ñ—Å–Ω—É—î, –≤–∏–¥–∞–ª—ñ—Ç—å –π–æ–≥–æ —á–µ—Ä–µ–∑ Gerrit-–∫–æ–Ω—Å–æ–ª—å ( –≤—ñ–¥–∫—Ä–∏–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π —Ä–µ—î—Å—Ç—Ä—É > *Commands* > *Delete project*).

* –í–∏–¥–∞–ª—ñ—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –≤ Minio.

** –î–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å—Ç–≤–æ—Ä–µ–Ω–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π –≤ Minio, –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ *MinioUI* (–¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä—ñ–≤ vSphere —Ü–µ–π Route –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ –≤ *OpenShift*-–∫–æ–Ω—Å–æ–ª—ñ > *Projects* > *`control-plane`* > *Networking* > *Routes* > *`platform-minio-ui`*.

** –£ –≤–∏–ø–∞–¥–∫—É –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ Route, –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ —Å–µ–∫—Ä–µ—Ç—ñ–≤ –∑–∞ —à–ª—è—Ö–æ–º: +
*Openshift*-–∫–æ–Ω—Å–æ–ª—å > *Project* > *`control-plane`* > *Workloads* > *Secrets* > *`backup-credentials`*, —Å–∫–æ–ø—ñ—é–π—Ç–µ –ø–æ–ª–µ `backup-s3-like-storage-url` —Ç–∞ –¥–æ–¥–∞–π—Ç–µ –¥–æ URL –ø–æ—Ä—Ç (–ù–∞–ø—Ä–∏–∫–ª–∞–¥, `https://endpoint.com:9001` ).
+
TIP: –î–∞–Ω—ñ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –≤ Minio –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è –≤ *Openshift*-–∫–æ–Ω—Å–æ–ª—ñ > *Project* > *`control-plane`* > *Secrets* > *`backup-credentials`*, –¥–µ *`username`* -- —Ü–µ –ø–æ–ª–µ *`backup-s3-like-storage-access-key-id`*, –∞ `*password*` --   *`backup-s3-like-storage-secret-access-key`*.

** –ü—ñ—Å–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ/–≤–∏–¥–∞–ª—ñ—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó, –ø–æ–≤'—è–∑–∞–Ω—ñ —É —Ä–µ—î—Å—Ç—Ä—ñ –≤ –±–∞–∫–µ—Ç—ñ. –¢–∞–∫–∏–º–∏ —î:
*** _openshift-backups/backups/<–Ω–∞–∑–≤–∞-—Ä–µ—î—Å—Ç—Ä—É>*_;
*** _openshift-backups/restic/<–Ω–∞–∑–≤–∞-—Ä–µ—î—Å—Ç—Ä—É>_;
*** _obc-backups/<–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É>_.

====

== –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ä–µ—î—Å—Ç—Ä—É –¥–æ –º—ñ–≥—Ä–∞—Ü—ñ—ó

[IMPORTANT,caption=–ü–µ—Ä–µ–¥ –ø–æ—á–∞—Ç–∫–æ–º –º—ñ–≥—Ä–∞—Ü—ñ—ó]
–ü–µ—Ä–µ–¥ –ø–æ—á–∞—Ç–∫–æ–º –º—ñ–≥—Ä–∞—Ü—ñ—ó –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –ø–æ–≤–Ω—ñ—Å—Ç—é –æ–±–º–µ–∂–∏—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–ª—è –∫—ñ–Ω—Ü–µ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –¥–æ —Ü—å–æ–≥–æ —Ä–µ—î—Å—Ç—Ä—É.

. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É –∫–æ–ø—ñ—é —Ä–µ—î—Å—Ç—Ä—É –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä—ñ A.
+
–ü–µ—Ä–µ–¥ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—è–º —Ä–µ—î—Å—Ç—Ä—É –Ω–∞ –Ω–æ–≤–∏–π –∫–ª–∞—Å—Ç–µ—Ä, –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ Jenkins-–ø—Ä–æ—Ü–µ—Å *`Create-registry-backup-<–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É>`*.
+
–Ø–∫—â–æ Jenkins pipeline –∑–∞–≤–µ—Ä—à–∏–≤—Å—è –∑—ñ —Å—Ç–∞—Ç—É—Å–æ–º *`Success`*, —Ç–æ —Ä–µ–∑–µ—Ä–≤–Ω–∞ –∫–æ–ø—ñ—è –≤–∏–∫–æ–Ω–∞–Ω–∞ —É—Å–ø—ñ—à–Ω–æ.
+
[NOTE]
====
–î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–∞–∑–≤–∏ —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó, –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ –ª–æ–≥—ñ–≤/–∂—É—Ä–Ω–∞–ª—ñ–≤ –ø–æ–¥—ñ–π –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –∑–∞–ø—É—Å–∫—É Jenkins pipeline (*Console Output*), —Ç–∞ –∑–∞ –ø–æ—à—É–∫–æ–º –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –∑–Ω–∞–π–¥—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–∞–∫—à—Ç–∞–ª—Ç:

----
[INFO] Velero backup - <–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É>-<—á–∞—Å> done with Completed status
----

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, —Ç–∞–∫–µ:

----
[INFO] Velero backup - abc-02-2023-04-18-19-03-14 done with Completed status
----

* –¥–µ *`abc-02-2023-04-18-19-03-14`* -- –Ω–∞–∑–≤–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó.

====
+
[WARNING]
====
–î–ª—è –≤–µ—Ä—Å—ñ–π —Ä–µ—î—Å—Ç—Ä—É < 1.9.3 –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –≤–∏–∫–æ–Ω–∞—Ç–∏ —É Terminal –Ω–∞—Å—Ç—É–ø–Ω—É –∫–æ–º–∞–Ω–¥—É:

----
velero backup describe <–Ω–∞–∑–≤–∞ –±–µ–∫–∞–ø—É>
----

–ù–∞–∑–≤—É –±–µ–∫–∞–ø—É –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ –≤ –ª–æ–≥–∞—Ö –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –∑–∞–ø—É—Å–∫—É Jenkins-–ø—Ä–æ—Ü–µ—Å—É *`Create-registry-backup-<–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É>`*.
====
+
[TIP]
====
–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ –ø—Ä–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–µ–∑–µ—Ä–≤–Ω–∏—Ö –∫–æ–ø—ñ–π —Ç–∞ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä–µ—î—Å—Ç—Ä—ñ–≤ –¥–∏–≤. —É —Ä–æ–∑–¥—ñ–ª—ñ xref:backup-restore/overview.adoc[].
====

. –Ø–∫—â–æ –æ—Å—Ç–∞–Ω–Ω—ñ–π velero backup –∑–∞–≤–µ—Ä—à–∏–≤—Å—è –∑—ñ —Å—Ç–∞—Ç—É—Å–æ–º *`Completed`*, —Ç–æ –º–æ–∂–Ω–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–∏ –¥–∞–ª—ñ. –£ –≤–∏–ø–∞–¥–∫—É, –∫–æ–ª–∏ —Å—Ç–∞—Ç—É—Å velero backup –≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç—å—Å—è –≤—ñ–¥ `Completed`, –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –¥–æ–ª—É—á–∞—Ç–∏ —Å–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç—ñ–≤ —ñ–∑ —Ç–µ—Ö–Ω—ñ—á–Ω–æ—ó –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ L2-L3 –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø—Ä–∞—Ü–µ–∑–¥–∞—Ç–Ω–æ—Å—Ç—ñ Jenkins-–ø–∞–π–ø–ª–∞–π–Ω—É.

. –û—Ç—Ä–∏–º–∞–π—Ç–µ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ –¥–∞–Ω—ñ —É –±–µ–∫–∞–ø–∞—Ö –±–∞–∫–µ—Ç—ñ–≤ —Ä–µ—î—Å—Ç—Ä—É, —â–æ –º—ñ–≥—Ä—É—î—Ç—å—Å—è.

.. –î–ª—è –ø–æ—á–∞—Ç–∫—É, –æ—Ç—Ä–∏–º–∞–π—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω—ñ –±–µ–∫–∞–ø–∏ S3-–±–∞–∫–µ—Ç—ñ–≤ —Ä–µ—î—Å—Ç—Ä—É –≤ –ø—Ä–æ—î–∫—Ç—ñ `velero`. –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ä–æ–∑–¥—ñ–ª *Workloads*, –ø–æ—Ç—ñ–º –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ *CronJobs*. –¢—É—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –ø–æ—à—É–∫–æ–≤—É –ø–∞–Ω–µ–ª—å –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –±–∞–∫–µ—Ç—ñ–≤ –∑–∞ –Ω–∞–∑–≤–æ—é —Ä–µ—î—Å—Ç—Ä—É, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `migrationreg`.
+
.CronJobs
image::admin:migrate-registry/migrate-registry-01.png[]

.. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –∫–æ–∂–Ω—É *CronJob* —ñ –∑–º—ñ–Ω—ñ—Ç—å —á–∞—Å —ó—ó –∑–∞–ø—É—Å–∫—É –Ω–∞ –Ω–∞–π–±–ª–∏–∂—á–∏–π –º–æ–∂–ª–∏–≤–∏–π, —Ç–∞ –¥–æ–¥–∞–π—Ç–µ  `value` –¥–ª—è –∑–º—ñ–Ω–Ω–æ—ó –æ—Ç–æ—á–µ–Ω–Ω—è `MAX_AGE`. –î–ª—è –ø—Ä–∏–∫–ª–∞–¥—É, –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ 10-15 —Ö–≤–∏–ª–∏–Ω. –©–æ–± —Ü–µ –∑—Ä–æ–±–∏—Ç–∏, –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –∫–æ–∂–Ω–æ—ó CronJob, –≤—ñ–¥–∫—Ä–∏–π—Ç–µ —ó—ó *YAML*-–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é —ñ –∑–º—ñ–Ω—ñ—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `spec.schedule`. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è –∑–∞–ø—É—Å–∫—É CronJob —â–æ–¥–Ω—è –æ 10:50 –∑–∞ UTC, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é:
+
.CronJob details. YAML-–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
[source,yaml]
----
spec:
  schedule: 50 10 * * *
----
+
[CAUTION]
====
–ü—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑ `cron`, —á–∞—Å –≤–∫–∞–∑—É—î—Ç—å—Å—è –∑–∞ https://time.is/UTC[UTC].
====
+
.CronJob details. Schedule
image::admin:migrate-registry/migrate-registry-02.png[]
+
–î–ª—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó `MAX_AGE` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é:
+
[source,yaml]
----
spec:
  ...
  jobTemplate:
    ...
    spec:
      template:
        ...
        spec:
          ...
          containers:
            ...
            env:
            - name: MAX_AGE
              value: '2y'
----

.. –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –¥–æ—á–µ–∫–∞–π—Ç–µ—Å—è –∑–∞–ø—É—Å–∫—É —ñ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —É—Å—ñ—Ö CronJob. –ü—Ä–æ–≥—Ä–µ—Å —ñ —Å—Ç–∞—Ç—É—Å –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤ —Ä–æ–∑–¥—ñ–ª—ñ *Jobs*, –æ–±—Ä–∞–≤—à–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π Job —ñ –ø–µ—Ä–µ–≥–ª—è–Ω—É–≤—à–∏ —Ä–æ–∑–¥—ñ–ª *Status*, –¥–µ –º–∞—î –±—É—Ç–∏ –ø–æ–∑–Ω–∞—á–∫–∞ `‚úÖ Complete`.
+
.CronJob details. Jobs
image::admin:migrate-registry/migrate-registry-03.png[]
+
.Job details. Status
image::admin:migrate-registry/migrate-registry-04.png[]

.. –ó–∞–≤–¥—è–∫–∏ —Ü–∏–º –¥—ñ—è–º –≤–∏ –æ—Ç—Ä–∏–º–∞—î—Ç–µ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ –¥–∞–Ω—ñ –∑ –±–µ–∫–∞–ø—ñ–≤ –±–∞–∫–µ—Ç—ñ–≤ —Ä–µ—î—Å—Ç—Ä—É, —è–∫–∏–π –ø–µ—Ä–µ–±—É–≤–∞—î —É –ø—Ä–æ—Ü–µ—Å—ñ –º—ñ–≥—Ä–∞—Ü—ñ—ó.

. –ó–∞–±–æ—Ä–æ–Ω—ñ—Ç—å —Ä–æ–±–∏—Ç–∏ –∑–º—ñ–Ω–∏ —É —Ä–µ—î—Å—Ç—Ä—ñ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Jenkins –ø–∞–π–ø–ª–∞–π–Ω—ñ–≤.
+
–£ –∫–æ–∂–Ω–æ–º—É –ø–∞–π–ø–ª–∞–π–Ω—ñ –¥–ª—è —Ä–µ—î—Å—Ç—Ä—É –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ —Å–µ–∫—Ü—ñ—ó *Configure* —Ç–∞ –∑–Ω–∞–π–¥—ñ—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä *`Disable this project`* —É —Å–µ–∫—Ü—ñ—ó *Build Triggers*, –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –Ω–∞–ø—Ä–æ—Ç–∏ –Ω—å–æ–≥–æ –ø—Ä–∞–ø–æ—Ä–µ—Ü—å —Ç–∞ –∑–±–µ—Ä–µ–∂—ñ—Ç—å –∑–º—ñ–Ω–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–Ω–æ–ø–∫–∏ kbd:[*Save*].

== –ú—ñ–≥—Ä–∞—Ü—ñ—è —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó —ñ–∑ –∫–ª–∞—Å—Ç–µ—Ä–∞ –ê –¥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ B

. –û—Ç—Ä–∏–º–∞–π—Ç–µ –ª–æ–≥—ñ–Ω-–∫–æ–º–∞–Ω–¥–∏ –¥–ª—è –æ–±–æ—Ö –∫–ª–∞—Å—Ç–µ—Ä—ñ–≤.
+
–î–ª—è —Ü—å–æ–≥–æ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –≤—Ö—ñ–¥ –¥–æ Openshift-–∫–æ–Ω—Å–æ–ª—ñ —Ç–∞ —É –ø—Ä–∞–≤–æ–º—É –≤–µ—Ä—Ö–Ω—å–æ–º—É –∫—É—Ç–∫—É, –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è–º –Ω–∞ —Å–≤—ñ–π username, –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ *`Copy login command`*, —Å–∫–æ–ø—ñ—é–π—Ç–µ —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø—É —É –ø–æ–ª—ñ *`Log in with token`* —Ç–∞ –∑–±–µ—Ä–µ–∂—ñ—Ç—å –π–æ–≥–æ —É —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É —Ä–µ–¥–∞–∫—Ç–æ—Ä—ñ.

+
NOTE: –û–ø–µ—Ä–∞—Ü—ñ—é –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç–∏ –¥–ª—è –æ–±–æ—Ö –∫–ª–∞—Å—Ç–µ—Ä—ñ–≤: –ê —Ç–∞ B.

. –û—Ç—Ä–∏–º–∞–π—Ç–µ –Ω–∞–∑–≤—É –æ—Å—Ç–∞–Ω–Ω—å–æ—ó —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó, —è–∫–∞ –±—É–ª–∞ —Å—Ç–≤–æ—Ä–µ–Ω–∞ –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä—ñ –ê (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `abc-02-2023-04-18-19-03-14`).

. –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ç–µ—Ä–º—ñ–Ω–∞–ª —Ç–∞ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∫–æ–º–∞–Ω–¥–∏:
+
.–ï–∫—Å–ø–æ—Ä—Ç –ª–æ–≥—ñ–Ω—É –¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä–∞ –ê
----
export A_CLUSTER_LOGIN="oc login --token ‚Ä¶"
----
+
–í—Å—Ç–∞–≤—Ç–µ –º—ñ–∂ –ª–∞–ø–æ–∫ *`"..."`* –ø—ñ—Å–ª—è `--token` –æ—Ç—Ä–∏–º–∞–Ω—É –≤ –ø—É–Ω–∫—Ç—ñ 1 –∫–æ–º–∞–Ω–¥—É –ª–æ–≥—ñ–Ω—É –¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä–∞ –ê. –í –∫—ñ–Ω—Ü—ñ –ª–æ–≥—ñ–Ω-–∫–æ–º–∞–Ω–¥–∏ –Ω–µ –ø–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—è –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏–π —Ä—è–¥–æ–∫.

+
.–ï–∫—Å–ø–æ—Ä—Ç –ª–æ–≥—ñ–Ω—É –¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä–∞ –í
----
export B_CLUSTER_LOGIN="oc login --token ‚Ä¶"
----
+
–í—Å—Ç–∞–≤—Ç–µ –º—ñ–∂ –ª–∞–ø–æ–∫ *`"..."`* –ø—ñ—Å–ª—è `--token` –æ—Ç—Ä–∏–º–∞–Ω—É –≤ –ø—É–Ω–∫—Ç—ñ 1 –∫–æ–º–∞–Ω–¥—É –ª–æ–≥—ñ–Ω—É –¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä–∞ –í. –í –∫—ñ–Ω—Ü—ñ –ª–æ–≥—ñ–Ω-–∫–æ–º–∞–Ω–¥–∏ –Ω–µ –ø–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—è –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏–π —Ä—è–¥–æ–∫.

+
.–ï–∫—Å–ø–æ—Ä—Ç –Ω–∞–∑–≤–∏ —Ä–µ—î—Å—Ç—Ä—É
----
export REGISTRY_NAME="abc-02"
----
+
TIP: `abc-02` -- –Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É

+
.–ï–∫—Å–ø–æ—Ä—Ç –Ω–∞–∑–≤–∏ —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó
----
export BACKUP_NAME="<–Ω–∞–∑–≤–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó>"
----
+
TIP: –ü—Ä–∏–∫–ª–∞–¥ –Ω–∞–∑–≤–∏ —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó: `*abc-02-2023-04-18-19-03-14*`.
+
[WARNING]
====
–£ –≤–∏–ø–∞–¥–∫—É, –∫–æ–ª–∏ —Ä–µ—î—Å—Ç—Ä –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ –±—É–≤ –º—ñ–≥—Ä–æ–≤–∞–Ω–∏–π –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä A, –∞ –Ω–µ —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∏–π –Ω–∞ —Ü—ñ–π –ü–ª–∞—Ç—Ñ–æ—Ä–º—ñ, –≤–∏–∫–æ–Ω–∞–π—Ç–µ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–π *`export`*:

[source,bash]
----
export VAULT_KEY="<–Ω–∞–∑–≤–∞ –∫–ª—é—á–∞>"
----

* –¥–µ *`<–Ω–∞–∑–≤–∞ –∫–ª—é—á–∞>`* -- –∫–ª—é—á –¥–ª—è unseal –ø—Ä–æ—Ü–µ—Å—É, —è–∫–∏–π –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ –≤ *Openshift*-–∫–æ–Ω—Å–æ–ª—ñ ( –ö–ª–∞—Å—Ç–µ—Ä –ê ) > *Projects* > `<–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É>` > *ConfigMaps* > *`hashicorp-vault-config`*. –ü–æ–ª–µ *key_name* —ñ —î –Ω–∞–∑–≤–æ—é –∫–ª—é—á–∞.
+
–ù–∞–ø—Ä–∏–∫–ª–∞–¥:
+
[source,hcl]
----
key_name        = "autounseal-migration"
----

====
+
[WARNING]
====
–£ –≤–∏–ø–∞–¥–∫—É –º—ñ–≥—Ä–∞—Ü—ñ—ó –≤–µ–ª–∏–∫–æ–≥–æ —Ä–µ—î—Å—Ç—Ä—É, –≤–∏–∫–æ–Ω–∞–π—Ç–µ –µ–∫—Å–ø–æ—Ä—Ç –Ω–∞—Å—Ç—É–ø–Ω–æ—ó –∑–º—ñ–Ω–Ω–æ—ó:
[source,bash]
----
export LARGE_DATA="true"
----
====
. –ó–±–µ—Ä–µ–∂—ñ—Ç—å link:{attachmentsdir}/migrate-registry/registry-migration.zip[–∞—Ä—Ö—ñ–≤], —Ä–æ–∑–∞—Ä—Ö—ñ–≤—É–π—Ç–µ –π–æ–≥–æ –≤ –Ω–æ–≤—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –Ω–∞—Å—Ç—É–ø–Ω–æ—é –∫–æ–º–∞–Ω–¥–æ—é:
+
----
unzip registry-migration.zip -d registry-migration
----
+
–ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é registry-migration (`cd`) —Ç–∞ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:
+
----
chmod +x && ./migration.sh
----

. –ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç—É, –≤–∏–∫–æ–Ω–∞–π—Ç–µ –ª–æ–≥—ñ–Ω —É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é *oc cli* –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä—ñ B, —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–µ:

* –ù–∞—è–≤–Ω—ñ—Å—Ç—å velero backup –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä—ñ B.
* –ù–∞—è–≤–Ω—ñ—Å—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π —ñ–∑ –Ω–∞–∑–≤–æ—é _keycloak-export-<–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É>-*_ —É –ø–∞–ø—Ü—ñ, –¥–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è —Å–∫—Ä–∏–ø—Ç.

== –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä—ñ B

. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ä–µ—î—Å—Ç—Ä —á–µ—Ä–µ–∑ *`control-plane-console`*.

* –°—Ç–≤–æ—Ä—ñ—Ç—å —Ä–µ—î—Å—Ç—Ä –∑ —Ç–∏–º –∂–µ —ñ–º'—è–º, —ñ —Ç–∞–∫–æ—é –∂ –≤–µ—Ä—Å—ñ—î—é –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä—ñ B. –ü—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ —Ä–µ—î—Å—Ç—Ä—É –ø—Ä–∏–∑–Ω–∞—á—Ç–µ —É—Å—ñ—Ö –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤, —â–æ –±—É–ª–∏ —É —Ä–µ—î—Å—Ç—Ä—ñ –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä—ñ A, —Ç–∞ –≤–∫–∞–∂—ñ—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ.
+
[NOTE]
====
–î–∞–Ω—ñ –ø—Ä–æ –∫–ª—é—á ::
–ü–æ–ª—è –∑–∞–ø–æ–≤–Ω—ñ—Ç—å –∞–±–æ –∑ –∞–∫—Ç—É–∞–ª—å–Ω–∏–º–∏ –∫–ª—é—á–∞–º–∏ –¥–ª—è —Ü—å–æ–≥–æ —Ä–µ—î—Å—Ç—Ä—É, –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ñ –∫–ª—é—á—ñ. –£ –º–∞–π–±—É—Ç–Ω—å–æ–º—É, –ø—ñ—Å–ª—è –º—ñ–≥—Ä–∞—Ü—ñ—ó, —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–ª—é—á—ñ –º–æ–∂–Ω–∞ –∞–∫—Ç—É–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å *Control Plane*. –ó–∞ –¥–∞–Ω–∏–º–∏ –¥–ª—è –∫–ª—é—á—ñ–≤ –∑–≤–µ—Ä—Ç–∞—Ç–∏—Å—å –¥–æ L2-L3 –ø—ñ–¥—Ç—Ä–∏–º–∫–∏.
+
–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ –ø—Ä–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–ª—é—á—ñ–≤ —Ä–µ—î—Å—Ç—Ä—É -- –¥–∏–≤. –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ xref:admin:registry-management/system-keys/control-plane-registry-keys.adoc[].

–®–∞–±–ª–æ–Ω —Ä–µ—î—Å—Ç—Ä—É ::
–û–±–µ—Ä—ñ—Ç—å —Ç–∞–∫–∏–π —Å–∞–º–∏–π —à–∞–±–ª–æ–Ω, —è–∫ —ñ —à–∞–±–ª–æ–Ω —Ü—å–æ–≥–æ —Ä–µ—î—Å—Ç—Ä—É –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä—ñ A. –î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–∞–∑–≤–∏ —à–∞–±–ª–æ–Ω—É, –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ *Openshift*-–∫–æ–Ω—Å–æ–ª—ñ > *Projects* > *`control-plane`* > *API Explorer* > –£ –ø–æ—à—É–∫—É –≤–∏–∑–Ω–∞—á—Ç–µ `codebase` > –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ `codebase` > *Instances* > –í—ñ–¥–∫—Ä–∏–π—Ç–µ `codebase <–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É>` > –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:
+
.codebase.yaml
=====
----
metadata:
  annotations:
    registry-parameters/template-name: templates/registry-tenant-template-minimal
----
* –¥–µ *`templates/registry-tenant-template-minimal`* -- –Ω–∞–∑–≤–∞ —à–∞–±–ª–æ–Ω—É —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è —Ä–µ—î—Å—Ç—Ä—É.
=====
====
+
NOTE: –Ø–∫—â–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –∫–æ–Ω—Å–æ–ª—ñ –¥–æ–∑–≤–æ–ª—è—î –¥–æ–¥–∞—Ç–∏ DNS –¥–ª—è keycloak –∞–±–æ –ø–æ—Ä—Ç–∞–ª—ñ–≤, –Ω–∞ —Ü—å–æ–º—É –µ—Ç–∞–ø—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ —Ü–µ–π –∫—Ä–æ–∫, –∞–¥–∂–µ —Ç—Ä–∞—Ñ—ñ–∫ –ø–æ–∫–∏ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä A).

* –ü—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è, –æ–¥—Ä–∞–∑—É –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ Jenkins (namespace *`control-plane`* > *Networking* > *Routes* > *`jenkins`*), —Ç–∞ –∑—É–ø–∏–Ω—ñ—Ç—å –ø–µ—Ä—à—É –∑–±—ñ—Ä–∫—É *`MASTER-Build-<–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É>`*.
+
NOTE: –î–æ—á–µ–∫–∞–π—Ç–µ—Å—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó `<–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É>` —Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è Jenkins-–ø–∞–π–ø–ª–∞–π–Ω—É. –ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É –æ–¥—Ä–∞–∑—É –∑—Ä–æ–±–∏—Ç–∏ *Abort* –∑–±—ñ—Ä–∫–∏.

. –ó–∞–ª–∏—à–∞—é—á–∏—Å—å —É –∫–æ–Ω—Å–æ–ª—ñ Jenkins, –∑–º—ñ–Ω—ñ—Ç—å –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é *MASTER-Build-`<–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É>`*: +
–ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ *MASTER-Build-`<–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É>`* > *Configure*, —Ç–∞ —É —Å–µ–∫—Ü—ñ—ó *Build Triggers* –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –ø—Ä–∞–ø–æ—Ä–µ—Ü—å –Ω–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ *Disable this project*. –î–∞–ª—ñ –∑–±–µ—Ä–µ–∂—ñ—Ç—å –∑–º—ñ–Ω–∏ –∫–Ω–æ–ø–∫–æ—é *`Save`*.

. –ü–µ—Ä–µ–Ω–µ—Å—ñ—Ç—å —Ñ–∞–π–ª–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó *_values.yaml_* —Ç–∞ *_values.gotmpl_* –∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é —Ä–µ—î—Å—Ç—Ä—É –∫–ª–∞—Å—Ç–µ—Ä–∞ –ê –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä B.

* –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é —Ä–µ—î—Å—Ç—Ä—É –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä—ñ –ê: +
–í—ñ–¥–∫—Ä–∏–π—Ç–µ *Control-plane-console* > *–î–∞—à–±–æ—Ä–¥* > *Gerrit* > *Browse* > *Repositories* > –æ–±–µ—Ä—ñ—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π *`<–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É>`*. +
–£ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó —Ä–µ—î—Å—Ç—Ä—É –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ *Branches* > `master`, –¥–∞–ª—ñ –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ *deploy-templates*, –≤—ñ–¥–∫—Ä–∏–π—Ç–µ —Ñ–∞–π–ª *_values.yaml_* ( *_values.gotmpl_* ) > –°–∫–æ–ø—ñ—é–π—Ç–µ *raw*-–∫–æ–¥ –¥–æ –±—É—Ñ–µ—Ä–∞ –æ–±–º—ñ–Ω—É.
* –î–∞–ª—ñ –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é —Ä–µ—î—Å—Ç—Ä—É –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä—ñ B: +
*Control-plane-console* > *–î–∞—à–±–æ—Ä–¥* > *Gerrit* ) > *Browse* > *Repositories* —Ç–∞ –æ–±–µ—Ä—ñ—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π *`<–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É>`*. –ß–µ—Ä–µ–∑ *commands* > *`Create change`* —Å—Ç–≤–æ—Ä—ñ—Ç—å –∑–º—ñ–Ω—É (change) —ñ–∑ –Ω–∞—Å—Ç—É–ø–Ω–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

** `Select branch for new change: master`.
** `Description: Update registry before migration`.
+
–ü—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–º—ñ–Ω–∏, —É —Å–∞–º–æ–º—É change –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å *`Edit`* > *`ADD/OPEN/UPLOAD`* -- –∑–Ω–∞–π–¥—ñ—Ç—å —Ñ–∞–π–ª *_values.yaml_* (*_values.gotmpl_*).
–ü–µ—Ä–µ–Ω–µ—Å—ñ—Ç—å –¥–æ —Ü—å–æ–≥–æ —Ñ–∞–π–ª—É —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é *_values.yaml_* (*_values.gotmpl_*) —ñ–∑ –∫–ª–∞—Å—Ç–µ—Ä–∞ –ê.
* –ü–æ–≤—Ç–æ—Ä—ñ—Ç—å –æ–ø–µ—Ä–∞—Ü—ñ—é –¥–ª—è –æ–±–æ—Ö —Ñ–∞–π–ª—ñ–≤: *_values.yaml_* —Ç–∞ *_values.gotmpl_*.
* –ó–±–µ—Ä–µ–∂—ñ—Ç—å –∑–º—ñ–Ω–∏, –¥–æ—á–µ–∫–∞–π—Ç–µ—Å—è –ø—Ä–æ—Ö–æ–¥–∂–µ–Ω–Ω—è –ø–∞–π–ø–ª–∞–π–Ω—É *Code Review* (*–°–Ü Jenkins `+1`*), –ø—Ä–æ—Å—Ç–∞–≤—Ç–µ `*Code-review +2*`,—Ç–∞ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –∑–ª–∏—Ç—Ç—è –∑–º—ñ–Ω –¥–æ `master`-–≥—ñ–ª–∫–∏ –∫–Ω–æ–ø–∫–æ—é `*Submit*`.

. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ `*CustomResourceDefintition*`.
+
[WARNING]
====
–Ø–∫—â–æ –¥–æ —Ü—å–æ–≥–æ –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä—ñ –Ω–µ –±—É–ª–æ –∂–æ–¥–Ω–æ–≥–æ —Ä–µ—î—Å—Ç—Ä—É, –æ–±–æ–≤'—è–∑–∫–æ–≤–æ –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —ñ—Å–Ω—É–≤–∞–Ω–Ω—è *`CustomResourceDefintition`*. –î–ª—è —Ü—å–æ–≥–æ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –ª–æ–≥—ñ–Ω —á–µ—Ä–µ–∑ *`oc cli`* –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä—ñ B —Ç–∞ –≤–∏–∫–æ–Ω–∞—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω—É –∫–æ–º–∞–Ω–¥—É:

----
oc get customresourcedefinition ingressclassparameterses.configuration.konghq.com
----

–Ø–∫—â–æ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è –∑ –ø–æ–º–∏–ª–∫–æ—é —Ç–∞ –≤–∏–¥–∞—Å—Ç—å —É –∫–æ–Ω—Å–æ–ª—ñ *`No resources found`*, —Ç–æ –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó, –¥–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è —Å–∫—Ä–∏–ø—Ç *_migration.sh_*, —Ç–∞ –∑ –∫–æ—Ä–µ–Ω–µ–≤–æ–≥–æ —à–ª—è—Ö—É –≤–∏–∫–æ–Ω–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—É –∫–æ–º–∞–Ω–¥—É:

----
for file in $(ls crds); do oc apply -f crds/$file; done
----
====

== –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä–µ—î—Å—Ç—Ä—É –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä—ñ B

IMPORTANT: –£–≤—ñ–º–∫–Ω—ñ—Ç—å –¥–æ—Å—Ç—É–ø –¥–ª—è –∫—ñ–Ω—Ü–µ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –¥–æ —Ä–µ—î—Å—Ç—Ä—É _–õ–ò–®–ï_ –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä–µ—î—Å—Ç—Ä—É.

. –í—ñ–¥—Ä–∏–π—Ç–µ –¥–æ Jenkins (namespace *`control-plane`* > *Networking* > *Routes* > *`jenkins`*), –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ –ø–∞–ø–∫–∏ —ñ–∑ –Ω–∞–∑–≤–æ—é —Ä–µ—î—Å—Ç—Ä—É —Ç–∞ –∑–∞–ø—É—Å—Ç—ñ—Ç—å Jenkins-–ø–∞–π–ø–ª–∞–π–Ω *`Restore-registry-<–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É>`*. –ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É –ø–∞–π–ø–ª–∞–π–Ω—É –æ–±–µ—Ä—ñ—Ç—å –≤–µ—Ä—Å—ñ—é (–Ω–∞ –µ—Ç–∞–ø—ñ `cleanup-registry-before-restore`) —Ç–∞ –¥–æ—á–µ–∫–∞–π—Ç–µ—Å—è, –∫–æ–ª–∏ –ø—Ä–æ—Ü–µ—Å –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è.
+
NOTE: –£ –≤–∏–ø–∞–¥–∫—É, –∫–æ–ª–∏ –ø—Ä–æ—Ü–µ—Å –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è –ø–æ–º–∏–ª–∫–æ—é –∞–±–æ —Ç—Ä–∏–≤–∞—î –ø–æ–Ω–∞–¥ 1-2 –≥–æ–¥–∏–Ω–∏, –∑–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ —Å–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç—ñ–≤ –∫–æ–º–∞–Ω–¥–∏ —Ç–µ—Ö–Ω—ñ—á–Ω–æ—ó –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ L2-L3 "–ï–ü–ê–ú".

. –ü—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –ø–∞–π–ø–ª–∞–π–Ω—É –ø–µ—Ä–µ–π–¥—ñ—Ç—å –≤ Openshift-–∫–æ–Ω—Å–æ–ª—å -> Projects -> <registry-name>, —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –Ω–µ–º–∞—î –ø–æ–¥ —É —Å—Ç–∞—Ç—É—Å—ñ –ø–æ–º–∏–ª–æ–∫.
+
[NOTE]
====
–£ –≤–∏–ø–∞–¥–∫—É, –∫–æ–ª–∏ –ø–æ–¥–∞ —ñ–∑ –Ω–∞–∑–≤–æ—é *`bpms-*`* –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞ —ñ –º–∞—î —Å—Ç–∞—Ç—É—Å –ø–æ–º–∏–ª–∫–∏, –≤–∏–ø—Ä–∞–≤—Ç–µ –ø–∞—Ä–æ–ª—ñ —É `postgres` –¥–ª—è *`operational-instance`* —Ç–∞ *`analytical-instance`* –ø–æ–¥, –¥–ª—è —Ü—å–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ:

* –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ *Openshift*-–∫–æ–Ω—Å–æ–ª—å > *Secrets*, –∑–Ω–∞–π–¥—ñ—Ç—å secret –¥–ª—è `operational-instance` -- *`operational-pguser-postgres`* (–¥–ª—è `analytical-instance` -- —Ü–µ *`analytical-pguser-postgres`*).
* –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ *Secret* —Ç–∞ —Å–∫–æ–ø—ñ—é–π—Ç–µ –ø–æ–ª–µ *`password`*.
* –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ *Openshift*-–∫–æ–Ω—Å–æ–ª—å > *Pods* > –∑–Ω–∞–π–¥—ñ—Ç—å –ø–æ–¥—É *`operational-instance`* –∞–±–æ *`analytical-instance`* —Ç–∞ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –ø–æ —á–µ—Ä–∑—ñ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∫–æ–º–∞–Ω–¥–∏:
+
[source,bash]
----
psql
----
+
[source,sql]
----
ALTER ROLE postgres WITH PASSWORD '<password>';
----

** –¥–µ *`<password>`* -- –ø–æ–ª–µ `password`, —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–µ —É *Secret*, –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ–≥–æ –µ–∫–∑–µ–º–ø–ª—è—Ä–∞ -- `operational` –∞–±–æ `analytical`.

* –ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —É—Å—ñ—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π, –≤–∏–¥–∞–ª—ñ—Ç—å –ø–æ–¥—É *`bpms`* —Ç–∞ –¥–æ—á–µ–∫–∞–π—Ç–µ—Å—è, –∫–æ–ª–∏ –≤–æ–Ω–∞ –±—É–¥–µ —É —Å—Ç–∞—Ç—É—Å—ñ *`Running`* (–∞–∫—Ç–∏–≤–Ω–∞/–∑–∞–ø—É—â–µ–Ω–∞).
====
+
[NOTE]
====
–£ –≤–∏–ø–∞–¥–∫—É, –∫–æ–ª–∏ –ø–æ–¥–∞ *`registry-rest-api`* –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –∑ –ø–æ–º–∏–ª–∫–æ—é `ImagePullBackOff`, –¥–æ–¥–∞–π—Ç–µ IP –∫–ª–∞—Å—Ç–µ—Ä–∞ B –¥–æ –∞–Ω–æ—Ç–∞—Ü—ñ—ó *Openshift Route* > *Nexus*.

* –î–ª—è —Ü—å–æ–≥–æ –ø–µ—Ä–µ–π–¥—ñ—Ç—å –≤ *Openshift*-–∫–æ–Ω—Å–æ–ª—å > *Project* > `<–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É>` > *Routes* > *Nexus* > *YAML* —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–µ –ø–æ–ª–µ —É _.yaml_-–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó:.
+
.route.yaml
=====
----
metadata:
  annotations:
    haproxy.router.openshift.io/ip_whitelist: <NAT Cluster IP>/32,....
----
=====
+
–Ø–∫—â–æ IP-–∞–¥—Ä–µ—Å–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞ B –≤—ñ–¥—Å—É—Ç–Ω—è, –¥–æ–¥–∞–π—Ç–µ —ó—ó –¥–æ *`haproxy.router.openshift.io/ip_whitelist`* —ñ–∑ –º–∞—Å–∫–æ—é *`/32`*.

====
+
. –ü–µ—Ä–µ–Ω–µ—Å—ñ—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.
+
* –í Openshift-–∫–æ–Ω—Å–æ–ª—ñ –∑–Ω–∞–π–¥—ñ—Ç—å –ø—Ä–æ—î–∫—Ç (namespace) *`user-management`*, –≤—ñ–¥–∫—Ä–∏–π—Ç–µ *Networking* > *Routes* —Ç–∞ –ø–µ—Ä–µ–π–¥—ñ—Ç—å –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º –¥–æ —Å–µ—Ä–≤—ñ—Å—É *`keycloak`*.
+
TIP: –î–∞–Ω—ñ –¥–ª—è –ª–æ–≥—ñ–Ω—É –º–æ–∂–Ω–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ —ñ–∑ —Å–µ–∫—Ä–µ—Ç—ñ–≤ keycloak —É —Ç–æ–º—É –∂ –ø—Ä–æ—î–∫—Ç—ñ. –î–ª—è —Ü—å–æ–≥–æ –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ Workloads > Secrets, –∑–Ω–∞–π–¥—ñ—Ç—å —É –ø–æ—à—É–∫—É —Å–µ–∫—Ä–µ—Ç —ñ–∑ –Ω–∞–∑–≤–æ—é *`keycloak`*, —Ç–∞ —É —Ä–æ–∑–¥—ñ–ª—ñ Data —Å–∫–æ–ø—ñ—é–π—Ç–µ –¥–∞–Ω—ñ –¥–ª—è –≤—Ö–æ–¥—É –¥–æ —Å–µ—Ä–≤—ñ—Å—É.
+
–ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ –∞–¥–º—ñ–Ω-–∫–æ–Ω—Å–æ–ª—å Keycloak, –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ —Ä–µ–∞–ª–º—É (1), —Ç–∞ —É –ª—ñ–≤–æ–º—É –º–µ–Ω—é —Ä–µ–∞–ª–º—É –æ–±–µ—Ä—ñ—Ç—å  *`Import`* (2) (–ø—Ä–∏ —ñ–º–ø–æ—Ä—Ç—ñ –æ–±–µ—Ä—ñ—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥—ñ—é *`SKIP`*), –¥–∞–ª—ñ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å *`Select file`* (3) —Ç–∞ –≤–∏–±–µ—Ä—ñ—Ç—å —Ñ–∞–π–ª —ñ–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó _keycloak-export-<–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É>-<—ñ–º‚Äô—è —Ä–µ–∞–ª–º—É>/<—ñ–º‚Äô—è —Ä–µ–∞–ª–º—É>-users-*.json_.
+
NOTE: –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —Ç—Ä–µ–±–∞ –ø–æ–≤—Ç–æ—Ä–∏—Ç–∏ –¥–ª—è —É—Å—ñ—Ö —Ä–µ–∞–ª–º—ñ–≤ —Ä–µ—î—Å—Ç—Ä—É.
+
NOTE: –Ø–∫—â–æ —Ñ–∞–π–ª—ñ–≤ –±—ñ–ª—å—à–µ –æ–¥–Ω–æ–≥–æ, —Ç–æ –≤–∏–∫–æ–Ω–∞–π—Ç–µ —ñ–º–ø–æ—Ä—Ç —É—Å—ñ—Ö —Ñ–∞–π–ª—ñ–≤.

+
.File import
image::admin:migrate-registry/migrate-registry-2.png[image,width=601,height=417]

. –ü–µ—Ä–µ–Ω–µ—Å—ñ—Ç—å –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é —Ä–µ—î—Å—Ç—Ä—É –¥–æ *_values.yaml/values.gotmpl_*.
+
* –£–≤—ñ–π–¥—ñ—Ç—å –¥–æ *_control-plane-gerrit_* (*Openshift*-–∫–æ–Ω—Å–æ–ª—å > *Projects* -> *`control-plane`* -> *Networking* -> *`gerrit`* > –õ–æ–≥—ñ–Ω —á–µ—Ä–µ–∑ *`openshift-sso`*).
+
–£ Gerrit –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ *Browse* > *Repositories* —Ç–∞ –æ–±–µ—Ä—ñ—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π *`<–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É>`*. –ß–µ—Ä–µ–∑ *`commands`* > *`Create change`* —Å—Ç–≤–æ—Ä—ñ—Ç—å –∑–º—ñ–Ω—É (change) —ñ–∑ –Ω–∞—Å—Ç—É–ø–Ω–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

** `Select branch for new change: master`.
** `Description: Update registry after migration`.
+
–ü—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è change, —É —Å–∞–º–æ–º—É change –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å *`Edit`*.

* –î–æ–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é `vault` —É *_values.gotmpl_*.
+
–î–ª—è —Ü—å–æ–≥–æ –≤—ñ–∑—å–º—ñ—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é `vault` –∑ config-map *`hashicorp-vault-config`* (*Openshift*-–∫–æ–Ω—Å–æ–ª—å > *Projects* > `<–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É>` > *Workloads* > *ConfigMaps* > *`hashicorp-vault-config`*) —Ç–∞ —Å–∫–æ–ø—ñ—é–π—Ç–µ –ø–æ–ª–µ —è–∫ —É –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ:
+
----
ui = true

listener "tcp" {
  tls_disable = 1
  address = "[::]:8200"
  cluster_address = "[::]:8201"
}
storage "file" {
  path = "/vault/data"
}
seal "transit" {
   address         = "https://<vault url>"
   disable_renewal = "false"
   key_name        = "<key name>"
   mount_path      = "transit/"
   tls_skip_verify = "true"
}
----
+
* –¥–µ *`<vault URL>`* -- –ø–æ—Å–∏–ª–∞–Ω–Ω—è –¥–æ *`vault`*, *`<key name>`* -- –Ω–∞–∑–≤–∞ –∫–ª—é—á–∞ (—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –∑ `config-map` –±—É–¥—É—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ñ –ø–æ–ª—è).
+
–î–∞–ª—ñ –≤ change –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å *`ADD/OPEN/UPLOAD`*, —É –ø–æ—à—É–∫—É –≤–∫–∞–∂—ñ—Ç—å *_values.gotmpl_* —Ç–∞ –≤–∏–±–µ—Ä—ñ—Ç—å –ø–æ—Ç—Ä—ñ–±–Ω–∏–π —Ñ–∞–π–ª. –í —Å–∞–º–æ–º—É —Ñ–∞–π–ª—ñ –¥–æ–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é —è–∫ —É –ø—Ä–∏–∫–ª–∞–¥—ñ:
+
[source,yaml]
----
vault:
  platformVaultToken: {{ env "platformVaultToken" }}
  openshiftApiUrl: {{ env "openshiftApiUrl" }}
  centralVaultUrl: {{ b64dec $centralVaultUrl }}
  server:
    dataStorage:
      storageClass: ocs-storagecluster-ceph-rbd
    auditStorage:
      storageClass: ocs-storagecluster-ceph-rbd

    standalone:
      config: |
       ui = true

       listener "tcp" {
         tls_disable = 1
         address = "[::]:8200"
         cluster_address = "[::]:8201"
       }
       storage "file" {
         path = "/vault/data"
       }
       seal "transit" {
          address         = "https://<vault url>"
          disable_renewal = "false"
          key_name        = "<key name>"
          mount_path      = "transit/"
          tls_skip_verify = "true"
       }
----

* –ü—ñ—Å–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å Save.

* –ó–º—ñ–Ω—ñ—Ç—å —Ä–æ–∑–º—ñ—Ä `kafka`-–¥–∏—Å–∫—ñ–≤. –ó–∞–ª–∏—à–∞—é—á–∏—Å—å —É —Ü—å–æ–º—É —Ñ–∞–π–ª—ñ, –∑–Ω–∞–π–¥—ñ—Ç—å –ø–æ–ª–µ:
+
[source,yaml]
----
storage:
  zookeeper:
    size: 5Gi
  kafka:
    size: 20Gi
----

* –ó–º—ñ–Ω—ñ—Ç—å —Ä–æ–∑–º—ñ—Ä `kafka.size` –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ —Ä–æ–∑–º—ñ—Ä—É –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –¥–∏—Å–∫–∞ –≤ *Openshift*-–∫–æ–Ω—Å–æ–ª—ñ (*Openshift*-–∫–æ–Ω—Å–æ–ª—å > *Project* -> `<–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É>` -> *Storage* > *`PersistentVolumeClaims`* ). –£ –ø–æ—à—É–∫—É –∑–Ω–∞–π–¥—ñ—Ç—å *`data-0-kafka-cluster-kafka-0`* —Ç–∞ –π–æ–≥–æ *`Capacity`*. –ü–æ–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è _values.gtmpl_ —Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –±–∞–∂–∞–Ω–∏–π —Ä–æ–∑–º—ñ—Ä –¥–∏—Å–∫–∞:
+
----
storage:
  zookeeper:
    size: 5Gi
  kafka:
    size: 40Gi
----

** –¥–µ 40Gi - –∞–∫—Ç—É–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä –¥–∏—Å–∫–∞ –∑ `Capacity`.

* –í–∏–¥–∞–ª—ñ—Ç—å —É—Å—ñ—Ö *`GerritGroupMember`*. –î–ª—è —Ü—å–æ–≥–æ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –≤—Ö—ñ–¥ –¥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ B —á–µ—Ä–µ–∑ –æ—Å cli —Ç–∞ –≤–∏–∫–æ–Ω–∞—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω—É –∫–æ–º–∞–Ω–¥—É:
+
----
oc -n <–Ω–∞–∑–≤–∞-—Ä–µ—î—Å—Ç—Ä—É> delete gerritgroupmember --all
----

. –ü—ñ—Å–ª—è –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω –º–∞—î –∑–∞–ø—É—Å—Ç–∏—Ç–∏—Å—è Jenkins-–ø—Ä–æ—Ü–µ—Å *`MASTER-Build-<–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É>`*.
. –ü—ñ—Å–ª—è –∑ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è Jenkins-–ø–∞–π–ø–ª–∞–π–Ω—É *`MASTER-Build-<–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É>`*, –≤–∏–ø—Ä–∞–≤—Ç–µ Jenkins Credentials —É Jenkins —Ä–µ—î—Å—Ç—Ä—É.
+
[NOTE]
====
–£ –≤–∏–ø–∞–¥–∫—É, –∫–æ–ª–∏ –¥–æ—Å—Ç—É–ø—É –Ω–µ–º–∞—î, –¥–æ–¥–∞–π—Ç–µ —Å–µ–±–µ —è–∫ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Ä–µ—î—Å—Ç—Ä—É —á–µ—Ä–µ–∑ control-plane-console.
====
* –î–ª—è —Ü—å–æ–≥–æ –ø–µ—Ä–µ–π–¥—ñ—Ç—å –≤ *Openshift-–∫–æ–Ω—Å–æ–ª—å* > *Projects* > `<–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É>` > *Workloads* > *Secrets* > *`gerrit-control-plane-sshkey`* —Ç–∞ —Å–∫–æ–ø—ñ—é–π—Ç–µ –ø–æ–ª–µ *`id_rsa`*.

* –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –ø–µ—Ä–µ–π–¥—ñ—Ç—å —É —Ä–µ—î—Å—Ç—Ä–æ–≤–∏–π Jenkins (*Networking* > *Routes* > `*jenkins*`) > Manage Jenkins > Manage Credentials > *`gerrit-ci-users-sshkey`* (*`gerrit-control-plane-sshkey`*) > –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å *`Update`*.

* –£ –ø–æ–ª—ñ *`Private Key`* –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é *`Replace`* –≤—Å—Ç–∞–≤—Ç–µ —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è.

. –û–Ω–æ–≤—ñ—Ç—å –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ Nexus —É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó —Ä–µ–≥–ª–∞–º–µ–Ω—Ç—É.
+
–î–ª—è —Ü—å–æ–≥–æ –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ *Openshift*-–∫–æ–Ω—Å–æ–ª—ñ > *Project* -> <–Ω–∞–∑–≤–∞ —Ä–µ—î—Å—Ç—Ä—É> > *Gerrit* —Ç–∞ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –ª–æ–≥—ñ–Ω.
+
–î–∞–ª—ñ –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –¥–æ—Å—Ç—É–ø—É –¥–æ –ø—Ä–æ—î–∫—Ç—ñ–≤ —É Gerrit —Ç–∞ –∫–ª–æ–Ω—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π *_registry-regulations_*. –î–ª—è —Ü—å–æ–≥–æ:

* –£ –≤–µ–±—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ Gerrit, –ø–µ—Ä–µ–π–¥—ñ—Ç—å —É –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è > *HTTP Credentials* > –∑–≥–µ–Ω–µ—Ä—É–π—Ç–µ –Ω–æ–≤–∏–π –ø–∞—Ä–æ–ª—å –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `*Generate New Password*`, —Ç–∞ –∑–±–µ—Ä–µ–∂—ñ—Ç—å —Ü–µ–π –ø–∞—Ä–æ–ª—å —É –Ω–æ—Ç–∞—Ç–∫–∞—Ö.

* –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é *`registry-regulations`* > —Ç–∞ —Å–∫–æ–ø—ñ—é–π—Ç–µ –∫–æ–º–∞–Ω–¥—É  –¥–ª—è –∫–ª–æ–Ω—É *Anonymous HTTP* > *`Clone with commit-msg hook`*. +

* –í—Å—Ç–∞–≤—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è –∫–ª–æ–Ω—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é –¥–æ —Ç–µ—Ä–º—ñ–Ω–∞–ª–∞ —Ç–∞ –≤–∏–∫–æ–Ω–∞–π—Ç–µ. –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø–∏—Ç–∞—î –ª–æ–≥—ñ–Ω —Ç–∞ –ø–∞—Ä–æ–ª—å. –õ–æ–≥—ñ–Ω –≤ —Ü—å–æ–º—É –≤–∏–ø–∞–¥—É –±—É–¥–µ –≤–∞—à email, –∞ –ø–∞—Ä–æ–ª—å -- —Ç–æ–π, —è–∫–∏–π –≤–∏ –∑–≥–µ–Ω–µ—Ä—É–≤–∞–ª–∏ —É –ø–µ—Ä—à–æ–º—É –ø—ñ–¥–ø—É–Ω–∫—Ç—ñ.
+
TIP: –î–µ—Ç–∞–ª—å–Ω—ñ—à–µ –ø—Ä–æ —Ä–æ–±–æ—Ç—É –∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—î–º Gerrit –¥–∏–≤. –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ xref:registry-develop:registry-admin/regulations-deploy/registry-admin-deploy-regulation.adoc[].
+
[NOTE]
====
–Ø–∫—â–æ –≤ —Å–∏—Å—Ç–µ–º—ñ git user –≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç—å—Å—è –≤—ñ–¥ –≤–∞—à–æ–≥–æ user –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ Gerrit, –≤–∏–∫–æ–Ω–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∫–æ–º–∞–Ω–¥–∏:
----
git config --global user.name "New Author Name"
git config --global user.email "<email@address.example>"
----

–ù–∞–ø—Ä–∏–∫–ª–∞–¥:
----
git config --global user.name "Jonh Doe"
git config --global user.email "jong_doe@doemail.com"
----
====

. –ó–º—ñ–Ω—ñ—Ç—å –º—ñ–Ω–æ—Ä–Ω—É –≤–µ—Ä—Å—ñ—é –≤ _settings.yaml_ —É –∫–æ—Ä–µ–Ω–µ–≤—ñ–π (root) –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é *_registry-regulations_* –∑–≥—ñ–¥–Ω–æ —ñ–∑ –ø—Ä–∏–ª–∞–¥–æ–º:
+
----
settings:
  general:
    package: ua.gov.mdtu.ddm.dataplatform.template
    register: registry
    version: 2.21.0
----
–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–æ–¥–∞–π—Ç–µ –¥–æ –≤–µ—Ä—Å—ñ—ó `+1`:
+
----
settings:
  general:
    package: ua.gov.mdtu.ddm.dataplatform.template
    register: registry
    version: 2.21.1
----

. –ó–∞–º—ñ–Ω—ñ—Ç—å –∑–≥–∞–¥—É–≤–∞–Ω–Ω—è DNS-–∫–ª–∞—Å—Ç–µ—Ä–∞ –ê –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä B. –î–ª—è —Ü—å–æ–≥–æ —É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó *_registry-regulations/data-model_*
+
----
cd registry-regulations/data-model
----
–¢–∞ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—É –∫–æ–º–∞–Ω–¥—É –ø–æ –∑–∞–º—ñ–Ω—ñ DNS:
+
----
find "." \( -type d -name .git -prune \) -o -type f -print0 | xargs -0 sed -i -e  's/<Cluster A DNS wildcard> /<Cluster B DNS Wildcard> /g'
----
+
[TIP]
====
`Cluster A DNS wildcard/Cluster B DNS wildcard` -- —Ü–µ *`apps.*`* (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `*apps.reestr1.eua.gov.ua*`).
–Ø–∫ –ø–æ–≤–∏–Ω–Ω–æ –≤–∏–≥–ª—è–¥–∞—Ç–∏ sed –ø—Ä–∞–≤–∏–ª–æ:
----
's/apps.cluster-a.dns.wildcard.com/apps.cluster-b.dns.wildcard.com/g'
----
====

. –í–∏–∫–æ–Ω–∞–π—Ç–µ commit –∑–º—ñ–Ω —Ç–∞ push –¥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é:
+
[source,git]
----
git add --all
----
+
[source,git]
----
git commit -m "Update nexus URL"
----
+
[source,git]
----
git push origin refs/heads/master:refs/for/master
----

. –ü–µ—Ä–µ–π–¥—ñ—Ç—å —É —Ä–µ—î—Å—Ç—Ä–æ–≤–∏–π Gerrit, –ø—Ä–æ—Å—Ç–∞–≤—Ç–µ –≤—ñ–¥–º—ñ—Ç–∫–∏ *`Code-Review +2`*, —Ç–∞ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–Ω–æ–ø–∫–∏ kbd:[*Submit*] –∑–∞—Å—Ç–æ—Å—É–π—Ç–µ –∑–º—ñ–Ω–∏ –¥–æ master-–≥—ñ–ª–∫–∏.

. –ü—ñ—Å–ª—è –≤–Ω–µ—Å–µ–Ω–Ω—è –∑–º—ñ–Ω –¥–æ master-–≥—ñ–ª–∫–∏ –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ Jenkins —Ä–µ—î—Å—Ç—Ä—É —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ Jenkins-–ø–∞–π–ø–ª–∞–π–Ω–∏ —É Jenkins Folder *registry-regulations* –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—è –∑—ñ —Å—Ç–∞—Ç—É—Å–æ–º *`Success`*.

== –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–µ—î—Å—Ç—Ä—É

. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –ö–∞–±—ñ–Ω–µ—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –ø—Ä–∞—Ü—é—é—Ç—å —É —à—Ç–∞—Ç–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ, —Ç–∞ –±—ñ–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å–∏ –º—ñ–≥—Ä—É–≤–∞–ª–∏ —É—Å–ø—ñ—à–Ω–æ.

. –£—Å—ñ Jenkins pipeline –º–∞—é—Ç—å –∑–∞–≤–µ—Ä—à–∏—Ç–∏—Å—è –∑—ñ —Å—Ç–∞—Ç—É—Å–æ–º *`Success`*.

== –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó —Ä–µ—î—Å—Ç—Ä—É

–ü–µ—Ä–µ–Ω–µ—Å—ñ—Ç—å –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é —Ä–µ—î—Å—Ç—Ä—É —ñ–∑ –∫–ª–∞—Å—Ç–µ—Ä–∞ –ê –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä B –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó: ::

* *–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏* (_–¥–∏–≤. –¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ xref:registry-develop:registry-admin/create-users/create-registry-admins.adoc[])_.
* *–î–∞–Ω—ñ –ø—Ä–æ –∫–ª—é—á*  (_–¥–∏–≤. –¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ xref:admin:registry-management/system-keys/control-plane-registry-keys.adoc[]_).
* *–ü–æ—à—Ç–æ–≤–∏–π —Å–µ—Ä–≤–µ—Ä* (_–¥–∏–≤. –¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ xref:registry-develop:registry-admin/user-notifications/email/config-smtp-server.adoc[]_).
* *–†–µ—Å—É—Ä—Å–∏ —Ä–µ—î—Å—Ç—Ä—É*
+
[NOTE]
–ü–µ—Ä–µ–Ω–µ—Å—ñ—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å —ñ–∑ —Ñ–∞–π–ª—É _values.yaml_ (—Å–µ–∫—Ü—ñ—è `global.registry` ) —Ä–µ—î—Å—Ç—Ä—É –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä—ñ –ê –¥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å —É —Ñ–∞–π–ª—ñ _values.yaml_ —Ä–µ—î—Å—Ç—Ä—É –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä—ñ –í.

* DNS (_–¥–∏–≤. –¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ xref:admin:registry-management/custom-dns/custom-dns-overview.adoc[]_).
* *–û–±–º–µ–∂–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É* (_–¥–∏–≤. –¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ xref:admin:registry-management/control-plane-cidr-access-endpoints.adoc[]_).
* *–ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –Ω–∞–¥–∞–≤–∞—á—ñ–≤ –ø–æ—Å–ª—É–≥* (_–¥–∏–≤. –¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞—Ö xref:registry-develop:registry-admin/cp-auth-setup/cp-auth-setup-officers.adoc[] —Ç–∞ xref:registry-develop:registry-admin/cp-auth-setup/cp-officer-self-registration.adoc[]_).
* *–ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –æ—Ç—Ä–∏–º—É–≤–∞—á—ñ–≤ –ø–æ—Å–ª—É–≥* (_–¥–∏–≤. –¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ xref:registry-develop:registry-admin/cp-auth-setup/cp-auth-setup-citizens.adoc[]_)
* *–†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è* (_–¥–∏–≤. –¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞—Ö xref:admin:backup-restore/control-plane-backup-restore.adoc[] —Ç–∞ xref:admin:backup-restore/backup-schedule-registry-components.adoc[]_).