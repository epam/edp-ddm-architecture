:toc-title: ЗМІСТ
:toc: auto
:toclevels: 5
:experimental:
:important-caption:     ВАЖЛИВО
:note-caption:          ПРИМІТКА
:tip-caption:           ПІДКАЗКА
:warning-caption:       ПОПЕРЕДЖЕННЯ
:caution-caption:       УВАГА
:example-caption:           Приклад
:figure-caption:            Зображення
:table-caption:             Таблиця
:appendix-caption:          Додаток
:sectnums:
:sectnumlevels: 5
:sectanchors:
:sectlinks:
:partnums:

= Застаріла функціональність у релізі 1.9.8

Ця сторінка описує перелік застарілих (deprecated) функцій у системі, які є не рекомендованими до використання і будуть видалені з часом.

== Огляд

У релізі Платформи `1.9.8` оновлено кабінети користувачів. Розробники, які бажають повернути кабінети до попереднього стану, можуть це зробити у версії Платформи та реєстру `1.9.8`. Для цього необхідно виконати описані нижче кроки.

[IMPORTANT]
====
* Повернення кабінетів до попереднього стану доступне лише для оновлених Платформ. Якщо Платформа встановлена з нуля, ця функція недоступна.
* Починаючи з релізу `1.9.9`, підтримка старих версій Кабінетів не гарантується.
====

== Повернення кабінетів користувачів до попередньої версії

Щоб повернути кабінети до попередньої версії, виконайте наступні інструкції:

. Застосуйте образ `common-web-app` версії `1.9.4.125` із центрального *Nexus*.

. Відрийте *OpenShift*-консоль, оберіть проєкт з реєстром та *змініть конфігурацію теми*. Для цього знайдіть *ConfigMap* `registry-environment-js` та внесіть зміни у файл *YAML*-конфігурації.
Наприклад:
+
.Приклад оновлення ConfigMap
image::release-notes:deprecated-changes-1-9-8/deprecated-changes-1-9-8-1.png[]

* `december` -- назва реєстру.
* `registry-environment-js` -- назва *ConfigMap*.
* `themeFile` -- Назва файлу теми. Можливі значення:

** Для `common-web-app` версії `1.9.4.125`:
- `white-theme.js` (світла тема)
- `dark-theme.js` (темна тема)

** Для нових версій (TBD):
- `OSDefaultLight.js` (opensource світла тема)
- `DiiaLight.js` (оновлена світла тема)

. *Оновіть конфігурацію Helm*.
На цільовому кластері в `control-plane-gerrit`, у репозиторії з назвою реєстру (наприклад, `december`) використовуйте `common-web-app` версії `1.9.4.125` замість нової версії.

.. Створіть merge request (MR) у репозиторії з назвою, що відповідає реєстру.
+
.Створення зміни у Gerrit
image::release-notes:deprecated-changes-1-9-8/deprecated-changes-1-9-8-2.png[]

.. Натисніть `Edit` і відкрийте файл `deploy-templates/helmfile.yaml`.
+
.Приклад оновлення Helm-файлу
image::release-notes:deprecated-changes-1-9-8/deprecated-changes-1-9-8-3.png[]

.. Знайдіть секцію `common-web-app` у файлі.
.. Змініть значення `image.version` на `1.9.4.125`.
.. Збережіть та опублікуйте зміни через опцію *Save and Publish*, після чого підтвердьте Merge Request.
.. Дочекайтеся завершення пайплайну *MASTER-Build* збірки реєстру.

. *Відновлення оновлених кабінетів*.
Щоб повернути нові версії кабінетів, повторіть кроки 3 та 4, використовуючи нові значення.

[WARNING]
====

Зміна тем в Адміністративному порталі::

Після повернення кабінетів до попередньої версії, зміна теми реєстру через Адміністративний портал працювати не буде.
Змінювати тему необхідно виключно в *ConfigMap* `registry-environment-js` та виконувати ручний рестарт подів порталу.
====
