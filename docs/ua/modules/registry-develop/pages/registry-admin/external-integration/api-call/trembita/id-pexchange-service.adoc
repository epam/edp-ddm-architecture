// use these attributes to translate captions and labels to the document's language
// more information: https://asciidoctor.org/docs/user-manual/#customizing-labels
// table of contents title
:toc-title: ЗМІСТ
:toc:
:experimental:
:example-caption: Приклад
:important-caption: ВАЖЛИВО
:note-caption: ПРИМІТКА
:tip-caption: ПІДКАЗКА
:warning-caption: ПОПЕРЕДЖЕННЯ
:caution-caption: УВАГА
// captions for specific blocks
:figure-caption: Figure
:table-caption: Таблиця
// caption for the appendix
:appendix-caption: Appendix
// how many headline levels to display in table of contents?
:toclevels: 5
// https://asciidoctor.org/docs/user-manual/#sections-summary
// turn numbering on or off (:sectnums!:)
:sectnums:
// enumerate how many section levels?
:sectnumlevels: 5
// show anchors when hovering over section headers
:sectanchors:
// render section headings as self referencing links
:sectlinks:
// number parts of a book
:partnums:

= Сервіс пошуку довідки ВПО (IDPexchangeService)

Сервіс `IDPexchangeService` надає можливість здійснити пошук у _Єдиній інформаційній базі даних про внутрішньо переміщених осіб_ (ЄІБДВПО) та отримати відомості щодо наявності довідки внутрішньо переміщеної особи (ВПО) відповідно до критеріїв пошуку через ШБО "Трембіта".

Пошук довідки ВПО в ЄІБДВПО здійснюється за критеріями:

* `RNOKPP` -- код РНОКПП;
* `UID` -- унікальний ідентифікатор довідки в реєстрі ВПО.

.запит у форматі JSON:
====
* запит за РНОКПП:
+
[source, json]
----
{
"method": "GET",
"url": "/idp/getCertificateByRNOKPP/3333333333",
"body": null
}
----
* запит за UID:
+
[source, json]
----
{
"method": "GET",
"url": "/idp/getCertificateByGUID/79cefcce20028d82fc1d6dda6a498da2",
"body": null
}
----
====

.відповь у форматі JSON:
====
[source, json]
----
{
  "person": {
    "idpSurname": "ІВАНОВ",
    "idpName": "ІВАН",
    "idpPatronymic": "ІВАНОВИЧ",
    "birthDate": "01.01.1979 00.00.00.000",
    "birthPlace": "хутір Ізбушенка, Луганської області",
    "RNOKPP": "3333333333",
    "gender": "Жінка",
    "documentType": "1",
    "documentSerie": "ЕК",
    "documentNumber": "633666",
    "documentDate": "13.11.1997 00.00.00.000",
    "documentIssuer": "Артемівським РВЛМУУМВС укр. в Луг. обл.",
    "regAddress": "ЛУГАНСЬКА ОБЛАСТЬ/М.ЛУГАНСЬК ЛУГАНСЬК ВУЛ.ПОГРАНИЧНА буд.0",
    "factAddress": "М.БАХМУТ ДОНЕЦЬКА ОБЛ. ВУЛ. МИРУ буд. 00 кв. 00",
    "certificateNumber": "1419-69164",
    "certificateDate": "02.09.2015 00.00.00.000",
    "certificateIssuer": "М.БАХМУТ ДОНЕЦЬКА ОБЛ.",
    "certificateState": "знята з обліку",
    "UID": "f895ad5fbbe66605979afb7e18847c1b"
  },
  "accompanied": []
}
----
====

.Опис структурних параметрів
|====
|_№_|	_Назва_|	_Опис_|	_Тип даних_|	_Обов’язкове поле_|	_Примітка_
6+|_Блок Person "Інформація про Заявника"_
|1.|		idpSurname      |	Прізвище ВПО    |	string|	Так|
|2.|		idpName         |	Ім’я ВПО        |	string|	Так|
|3.|		idpPatronymic   |	По батькові ВПО |	string|	Ні |
|4.|		birthDate       |	Дата народження |	date  |	Так|
|5.|		birthPlace|	Місце народження|	string|	Ні|	Текстове поле внесено користувачем
|6.|		RNOKPP|	РНОКПП|	string|	Так|	10 знаків з ведучим нулем
|7.|		gender|	Стать|	string|	Так|	('Жінка', 'Чоловік')
|8.|		documentType|	Тип документу що посвідчує особу|	Int|	Так|	1 – Паспорт зразка 1993
2 – Паспорт зразка 2016
3 – Свідоцтво про народження
99 – Інший документ
|9.|		documentSerie|	Серія документу|	string|	Так/Ні|	Так для типу документу 1,3 / Ні для документу 2,99
|10.|		documentNumber|	Номер документу|	string|	Так/Ні|	Так для типу документу 1,2,3 / Ні для документу 99
|11.|		documentDate|	Дата видачі документу|	date|	Ні|
|12.|		documentIssuer|	Орган який видав документ|	string|	Ні|	Текстове поле внесено користувачем
|13.|		regAddress|	Адреса зареєстрованого місця проживання|	string|	Так|
|14.|		factAddress|	Адреса фактичного місця проживання/перебування|	string|	Так|
|15.|		certificateNumber|	Номер довідки ВПО|	string|	Так|
|16.|		certificateDate|	Дата видачі довідки ВПО|	date|	Так|
|17.|		certificateIssuer|	Орган який видав довідку ВПО|	string|	Так|
|18.|		certificateState|	Статус довідки|	string|	Так|	('діюча', 'знята з обліку')
|19.|		UID|	Унікальний ідентифікатор довідки в реєстрі ВПО|	string|	Так|
6+| _Блок Accompanied "Інформація про особу для яких person визначений законним представником"_
|20.|		idpSurname|	Прізвище ВПО|	string|	Так|
|21.|		idpName|	Ім’я ВПО|	string|	Так|
|22.|		idpPatronymic|	По батькові ВПО|	string|	Ні|
|23.|		birthDate|	Дата народження|	date|	Так|
|24.|		birthPlace|	Місце народження|	string|	Ні|	Текстове поле внесено користувачем
|25.|		RNOKPP|	РНОКПП|	string|	Ні|	10 знаків з ведучим нулем
|26.|		gender|	Стать|	string|	Так|	('Жінка', 'Чоловік')
|27.|		documentType|	Тип документу що посвідчує особу|	Int|	Так|	1 – Паспорт зразка 1993
2 – Паспорт зразка 2016
3 – Свідоцтво про народження
99 – Інший документ
|28.|		documentSerie|	Серія документу|	string|	Так/Ні|	Так для типу документу 1,3 / Ні для документу 2,99
|29.|		documentNumber|	Номер документу|	string|	Так/Ні|	Так для типу документу 1,2,3 / Ні для документу 99
|30.|		documentDate|	Дата видачі документу|	date|	Ні|
|31.|		documentIssuer|	Орган який видав документ|	string|	Ні|	Текстове поле внесено користувачем
|32.|		regAddress|	Адреса зареєстрованого місця проживання|	string|	Так|
|33.|		factAddress|	Адреса фактичного місця проживання/перебування|	string|	Так|
|34.|		certificateNumber|	Номер довідки ВПО|	string|	Так|
|35.|		certificateDate|	Дата видачі довідки ВПО|	date|	Так|
|36.|		certificateIssuer|	Орган який видав довідку ВПО|	string|	Так|
|37.|		certificateState|	Статус довідки|	string|	Так|	('діюча')
|38.|		UID|	Унікальний ідентифікатор довідки в реєстрі ВПО|	string|	Так|
|====

[TIP]
====
Актуальну інформацію щодо необхідних ідентифікаторів сервісу та його постачальника, а також опис параметрів і WSDL, ви можете отримати за посиланнями:

* link:https://directory-test.trembita.gov.ua:8443/SEVDEIR-TEST/GOV/37567866/51_IDP_prod/IDPexchangeService?tab=1[Вебсервіс IDPexchangeService (тестове середовище)]
* link:https://directory-prod.trembita.gov.ua:8443/search?query=IDPexchangeService[Вебсервіс IDPexchangeService (промислове середовище)]
====