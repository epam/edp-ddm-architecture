:toc-title: ЗМІСТ
:toc: auto
:toclevels: 5
:experimental:
:important-caption:     ВАЖЛИВО
:note-caption:          ПРИМІТКА
:tip-caption:           ПІДКАЗКА
:warning-caption:       ПОПЕРЕДЖЕННЯ
:caution-caption:       УВАГА
:example-caption:           Приклад
:figure-caption:            Зображення
:table-caption:             Таблиця
:appendix-caption:          Додаток
:sectnums:
:sectnumlevels: 5
:sectanchors:
:sectlinks:
:partnums:

= Управління зовнішніми інтеграціями

== Загальні положення

Управління зовнішніми інтеграціями відіграє критичну роль у забезпеченні інформаційного обміну між різними системами та джерелами даних.

REST (Representational State Transfer) та SOAP (Simple Object Access Protocol) є двома основними протоколами взаємодії з іншими реєстрами та системами, що використовуються для передачі даних.

REST, що базується на протоколі HTTP, дозволяє взаємодіяти з іншими реєстрами на Платформі та зовнішніми системами шляхом передачі запитів та отримання відповідей у форматі JSON. +
SOAP, з іншого боку, використовує XML-схему для взаємодії з іншими системами, дозволяючи викликати методи й передавати параметри використовуючи певний набір правил.

Основні принципи інтеграції з іншими реєстрами та системами: ::

. Регламент реєстру не містить налаштувань, які залежать від "оточення"/екземпляра реєстру, щоб забезпечити однаковість налаштувань для всіх екземплярів.

. Регламент реєстру не містить конфіденційних даних ні в якій формі, щоб запобігти їх неправомірному використанню.

. Налаштування параметрів зовнішніх інтеграцій не дублюється та використовується централізовано, що забезпечує консистентність налаштувань.

. Додавання зовнішніх систем для інтеграції з реєстром не потребує ручних дій налаштування мережевих політик для забезпечення швидкої та безпечної інтеграції.

. Секрети з параметрами доступу до зовнішніх систем зберігаються у захищеному сховищі сервісу управління секретами `HashiCorp Vault`, щоб запобігти несанкціонованому доступу до цих даних.

. Адміністратор реєстру налаштовує інтеграції з іншими системами на рівні екземпляра реєстру в адміністративній панелі Control Plane, включаючи протокол інтеграції, адресу, протокол аутентифікації, секрети тощо.

. Адміністратор реєстру відповідає за ротацію секретів та параметрів доступу до зовнішніх систем.

. Адміністратор забезпечує мінімальну попередню конфігурацію на рівні регламенту для використання зовнішніх інтеграцій у бізнес-процесах.

. Міжреєстрова інтеграція через "Трембіту" здійснюється за допомогою типових розширень-конекторів, які містяться у реєстрі, і не вимагає додаткової конфігурації на рівні регламенту.

. Інтеграція зі сторонніми (3rd-party) системами потребує додаткової конфігурації на рівні регламенту, зокрема необхідно визначити перелік операцій та їх типів, які використовує реєстр через типове інтеграційне розширення-конектор *Connect to external system* (*REST*-конектор).

+
[IMPORTANT]
====
Для версій Платформи 1.9.3 та вище основні налаштування виконуються на рівні екземпляра реєстру у консолі Control Plane.

Для версій 1.9.2 та нижче усі налаштування виконуються на рівні регламенту реєстру.
====

[NOTE]
====
Налаштування взаємодії із зовнішніми системами можливе лише при редагуванні реєстру.

За замовчуванням при розгортанні реєстру, створюється три не налаштовані точки для сервісів ШБО "Трембіта" й одна для зовнішньої системи -- "Дія".
====

== Типи інтеграційної взаємодії

Платформа дозволяє гнучко інтегруватися з іншими реєстрами та системами й підтримує 2 типи взаємодії:

*SOAP API* ::
Взаємодія через інтерфейси ШБО "Трембіта" за допомогою SOAP-інтеграційних конекторів. Це основний тип інтеграційної взаємодії.
+
Екземпляр ШБО встановлюється один для всіх реєстрів, у тому ж центрі обробки даних (ЦОД), що й екземпляр Платформи. Кожна подібна зовнішня система повинна мати встановлений екземпляр ШБО на своїй стороні та бути зареєстрованим учасником єдиного захищеного простору, який називають СЕВ ДЕІР "Трембіта", де основним протоколом інтеграційної взаємодії є SOAP.

*REST API* ::
Взаємодія з іншими реєстрами на Платформі та зовнішніми системами поза її межами через REST-інтерфейси. Це додатковий тип підключення розширення можливостей інтеграційної взаємодії.

[#exchange-data-trembita]
=== Обмін даними за допомогою SOAP через програмний інтерфейс "Трембіта"

ШБО "Трембіта" є програмним інтерфейсом, який дозволяє взаємодіяти з реєстрами, які до нього підключені, зокрема ЄДР, ДРАЦС, або ЄІБДВПО.

Загальний механізм взаємодії з реєстрами через ШБО "Трембіта" представлено на діаграмі нижче.

.Загальний механізм взаємодії з реєстрами через ШБО "Трембіта"
image::registry-admin/external-integration/cp-integrate-trembita/trembita-integration.png[]

Для успішної взаємодії з реєстрами через ШБО "Трембіта", необхідно дотримуватися вимог щодо формату даних та забезпечити їх правильну обробку в системі. Обмін даними між реєстрами-учасниками СЕВ ДЕІР "Трембіта" відбувається за протоколом SOAP (Simple Object Access Protocol) у форматі XML.

SOAP-взаємодія між реєстрами через ШБО "Трембіта" є надійним і безпечним методом передачі даних. Дані передаються у зашифрованому вигляді, що забезпечує їх конфіденційність. Також ШБО "Трембіта" дозволяє перевіряти правдивість запитів, що запобігає можливим атакам.

Щоб налаштувати взаємодію з реєстрами через ШБО "Трембіта", Вам необхідно: ::

. Зареєструвати підсистему нового реєстру на ШБО "Трембіта" Платформи:

* Зареєструвати свою організацію в системі "Трембіта" та вказати необхідні реквізити.
* Узгодити та отримати доступ до необхідних сервісів СЕВ ДЕІР "Трембіта".
+
TIP: Детальніше -- див. на сторінці xref:registry-admin/external-integration/registration-subsystem-trembita/registration-subsystem-trembita.adoc[]
+
Якщо підсистема зареєстрована, перейдіть до наступного кроку.

. Налаштувати взаємодію з реєстрами, до яких Ви отримали доступ, в адміністративній панелі *Control Plane*.
+
TIP: Детальніше -- див. на сторінці xref:registry-admin/external-integration/cp-integrate-trembita.adoc[].

. Змоделювати обмін даними з іншими реєстрами та їх сервісами через ШБО "Трембіта" у бізнес-процесах за допомогою SOAP-інтеграційних конекторів.
+
TIP: Детальніше -- див. на сторінці xref:bp-modeling/external-integration/api-call/connectors-external-registry.adoc[].

[#exchange-data-ext-system]
=== Обмін даними з іншими системами за допомогою REST

Інтеграційна REST-взаємодія реєстрів з іншими реєстрами на Платформі та зовнішніми системами означає можливість передачі даних з одного реєстру в інший або між зовнішніми системами за допомогою *REST*-запитів.

*REST (Representational State Transfer)* -- це стиль архітектури програмного забезпечення для створення вебсервісів. У REST-архітектурі існує ряд обмежень, які забезпечують взаємодію між клієнтом та сервером. REST використовує *HTTP*-протокол для передачі даних.

Така взаємодія використовує програмні інтерфейси *REST API* та HTTP-запити для отримання інформації. Інтерфейс може забезпечити доступ до функціональності реєстру, а також надати можливість зчитувати та змінювати дані. Передача даних здійснюється у форматі *JSON*. Дані можуть бути передані в обидві сторони -- від зовнішньої системи до реєстру або від реєстру до зовнішньої системи.

Щоб налаштувати взаємодію з іншими системами за допомогою REST, Вам необхідно: ::
+
. Налаштувати взаємодію з реєстрами в адміністративній панелі *Control Plane*.
+
TIP: Детальніше -- див. на сторінці xref:registry-admin/external-integration/cp-integrate-ext-system.adoc[].

. Виконати мінімальні налаштування на рівні регламенту.
+
TIP: Детальніше -- див. на сторінці xref:registry-develop:bp-modeling/bp/rest-connector.adoc#regulations-configuration[REST-конектор: налаштування регламенту].

. Змоделювати обмін даними з іншими системами у бізнес-процесах за допомогою інтеграційного REST конектора *Connect to external system*.
+
TIP: Детальніше -- див. на сторінці xref:registry-develop:bp-modeling/bp/rest-connector.adoc#bp-modeling[REST-конектор: моделювання у бізнес-процесі].

NOTE: Розгорнуту інформацію щодо можливостей REST-інтеграції ви можете отримати на сторінці xref:registry-admin/external-integration/rest-api-no-trembita.adoc[].

== Додаткові відеоматеріали

video::lRLCfFwWXxk[youtube, width=680, height=380]