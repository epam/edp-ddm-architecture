= Завдання 4. Налаштування ключів та сертифікатів цифрового підпису
include::platform:ROOT:partial$templates/document-attributes/default-set-ua.adoc[]

== Мета завдання

Виконання цього завдання має на меті: ::

* [*] Навчитись оновлювати ключі та сертифікати цифрового підпису для реєстру.

== Передумови

. Перед оновленням ключів та сертифікатів цифрового підпису завантажте наступні файли:

* Сертифікати АЦСК тестового середовища: https://iit.com.ua/download/productfiles/CAs.Test.All.json.
* Сертифікати АЦСК тестового середовища: https://iit.com.ua/download/productfiles/CACertificates.Test.All.p7b.

. Ознайомтеся з інструкцією
 xref:admin:registry-management/system-keys/control-plane-registry-keys.adoc[].

== Процес виконання завдання

=== Оновлення ключа системного підпису

Для оновлення ключа системного підпису використовуйте інструкцію, наведену нижче інформацію та попередньо завантажені файли.

. Заповніть наступні поля відповідними значеннями:
+
--
* +++<b style="font-weight: 600">Тип носія</b>+++: `Файловий носій`;
* +++<b style="font-weight: 600">Файловий ключ (розширення .dat)</b>+++: `Key-6.dat`;
* +++<b style="font-weight: 600">АЦСК, що видав ключ</b>+++: `Тестовий надавач електронних довірчих послуг`;
* +++<b style="font-weight: 600">Пароль до файлового ключа</b>+++: `12345`;
* +++<b style="font-weight: 600">Перелік дозволених ключів</b>+++:  заповніть, використовуючи дані з файлу `allowed-keys.yml`.

--
+
image:registry-develop:registry-admin-study/task-5/task-5-01.png[]
+
[NOTE]
====
* +++<b style="font-weight: 600">Емітент ключа </b>+++:  -- `issuer` у файлі _allowed-keys.yml_;
* +++<b style="font-weight: 600">Серійний номер ключа </b>+++:  -- `serial` у файлі _allowed-keys.yml_.

image:registry-develop:registry-admin-study/task-5/task-5-02.png[]
====

. Додайте декілька дозволених ключів. Для цього натисніть кнопку
`+++<b style="font-weight: 600">Додати ключ</b>+++`.
+
image:registry-develop:registry-admin-study/task-5/task-5-03.png[]
+
NOTE: Результатом буде заповнення всіх полів та вказані 3 дозволені ключі.
+
image:registry-develop:registry-admin-study/task-5/task-5-04.png[]

. Підтвердьте зміни, відкрийте +++<b style="font-weight: 600">Запити на оновлення</b>+++ та схваліть новий запит.
+
image:registry-develop:registry-admin-study/task-5/task-5-05.png[]
+
NOTE: Успішним результатом оновлення буде завершення пайплайну *MASTER-Build-`<registry-name>`* зі статусом *`SUCCESS`*, де `<registry-name>` -- назва вашого реєстру.
+
image:registry-develop:registry-admin-study/task-5/task-5-06.png[]

=== Оновлення даних для перевірки підписів

Щоб оновити дані для перевірки підписів, виконайте наступні кроки:

. Перейдіть на вкладку `+++<b style="font-weight: 600">Дані для перевірки підписів</b>+++`;

. Оновіть дані, використовуючи попередньо завантажені файли.
+
image:registry-develop:registry-admin-study/task-5/task-5-07.png[]
+
--
* У полі +++<b style="font-weight: 600">Публічні сертифікати АЦСК (CACertificate.p7b)</b>+++ завантажте сертифікат *_CACertificates.p7b_*.
* У полі +++<b style="font-weight: 600">Перелік АЦСК (розширення .json)</b>+++   завантажте сертифікат *_CAs.json_*.
--
+
NOTE: Успішним результатом буде підвантаження двох файлів.
+
image:registry-develop:registry-admin-study/task-5/task-5-08.png[]

. Підтвердьте зміни, відкрийте +++<b style="font-weight: 600">Запити на оновлення</b>+++ та схваліть новий запит.
+
image:registry-develop:registry-admin-study/task-5/task-5-05.png[]
+
NOTE: Успішним результатом оновлення буде завершення пайплайну *MASTER-Build-`<registry-name>`* зі статусом *`SUCCESS`*, де `<registry-name>` -- назва вашого реєстру.
+
image:registry-develop:registry-admin-study/task-5/task-5-09.png[]
+
image:registry-develop:registry-admin-study/task-5/task-5-10.png[]

