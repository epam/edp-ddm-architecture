= Моделювання компонента Textfield для вводу номера телефону (Україна)
include::platform:ROOT:partial$templates/document-attributes/default-set-ua.adoc[]

== Загальний опис

Компонент *Textfield* розширено та оптимізовано спеціально для введення номерів телефону в українському форматі.

Тепер користувачам реєстрів доступні такі функції: ::

* [*] _Референтний приклад із маскою для телефонів_: Тепер моделювальники регламенту можуть використовувати референтний приклад для створення полів введення з готовою маскою номера телефону, що відповідає українському формату: `+380(00)123-4567`.

* [*] _Видалення службових символів_: компонент *Textfield* тепер можна налаштувати таким чином, щоб він автоматично видаляв всі службові символи та розділові знаки, передаючи лише чисті цифри.

Ці зміни не лише роблять процес введення номерів телефону зручнішим та інтуїтивнішим, але й підвищують точність обробки даних.

Також ми розробили спеціалізований приклад для моделювання форм з полями вводу номерів телефонів у форматі, що використовується в Україні. Це забезпечує швидше та зручніше створення користувацьких інтерфейсів. Також ми впровадили функціонал, який дозволяє розробникам обирати формат відображення та відправлення введених номерів з UI-форми до Фабрики даних.

== Налаштування форми з маскою номера телефону та форматом відправлення даних

. Увійдіть до *Кабінету адміністратора регламентів*.
. Відрийте розділ UI-форми та створіть нову або відредагуйте наявну форму.
. У налаштуваннях форми відкрийте вкладку *Конструктор* та знайдіть *Оновлені* компоненти.
. Перетягніть до панелі моделювання та налаштуйте компонент *Text Field*.
+
TIP: Детальніше про налаштування компонента *Text Field* ви можете знайти на сторінці xref:registry-develop:bp-modeling/forms/components/text-field.adoc[].
+
image:bp-modeling/forms/components/textfield/trim-spaces/text-field-trim-spaces-1.png[]

. На вкладці *Display* налаштуйте наступні параметри:

.. У полі *Label* введіть назву поля користувацької форми -- `Номер телефону`.
.. У полі *Placeholder* встановіть плейсхолдер для поля *Номер телефону*. Цей плейсхолдер буде показаний, коли поле порожнє.
.. У полі *Input Mask* введіть маску вводу для номера телефону. Наприклад:
+
----
+380(99)999-9999
----
+
* `+380()` -- незмінна частина маски вводу.
* Решта символів будуть заповнюватися користувачами при введенні номера.
+
[TIP]
====
[%collapsible]
.Що таке Input mask?
=====
*_Input mask_* (_українською -- "маска вводу"_) -- це функціональність, яка допомагає користувачам при введенні даних, забезпечуючи дотримання попередньо визначеного формату. Це особливо корисно при введенні даних, які вимагають строгої структури, таких як дати, числові значення, номери телефонів та інше. Маска вводу спрощує процес заповнення форм, оскільки користувачі можуть бачити візуальні підказки щодо очікуваного формату даних, що зменшує ймовірність помилок та покращує загальний досвід користувача.
=====
====
+
image:best-practices/forms/enter-phone-number/enter-phone-number-01.png[]
+
При наведенні на підказку до поля, можна побачити опис налаштувань маски.
+
image:best-practices/forms/enter-phone-number/enter-phone-number-02.png[]
+
. Перевірте, як виглядатиме поле перед відправленням до БД.

.. Користувачі бачитимуть поле вводу наступним чином:
+
image:best-practices/forms/enter-phone-number/enter-phone-number-03.png[]

.. При заповненні значення і підтвердженні форми, значення номера телефону буде передано Фабриці даних у наступному вигляді:
+
image:best-practices/forms/enter-phone-number/enter-phone-number-04.png[]
+
.Запит з UI-форми до Фабрики даних. Передача номера у форматі зі спецсимволами
[source,json]
----
{
  "phoneNumber": "+380(50)123-4578",
  "submit": true
}
----

. Для видалення спецсимволів з номера перед відправленням, перейдіть на вкладку *Data* й активуйте параметр *Phone Input*.
+
NOTE: За замовчуванням параметр *Phone Input* вимкнений.
+
image:best-practices/forms/enter-phone-number/enter-phone-number-05.png[]
+
Активувавши чек-бокс, після введення даних і підтвердження відправлення форми, значення номера телефону буде передано Фабриці даних у наступному вигляді:
+
.Запит з UI-форми до Фабрики даних. Передача номера у форматі без спецсимволів
[source,json]
----
{
  "phoneNumber": "380501234578",
  "submit": true
}
----
+
NOTE: Це налаштування необхідно використовувати, якщо дані, внесені на формі, надалі будуть опрацьовувати інші бізнес-процеси або зовнішні системи.

== Референтний бізнес-процес

[TIP]
====
[%collapsible]
.Де можна знайти приклад референтного бізнес-процесу?
=====
include::registry-develop:partial$snippets/demo-reg-reference-examples-ua.adoc[]

Приклад BPMN-схеми процесу буде доступний у регламенті демо-реєстру за пошуком по ключовим словам -- *_reference-ua-phone-number_*. Назви форм ви можете знайти всередині відповідних користувацьких задач (User Task) бізнес-процесу у полі *`Form key`*.

.Загальний вигляд референтного процесу у Кабінеті адміністратора регламентів
image::best-practices/forms/enter-phone-number/enter-phone-number-1.png[]
=====
====

Розгляньмо референтний приклад бізнес-процесу для внесення та перегляду номерів телефону за визначеною маскою. Ми не будемо детально зупинятися на моделюванні, адже процес є доволі простим, натомість пропонуємо розглянути, як працює змодельована функціональність з погляду кінцевих користувачів. Для цього:

. Увійдіть до *Кабінету користувача*.
. Відкрийте *Доступні послуги* > *Бізнес-процеси зі стилізованими компонентами для України* > *Моделювання номера телефону для України*.
+
image:best-practices/forms/enter-phone-number/enter-phone-number-2.png[]

. Запустіть бізнес-процес.
+
Ви побачите форму для внесення двох номерів телефону в заданому форматі. Для кожного з полів в *Input Mask* встановлено український формат номера, але чек-бокс *Phone Input* активовано лише для першого поля.

. Внесіть довільні дані натисніть *`Далі`*. Наприклад:
+
----
+380(50)114-4777
+380(67)114-4255
----

. У результаті формується наступний `POST`-запит на ресурс:
+
.Запит (Request) форми із введеними номерами
====

.Хост (Host)
----
test.domain.com
----

.URL запита
----
POST /officer/api/user-task-management/task/15eac83c-ceea-467b-87e3-06962787e1a0/complete
----

* `15eac83c-ceea-467b-87e3-06962787e1a0` -- ID користувацької задачі у бізнес-процесі.

.Тіло запита (Request body)
[source,json]
----
{
  "data": {
    "phoneNumber": "380501144777",
    "additionalPhoneNumber": "+380(67)114-4255",
    "submit": true
  }
}
----
====
+
.Відповідь (Response)
====

.Status
----
200 OK
----

.Тіло відповіді (Response body)
[source,json]
----
{
  "id": "15eac83c-ceea-467b-87e3-06962787e1a0",
  "processInstanceId": "861fa6bc-8eb5-11ee-8566-06962787e1a0",
  "rootProcessInstanceId": "861fa6bc-8eb5-11ee-06962787e1a0",
  "rootProcessInstanceEnded": false,
  "variables": {}
}
----
====
+
image:best-practices/forms/enter-phone-number/enter-phone-number-3.png[]
+
Зіставимо значення, введені на формі, із параметрами запита до Фабрики даних. Бачимо, що для першого номера з форми відправляються лише цифри, для другого -- цифри зі спецсимволами.

. На наступній формі підпишіть введені дані КЕП.

. Далі бізнес-процес зберігає дані до БД за допомогою делегата *Create entity in data factory*.
+
image:best-practices/forms/enter-phone-number/enter-phone-number-4.png[]

. На наступній формі ви отримаєте значення номерів, збережене до Фабрики даних із попередньої форми. Для першого поля, з якого в запиті відправлялись лише цифри, налаштовано маску та активовано чек-бокс *Phone Input*. Тому тепер на формі бачимо, що обидва значення, збережені у різному вигляді, відображаються в українському форматі номера телефону.
+
image:best-practices/forms/enter-phone-number/enter-phone-number-5.png[]

== Пов'язані сторінки

* xref:registry-develop:bp-modeling/forms/components/text-field.adoc[]