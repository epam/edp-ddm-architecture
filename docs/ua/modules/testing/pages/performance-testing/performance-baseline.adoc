= Поточний стан тестування навантаження системи
include::platform:ROOT:partial$templates/document-attributes/default-set-ua.adoc[]

== Опис поточного тестування навантаження

=== Поточні сценарії

Як регламент для тестування навантаження на даний використовується certified-laboratories-registry-regulation.

Поточні тести покривають наступні сценарії:

[options="header"]
|===

| Сценарій | Сервіси які задієються

| Створення простої сутності
| registry-rest-api, registry-kafka-api, bpms, digital-signature-ops, user-task-management, form-schema-provider, form-submission-validation

| Оновлення простої сутності
| registry-rest-api, registry-kafka-api, bpms, digital-signature-ops, user-task-management, form-schema-provider, form-submission-validation

| Читання простої сутності
| registry-rest-api, bpms, digital-signature-ops, user-task-management, form-schema-provider, form-submission-validation

| Критерій з пошуком за типом starts-with
| registry-rest-api

| Критерій з пошуком за типом contains
| registry-rest-api

| Критерій з пошуком за типом equals
| registry-rest-api

| Отримання історії виконання БП
| process-history-service, bpms

| Авторизація
| Keyckoak

| Логаут
| Keycloak


|===

=== Технологічний стек

[options="header"]
|===

| Назва утиліти | Опис

| Apache JMeter
| Утиліта для написання сценаріїв тестів навантаження та їх запуску

| Carrier
| UI агрегатор репортів з перформанс тестів


|===

== Конвенція написання степів

Для більш зручного написання степів і подальшого їх аналізу виведена наступна конвенція

[options="header"]
|===
| Логічна група | Патерн URL | Патерн кроку |  Приклад назви кроку

.4+| Критерії пошуку
| ${external-rest-api-route}/api/gateway/data-factory/${sc-name}
.4+| ${ext-system\|public-api\|trembita\|portal}-sc-${get\|post}-${sc-name}
| ext-system-sc-get-koatuu-obl-equals-name

| ${public-rest-api-route}/api/public/data-factory/${sc-name}
| public-api-sc-get-koatuu-obl-equals-name

| ${registry-soap-api-route}/ws
| trembita-sc-get-koatuu-obl-equals-name

| ${registry-rest-api-route}/${sc-name}
| portal-sc-get-koatuu-obl-equals-name

.3+| Процес
| ${external-rest-api-route}/business-process/api/${start\|start-form}
.3+| ${ext-system\|trembita\|portal}-bp-${bpKey}-${start\|start-form}
| ext-system-bp-get-lab-start

| ${bp-webservice-gateway-route}/ws
| trembita-bp-get-lab-start

| ${user-process-management-route}/${start\|start-form}
| portal-bp-get-lab-start-form

.6+| Процеси
| ${user-process-management-route}/process-definitions
.6+| portal-${method}-${action}
| portal-get-process-definitions

| ${user-process-management-route}/process-definitions/count
| portal-get-process-definitions-count

| ${user-process-management-route}/history/process-instances
| portal-get-history-process-instances

| ${user-process-management-route}/history/process-instances/count
| portal-get-history-process-instances-count

| ${user-process-management-route}/runtime/process-instances
| portal-get-runtime-process-instances

| ${user-process-management-route}/runtime/process-instances/count
| portal-get-runtime-process-instances-count

.3+| Задача
| ${user-task-management-route}/${process-instance-id}/${task-name}/complete
.3+| portal-${bpName}-${taskName}-${complete\|get-task\|sign-form}
| portal-create-lab-fill-laboratory-data-complete

| ${user-task-management-route}/${process-instance-id}/${task-name}/task
| portal-create-lab-fill-laboratory-data-get-task

| ${user-task-management-route}/${process-instance-id}/${task-name}/sign-form
| portal-create-lab-fill-laboratory-data-sign-form

.4+| Задачі
| ${user-task-management-route}/task
.4+| portal-${method}-${tasks\|tasks-count}
| portal-get-tasks

| ${user-task-management-route}/task/count
| portal-get-tasks-count

| ${user-task-management-route}/history/task
| portal-get-history-tasks

| ${user-task-management-route}/history/task/count
| portal-get-history-tasks-count

| Форма
| ${form-schema-provider}/${form-name}/form-by-key
| portal-${method}-${action}
| portal-get-form-by-key

|===
