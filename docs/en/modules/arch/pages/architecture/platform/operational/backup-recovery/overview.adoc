= Backup and restore subsystem
include::platform:ROOT:partial$templates/document-attributes/arch-set-en.adoc[]

include::platform:ROOT:partial$admonitions/language-en.adoc[]

== Overview

//Підсистема, що забезпечує безпечне резервне копіювання та відновлення реєстрових та центральних компонентів Платформи, виконання аварійного відновлення Реєстру.
Subsystem that provides safe backup copy and restore operations for Registry and central Platform components, and performs Registry disaster recovery.

== Subsystem functions

//* Безпечне резервне копіювання та відновлення центральних і реєстрових компонентів Платформи реєстрів
* Safe backup copy and restore operations for Registry and central Platform components
//* Безпечне резервне копіювання та відновлення даних реєстрів
* Safe backup copy and restore operations for Registry data
//* Відновлення центральних та реєстрових компонентів Платформи реєстрів
* Recovery of Registry and central Platform components
//* Виконання аварійного відновлення функціонування Платформи реєстрів
* Registry operation disaster recovery
//* Міграція ресурсів реєстру на інший екземпляр Платформи реєстрів
* Registry resources migration to another Registry Platform instance

== Subsystem technical design

//На даній діаграмі зображено компоненти, які входять в _Підсистему резервного копіювання та відновлення_ та їх взаємодію з іншими підсистемами.
The following diagram displays the components that are included in _Backup and restore subsystem_, and their interaction with other subsystems within functional scenarios realization.

image::architecture/platform/operational/backup-recovery/backup-subsystem.drawio1.svg[width=800,float="center",align="center"]

== Subsystem components


////
|===
|Назва компоненти|Namespace|Deployment|Походження|Репозиторій|Призначення

|_Сервіс резервного копіювання та відновлення_
|`velero`
|`velero`
|3rd-party
|https://github.com/epam/edp-ddm-backup-management[github:/epam/edp-ddm-backup-management]
|Компонент резервного копіювання та відновлення ресурсів у кластері

|_Служба відновлення обʼєктів S3_
|`velero`
|`restore-job`
|origin
|https://github.com/epam/edp-ddm-backup-management[github:/epam/edp-ddm-backup-management]
|Служба відновлення обʼєктів S3 реєстру

|_Служба реплікації обʼєктів S3_
|`velero`
|`replication-job`
|origin
|https://github.com/epam/edp-ddm-backup-management[github:/epam/edp-ddm-backup-management]
|Служба резервної реплікації обʼєктів S3 реєстру
|===
////

|===
|Component name|Namespace|Deployment|Source|Repository|Function

|_Backup and recovery service_
|`velero`
|`velero`
|3rd-party
|https://github.com/epam/edp-ddm-backup-management[github:/epam/edp-ddm-backup-management]
|The component for cluster data backup and recovery

|_S3 objects recovery service_
|`velero`
|`restore-job`
|origin
|https://github.com/epam/edp-ddm-backup-management[github:/epam/edp-ddm-backup-management]
|Recovery service for the S3 objects of the Registry

|_S3 objects replication service_
|`velero`
|`replication-job`
|origin
|https://github.com/epam/edp-ddm-backup-management[github:/epam/edp-ddm-backup-management]
|Replication service for the S3 objects of the Registry
|===


//== Технологічний стек
== Technological stack

//При проектуванні та розробці підсистеми, були використані наступні технології:
The following technologies were used in system design and development:

* xref:arch:architecture/platform-technologies.adoc#velero[Velero]
* xref:arch:architecture/platform-technologies.adoc#okd[OKD]
* xref:arch:architecture/platform-technologies.adoc#bash[bash]

//== Атрибути якості підсистеми
== Subsystem quality attributes

=== _Reliability_
//Підсистема резервного копіювання та відновлення розроблена із забезпеченням надійності створення резервних копій та надає можливість виконання резервного копіювання та відновлювальних операцій систематично та за потребою.
Backup and restore subsystem was designed to provide reliable creation of backup copies, and allows for the use of backup and recovery operations systematically, and on demand.

=== _Scalability_
//Підсистема резервного копіювання та відновлення має можливість працювати з великими обсягами даних реєстрів та Платформи та постійно зростаючими обʼємами даних.
Backup and restore subsystem can operate with large volumes of Registry and Platform data, as well as continuously growing amounts of data.

=== _Recoverability_
//Підсистема резервного копіювання та відновлення надає Платформі реєстрів можливість аварійно відновити дані реєстру та Платформи у випадку відмови або при виникненні нештатної ситуації.
Backup and restore subsystem allows the Registry Platform to recover Platform and Registry data in case of failure, or unplanned situations.

