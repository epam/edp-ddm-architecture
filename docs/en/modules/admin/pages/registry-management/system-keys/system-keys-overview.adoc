:toc-title: On this page:
:toc: auto
:toclevels: 5
:experimental:
:sectnums:
:sectnumlevels: 5
:sectanchors:
:sectlinks:
:partnums:

//= Налаштування ключів та сертифікатів цифрового підпису
= Configuring digital signature keys and certificates

//== Загальний опис
== Introduction

//Ключ цифрового підпису `*.dat*` та сертифікат підпису *`CA`* -- це два різних компоненти механізму підписання даних.

A `*.dat*` digital signature key and *`CA`* certificate are two different components of the data signing method.

//[.underline]#Ключ цифрового підпису *`.dat*`# -- це файл, який містить приватний ключ, що використовується для підпису файлів, драйверів та іншого програмного забезпечення. Ключ системного підпису _.dat_ зазвичай зберігається в захищеному місці на комп'ютері розробника програмного забезпечення і не передається іншим користувачам.

[.underline]#A *`.dat*` digital signature key# is a file that contains a private key used to sign files, drivers, and other software. A _.dat_ system signature key is usually securely stored on the software developer's computer and not shared with other users.

//[.underline]#Сертифікат підпису *CA (Certificate Authority)*# -- це електронний документ, який містить інформацію про публічний ключ та інші відомості про власника сертифіката, такі як назва компанії, дата видачі, термін дії тощо. Сертифікати підпису CA використовуються для підтвердження автентичності підписувачів програмного забезпечення.

[.underline]#A *CA (Certificate Authority)* certificate# is an electronic document containing information about the public key and the certificate owner, such as their company name, date of issue, and expiration date. CA certificates are used to verify the authenticity of software signers.

[#open-key-sign-mechanism]
//=== Механізм підписання даних відкритим ключем
=== Signing data with a public key

//[.underline]#Механізм підпису даних відкритим ключем# -- це криптографічний метод, який використовується для забезпечення цілісності, автентичності, конфіденційності та правдивості даних. У цьому методі використовується пара ключів: [.underline]#приватний ключ# та [.underline]#відкритий ключ#. Ключі генеруються уповноваженими органами -- акредитованими центрами сертифікації ключів (АЦСК), які мають відповідні дозволи та ліцензії від держави. Емітентами ключів можуть виступати банки, державні реєстратори та інші уповноважені установи, які проходять обов'язкову процедуру аудиту та сертифікації. Це забезпечує високий рівень довіри до ключів та їх використання.

[.underline]#Public key data signing# is a cryptographic method used to ensure data integrity, authenticity, confidentiality, and veracity. This method uses a pair of keys: a [.underline]#private key# and a  [.underline]#public key#. Keys are generated by certificate authorities licensed by the state (such as Accredited Key Certification Centers in Ukraine, for instance). Keys may also be issued by banks, state registrars, and other authorized organizations that go through mandatory audits and certifications. This approach ensures high level of trust in the keys and their use.

//Алгоритм підпису даних відкритим ключем наступний: ::
Here is how signing data with a public key works: ::

//* Створюються дані (повідомлення), які потрібно підписати.
* A message that needs to be signed is created.
//* Обчислюється геш-значення даних за допомогою геш-функції.
* The hash value of the data is calculated using a hash function.
//* Отримане геш-значення шифрується за допомогою приватного ключа.
* The resulting hash value is encrypted using a private key.
//* Цифровий підпис додається до повідомлення.
* A digital signature is added to the message.
+
//Отримане повідомлення із цифровим підписом може бути перевірено за допомогою відкритого ключа.
The digitally signed message can be verified using the public key.

//Алгоритм перевірки підпису наступний: ::
Here is how the signature is verified: ::

//* Цифровий підпис розшифрується з використанням відкритого ключа, щоб отримати геш-значення.
* The digital signature is decrypted using the public key to obtain the hash value.
//* Обчислюється геш-значення оригінальних даних.
* The hash value of the original data is calculated.
//* Обчислені геш-значення порівнюються. Якщо вони збігаються, то це означає, що підпис є валідним, і що дані не були змінені після підписання.
* The calculated hash values are compared. If they match, the signature is valid, and data has not been modified after signing.

[#digital-signature-ops]
//=== Операції з цифровими підписами на Платформі
=== How the Platform works with digital signatures

//За операції з ключами на Платформі реєстрів відповідає _підсистема цифрових підписів_, а саме [.underline]#Сервіс цифрових підписів# (`*digital-signature-ops*`), який реалізує пакет операцій з накладання та перевірки цифрових печаток, а також перевірки цифрових підписів для забезпечення контролю незмінності даних при міжсервісній взаємодії за допомогою спеціалізованих криптомодулів. Сервіс працює на базі криптографічної бібліотеки цифрового підпису `IIT Java digital signature` від Інституту інформаційних технологій (IIT).

//TODO: IIT = ua-specific
All operations with keys on the Platform are handled by the digital signature subsystem, namely the digital signature service (`*digital-signature-ops*`). This service performs a set of operations for applying and verifying digital seals, as well as verifying digital signatures to ensure data immutability during cross-service interactions using specialized crypto modules. In Ukraine, the service is based on the `IIT Java digital signature` cryptographic library provided by the Institute of Information Technologies (IIT).

//Сервіс цифрових підписів надає можливість: ::
Digital signature service enables the following: ::

//* отримувати дані власника цифрового підпису;
* Receive information about the owner of a digital signature.
//* перевіряти КЕП, накладений на документ посадовою особою та отримувачем послуг, а також приналежність користувачу накладеного цифрового підпису;
* Check the Qualified Electronic Signature (QES) used to sign the document by an officer and service recipient.
* Check whether the applied digital signature belongs to the user.
//* накладати системний цифровий підпис (цифрову печатку реєстру) на дані, або цифровий документ;
* Apply a system digital signature, or registry digital seal, to data or an electronic document.
//* перевіряти приналежність накладеної цифрової печатки реєстру.
* Check whether the applied digital seal belongs to the registry.

//== Типи цифрових ключів на Платформі
== Digital key types used on the Platform

//Можна виділити 3 типи цифрових ключів, що використовуються на Платформі. Залежно від рівня їх використання, ключі цифрового підпису можна поділити на:

There are three types of digital keys used on the Platform. Depending on which level they are used on, digital signature keys can be divided into these groups:

//* ключі цифрового підпису Платформи (Платформі ключі);
//TODO: ПлатформНі? (тут і далі)
* Platform digital signature keys (Platform keys)
//* ключі цифрового підпису Реєстру (Реєстрові ключі);
* registry digital signature keys (registry keys)
//* ключі підписання даних користувачами реєстру (КЕП).
* user data signature keys (QES)

//=== Платформі ключі цифрового підпису
=== Platform digital signature keys

//Платформі ключі цифрового підпису використовуються для наступних операцій: ::
Platform digital signature keys are used in these operations: ::
//TODO: Змінив ці списки з нумерації на буліти, тому ще це перелік, а не послідовність кроків

//. Ініціалізація (запуск) поди `*digital-signature-ops*` (криптосервіс) для сервісу ідентифікації та автентифікації користувачів Keycloak.
* Starting the `*digital-signature-ops*` cryptoservice pod for the Keycloak user identification and authentication service.
//. Автентифікація через зовнішніх провайдерів. Наприклад, для шифрування даних при вході до системи через *`id.gov.ua`*.
* Authenticating through external providers -- for example, to encrypt data when signing in via *`id.gov.ua`*.

//Налаштувати ключі можна в інтерфейсі адміністративної панелі *Control Plane*.
You can configure the keys in the *Control Plane* admin console.

[TIP]
====
//Детальніше про налаштування ключів реєстру ви можете переглянути на сторінці xref:admin:registry-management/system-keys/control-plane-platform-keys.adoc[].
//TODO: Мабуть, ключів Платформи, а не реєстру?
//TODO: Change link to en version
To learn more about configuring Platform keys, see xref:admin:registry-management/system-keys/control-plane-platform-keys.adoc[].
====

//=== Реєстрові ключі цифрового підпису
=== Registry digital signature keys

//Реєстрові ключі системного підпису використовуються для наступних операцій: ::
Registry digital signature keys are used in these operations: ::

//. Ініціалізація (запуск) поди `*digital-signature-ops*` (криптосервіс) для реєстру.
* Starting the `*digital-signature-ops*` cryptoservice pod for the registry.
//. _(Цифрова печатка)_ Підписання даних, які необхідно зберегти із бізнес-процесу (BPMS) до Фабрики даних реєстру.
* _(Digital seal)_ Signing the data that needs to be saved from the business process management system (BPMS) to the registry's data factory.
//. _(Цифрова печатка)_ Підписання даних документів, які генеруються системою, для користувачів реєстру. Наприклад, витяги тощо.
* _(Digital seal)_ Signing the documents that the system generated for registry users, such as excerpts.

//Налаштувати ключі можна в інтерфейсі адміністративної панелі *Control Plane* при розгортанні, або редагуванні реєстру.

You can configure the keys in the *Control Plane* admin console when deploying or editing a registry.

[TIP]
====
//Детальніше про налаштування ключів реєстру ви можете переглянути на сторінці xref:admin:registry-management/system-keys/control-plane-registry-keys.adoc[].
//TODO: Change link to en version
To learn more about configuring registry keys, see xref:admin:registry-management/system-keys/control-plane-registry-keys.adoc[].
====

//=== Ключі підписання даних користувачами (КЕП)
=== User data signature keys (QES)

//Ключі підписання даних користувачами (КЕП) використовуються для наступних операцій: ::
User data signature keys (QES) are used in these operations: ::

//. Підписання даних КЕП для входу до Кабінетів через віджет цифрового підпису IIT.
//TODO: IIT = ua-specific
* Signing data with QES to sign in to the user portal through the IIT digital signature widget.
//. Підписання даних UI-форм бізнес-процесу за допомогою віджета цифрового підпису IIT.
* Signing UI form data in business processes using the IIT digital signature widget.