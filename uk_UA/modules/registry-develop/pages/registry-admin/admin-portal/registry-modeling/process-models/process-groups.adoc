:toc-title: ЗМІСТ
:toc: auto
:toclevels: 5
:experimental:
:important-caption:     ВАЖЛИВО
:note-caption:          ПРИМІТКА
:tip-caption:           ПІДКАЗКА
:warning-caption:       ПОПЕРЕДЖЕННЯ
:caution-caption:       УВАГА
:example-caption:           Приклад
:figure-caption:            Зображення
:table-caption:             Таблиця
:appendix-caption:          Додаток
:sectnums:
:sectnumlevels: 5
:sectanchors:
:sectlinks:
:partnums:

= Категоризація доступних послуг у кабінетах користувачів

== Проблематика

У Кабінетах користувачів усі доступні послуги представлені в єдиному списку, що є незручним для користувачів реєстрів із великою кількістю таких послуг.

Щоб поліпшити досвід користувачів, реалізовано можливість категоризації послуг за допомогою груп та можливість управління порядком їх відображення. Це дозволяє більш ефективно відображати та знаходити необхідні послуги у реєстрах.

== Загальні принципи та положення

Розробник регламенту може групувати та сортувати бізнес-процеси через вебінтерфейс адміністративного порталу. Зміни до налаштувань групування та сортування валідуються на етапі публікації регламенту реєстру та розгортаються на відповідному середовищі.

Надалі користувачі Кабінетів посадової особи та отримувача послуг зможуть переглядати список бізнес-процесів із розділенням на групи та впорядкованих згідно з налаштуваннями регламенту.

[NOTE]
====
Бізнес-процес не може бути прив'язаний до двох чи більше груп одночасно. Група не є обов'язковою, і якщо бізнес-процес не прив'язаний до групи, він відображається поза групою. Якщо відсутні налаштування груп, це означає, що жоден бізнес-процес не прив'язаний до групи.

Групи, в яких немає жодного бізнес-процесу, доступного користувачу, не відображаються в Кабінетах користувачів, але вони відображаються в інтерфейсі Кабінету адміністратора регламентів. Вкладеність груп не підтримується.
====

[#configure-bp-groups-in-admin-portal]
== Налаштування груп бізнес-процесів у Кабінеті адміністратора регламентів

TIP: Ви можете згрупувати бізнес-процеси, відсортувати групи та доступні послуги для відображення в Кабінетах. Користувачі бачитимуть лише ті послуги, до яких вони мають доступ. Група не відобразиться, якщо усі її процеси недоступні для користувача.

Налаштувати категоризацію бізнес-процесів за допомогою груп можна наступним чином:

. Увійдіть до [.underline]#Кабінету адміністратора регламентів# у своєму реєстрі.

. Відкрийте, або створіть нову версію-кандидат на внесення змін.

. Відкрийте розділ [.underline]#Моделі процесів# та перейдіть на вкладку `Відображення в кабінетах`.

. Далі виконайте налаштування відповідно до потреб. Адміністратор регламенту може:

* xref:#create-group[Створити групу]
* xref:#rename-group[Перейменувати групу]
* xref:#delete-group[Видалити групу]
* xref:#sorting-groups[Сортувати групи]
* xref:#add-bp-to-group[Додавати процеси до групи]
* xref:#delete-bp-from-group[Видаляти бізнес-процеси із групи]
* xref:#sorting-grouped-bp[Сортувати бізнес-процеси у групі]

=== Операції з групами процесів

Адміністратор регламенту може створювати, перейменовувати та видаляти групи процесів.

NOTE: Усі операції зі створення та редагування можливо виконати лише в рамках версії-кандидата на внесення змін до регламенту. Для майстер-версії доступний лише режим перегляду (_детальніше -- див. xref:registry-admin/admin-portal/version-control/version-control-overview.adoc[]_).

[#create-group]
==== Створення групи бізнес-процесів

Створити групу для об'єднання бізнес-процесів можна так: ::
+
. Відкрийте вкладку `Відображення в кабінетах` та натисніть `[.underline]#Створити групу#`.
+
image::registry-admin/admin-portal/process-models/process-groups/process-groups-1.png[]

. Введіть назву нової групи. Назва має бути унікальною у межах регламенту.
+
NOTE: Може мати від 3 до 512 символів. Допустимі символи: “А-Я”, “а-я” української абетки, пробіл, апостроф, тире, дефіс, "()", "/",":", ";", ",", ".", "№", цифри 0-9.
+
image::registry-admin/admin-portal/process-models/process-groups/process-groups-2.png[]
+
[WARNING]
====
* Якщо порушено формат вводу даних, то ви отримаєте наступну валідаційну помилку:
+
image::registry-admin/admin-portal/process-models/process-groups/process-groups-2-1.png[]

* Якщо група з такою назвою вже існує, то ви отримаєте наступну валідаційну помилку:
+
image::registry-admin/admin-portal/process-models/process-groups/process-groups-2-2.png[]

====

. Натисніть kbd:[Зберегти зміни].
+
image::registry-admin/admin-portal/process-models/process-groups/process-groups-3.png[]

[#rename-group]
==== Перейменування групи бізнес-процесів

Перейменувати групу можна так: ::

. Відкрийте вкладку `Відображення в кабінетах`.

. Навпроти відповідної групи, або всередині групи оберіть меню "три крапки" (&#8942;) та натисніть kbd:[Перейменувати].
+
image::registry-admin/admin-portal/process-models/process-groups/process-groups-4.png[]
+
image::registry-admin/admin-portal/process-models/process-groups/process-groups-4-1.png[]

. У новому вікні введіть бажану назву.
+
NOTE: Може мати від 3 до 512 символів. Допустимі символи: “А-Я”, “а-я” української абетки, пробіл, апостроф, тире, дефіс, "()", "/",":", ";", ",", ".", "№", цифри 0-9.
+
image::registry-admin/admin-portal/process-models/process-groups/process-groups-5.png[]

. Натисніть kbd:[Зберегти зміни].
+
image::registry-admin/admin-portal/process-models/process-groups/process-groups-6.png[]

[#delete-group]
==== Видалення групи бізнес-процесів

NOTE: Зверніть увагу, що при видаленні групи, бізнес-процеси не видаляються, а переходять до стану [.underline]#не згрупованих#.

Видалити групу можна так: ::

. Відкрийте вкладку `Відображення в кабінетах`.

. Навпроти відповідної групи, або всередині групи оберіть меню "три крапки" (&#8942;) та натисніть kbd:[Видалити].
+
image::registry-admin/admin-portal/process-models/process-groups/process-groups-7.png[]
+
image::registry-admin/admin-portal/process-models/process-groups/process-groups-8.png[]

. У новому вікні підтвердьте, або скасуйте дію.
+
image::registry-admin/admin-portal/process-models/process-groups/process-groups-9.png[]

. Натисніть kbd:[Зберегти зміни].
+
image::registry-admin/admin-portal/process-models/process-groups/process-groups-10.png[]

[#sorting-groups]
==== Сортування груп

Використання вертикальних стрілок на інтерфейсі для переміщення груп бізнес-процесів дозволяє користувачам зручно та швидко знаходити та вибирати потрібні бізнес-процеси зі списку.

image::registry-admin/admin-portal/process-models/process-groups/process-groups-13.png[]

Наприклад, якщо на інтерфейсі є список груп, таких як "Кадровий склад", "Заяви", "Майно" тощо, то використання вертикальних стрілок дозволяє сортувати ці групи за різними логічними критеріями, щоб надати користувачам зручний доступ до необхідної інформації.

TIP: При створенні групи через Кабінет адміністратора регламентів, вона потрапляє у низ списку груп. Надалі її можна посунути, куди необхідно.

Крім того, сортування груп бізнес-процесів може допомогти забезпечити консистентність та логічність в інтерфейсі, що полегшує навігацію користувачів та поліпшує їх досвід взаємодії з системою.

=== Операції із процесами

[#add-bp-to-group]
==== Додавання бізнес-процесів до групи

Додати бізнес-процес до групи можна так: ::

. Відкрийте вкладку `Відображення в кабінетах`.

. Створіть групу (_див. розділ xref:#create-group[]_).

. Навпроти відповідного бізнес-процесу, натисніть іконку з текою (&#128193;).
+
image::registry-admin/admin-portal/process-models/process-groups/process-groups-11.png[]

. У новому вікні оберіть бажану групу, до якої необхідно перенести бізнес-процес.
+
image::registry-admin/admin-portal/process-models/process-groups/process-groups-12.png[]
+
TIP: Ви можете перенести бізнес-процес в іншу групу чи виключити з поточної. Він буде доданий у кінець обраного переліку бізнес-процесів.

. Натисніть kbd:[Підтвердити].
+
image::registry-admin/admin-portal/process-models/process-groups/process-groups-12-1.png[]

. Збережіть зміни.

[#delete-bp-from-group]
==== Видалення бізнес-процесу із групи

Видалити бізнес-процес із групи можна так: ::

. Відкрийте вкладку `Відображення в кабінетах`.

. Відкрийте наявну групу із процесами.

. Навпроти відповідного бізнес-процесу, натисніть іконку з текою (&#128193;).
+
image::registry-admin/admin-portal/process-models/process-groups/process-groups-14.png[]

. У новому вікні оберіть `Виключити з групи`, з якої необхідно виключити бізнес-процес.
+
image::registry-admin/admin-portal/process-models/process-groups/process-groups-15.png[]
+
TIP: Ви можете також перенести бізнес-процес в іншу групу. Він буде доданий у кінець обраного переліку бізнес-процесів.

. Натисніть kbd:[Підтвердити].
+
image::registry-admin/admin-portal/process-models/process-groups/process-groups-15-1.png[]

. Збережіть зміни.

[#sorting-grouped-bp]
==== Сортування бізнес-процесів у групі

Впровадження можливості сортування бізнес-процесів на інтерфейсі дозволить користувачам легко та швидко знаходити та вибирати необхідні послуги. Зокрема, можна використовувати вертикальні стрілки для переміщення процесів у рамках груп, або за їх межами.

image::registry-admin/admin-portal/process-models/process-groups/process-groups-16.png[]

== Моделювання регламенту реєстру

Налаштування категоризації (групування) бізнес-процесів у Кабінетах користувачів знаходяться у конфігураційному файлі *_bp-grouping.yaml_* у регламенті вашого реєстру.

NOTE: Якщо такий файл відсутній, то створіть та заповніть його відповідно (_див. приклад нижче_).

Є 2 способи, як можна налаштувати групування послуг у Кабінетах користувачів: ::

. xref:#configure-bp-groups-in-admin-portal[В інтерфейсі Кабінету адміністратора регламентів] -- в такому разі після внесення змін до майстер-версії регламенту, налаштування [.underline]#_автоматично_# застосуються до файлу *_bp-grouping.yaml_* у Gerrit-репозиторії.

. У структурі регламенту в Gerrit-репозиторії [.underline]#_вручну_# -- в такому разі, після розгортання регламенту пайплайном публікацій зміни стануть доступні в інтерфейсах Кабінетів адміністратора та користувачів.
+
NOTE: За замовчуванням налаштування групування _bp-grouping.yaml_ порожні.
+
.Структура регламенту реєстру
[plantuml, registry-settings-regulation-structure, svg]
----
@startsalt
{
{T
+ <&folder> registry-regulation
++ <&folder> <b>bp-grouping</b>
+++ <&file> <b>bp-grouping.yaml</b>
++ <&folder> bpmn
++ <&folder> dmn
++ ...
}
}
@endsalt
----
+
.Приклад конфігурації реєстру bp-grouping/bp-grouping.yaml
====
[source, yaml]
----
groups:
  - name: Перша група
    processDefinitions:
      - bp-1-process_definition_id
      - bp-2-process_definition_id
  - name: Друга група
    processDefinitions:
      - bp-3-process_definition_id
  - name: Третя група
ungrouped:
  - bp-4-process_definition_id
  - bp-5-process_definition_id
----

* Масив `*groups*` містить групи бізнес-процесів.
* Масив `*ungrouped*` містить не згруповані бізнес-процеси.

NOTE: Бізнес-процеси, що вказані у масивах `processDefinitions` та `ungrouped`, мають існувати у регламенті реєстру, у теці *_bpmn_*.
====

NOTE: При видаленні бізнес-процесу, він автоматично видаляється з файлу *_bp-grouping.yml_*.

== Зовнішній вигляд Кабінетах користувачів

Після розгортання регламенту та застосування налаштувань, групи бізнес-процесів відображатимуться у Кабінетах посадової особи та отримувача послуг.

.Групи процесів у Кабінеті посадової особи
image::registry-admin/admin-portal/process-models/process-groups/process-groups-17.png[]

.Групи процесів у Кабінеті отримувача послуг
image::registry-admin/admin-portal/process-models/process-groups/process-groups-18.png[]