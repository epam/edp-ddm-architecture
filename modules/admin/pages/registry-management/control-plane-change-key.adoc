= Заміна системного ключа для реєстру
:toc:
:toclevels: 5
:toc-title: ЗМІСТ
:sectnums:
:sectnumlevels: 15
:sectanchors:

Для заміни системного ключа реєстру необхідно виконати наступні кроки:

. Увійдіть до адміністративної панелі реєстрами *Control Plane*, використовуючи попередньо отримані логін та пароль.
+
image:admin:infrastructure/cluster-mgmt/update-cluster-mgmt-01.png[]

. Перейдіть до розділу `Реєстри` та оберіть відповідний реєстр, в якому необхідно змінити системний ключ.
+
image:admin:infrastructure/cluster-mgmt/change-key/change-key-01.png[]

. Натисніть кнопку `Редагувати`, що розташована у правому верхньому куті.
+
image:admin:infrastructure/cluster-mgmt/change-key/change-key-02.png[]

. Встановіть прапорець в рядку «`Редагувати дані про ключ`».
+
image:admin:infrastructure/cluster-mgmt/change-key/change-key-03.png[]

. Оберіть «`Тип носія`» - «`Файловий носій`».
+
image:admin:infrastructure/cluster-mgmt/change-key/change-key-04.png[]

. Додайте новий системний ключ, натиснувши кнопку «`Вибрати файл`». У новому вікні перейдіть до директорії, де зберігається файл ключа формату `*.dat`, оберіть його і натисніть «`Відкрити`».
+
image:admin:infrastructure/cluster-mgmt/change-key/change-key-05.png[]

. Введіть пароль вибраного системного ключа у відповідному полі.
+
image:admin:infrastructure/cluster-mgmt/change-key/change-key-06.png[]

. Наступним кроком необхідно зазначити назву АЦСК у полі «`АЦСК, що видав ключ`».

* 8.1.  Щоб дізнатися назву АЦСК ключа необхідно завантажити додаток _«Користувач центру сертифікації ключів»_ з офіційного ресурсу АТ "ІІТ" за посиланням https://iit.com.ua/downloads.
+
Далі відкрийте завантажений файл для інсталяції ПЗ.
+
[TIP]
====
Подальший приклад буде розглянуто для користувача ОС Microsoft Windows з додатком _EUInstall.exe_.
====
+
image:admin:infrastructure/cluster-mgmt/change-key/change-key-07.png[]

* 8.2. Інсталюйте програму _«ІІТ Користувач ЦСК»_, пройшовши всі запропоновані кроки та запустіть встановлену програму.
+
image:admin:infrastructure/cluster-mgmt/change-key/change-key-08.png[]
[#key_info]
* 8.3. У вікні програми натисніть «`Зчитати`».
+
image:admin:infrastructure/cluster-mgmt/change-key/change-key-09.png[]

* 8.4. Оберіть ключ у відповідній директорії. Далі введіть пароль ключа і натисніть «`Зчитати`».
+
image:admin:infrastructure/cluster-mgmt/change-key/change-key-10.png[]

* 8.5. Після зчитування ключа в інтерфейсі програми _«ІІТ Користувач ЦСК»_ з’явиться нове меню «`Переглянути власний сертифікат`» - натисніть на нього.
+
image:admin:infrastructure/cluster-mgmt/change-key/change-key-11.png[]

* 8.6. У новому вікні буде зазначена інформація з назвою АЦСК у полі «`ЦСК`».
+
image:admin:infrastructure/cluster-mgmt/change-key/change-key-12.png[]

* 8.7. Скопіюйте назву ЦСК на попередньому кроці і вставте її значення в поле «`АЦСК, що видав ключ`» в налаштуваннях реєстру *Control Plane*.
+
image:admin:infrastructure/cluster-mgmt/change-key/change-key-13.png[]

. Наступним кроком необхідно додати список сертифікатів сумісних ЦСК (link:https://iit.com.ua/download/productfiles/CACertificates.p7b[CACertificates.p7b]), який можна отримати на сайті АТ "ІІТ" за посиланням https://iit.com.ua/downloads.
+
Додайте файл сертифікату, натиснувши кнопку «`Вибрати файл`» у полі «`Публічні сертифікати АЦСК (розширення .p7b)`». У новому вікні перейдіть до директорії, де зберігається файл сертифікату, оберіть його і натисніть «`Відкрити`».
+
image:admin:infrastructure/cluster-mgmt/change-key/change-key-14.png[]

. Далі необхідно додати параметри взаємодії із сумісними ЦСК (link:https://iit.com.ua/download/productfiles/CAs.json[CAs.json]), який можна отримати на сайті АТ "ІІТ" за посиланням https://iit.com.ua/downloads.
+
Додайте файл сертифікату, натиснувши кнопку «`Вибрати файл`» у полі «`Перелік АЦСК (розширення .json)`». У новому вікні перейдіть до директорії, де зберігається файл з параметрами, оберіть його і натисніть «`Відкрити`».
+
image:admin:infrastructure/cluster-mgmt/change-key/change-key-15.png[]

. Далі необхідно вказати «Перелік дозволених ключів», підпис яких може вважатися достовірним.
+
[NOTE]
У цьому блоці зазначається перелік ключів, у тому числі і старих _(наприклад, при ротації ключів)_, щоб все, що раніше було підписано старим ключем, вважалося валідованим. Тобто перелік дозволених ключів повинен містити історію даних усіх ключів, що використовувались у системі для накладання підпису.
+
В переліку дозволених ключів вказуються наступні дані ключа:

** `«Емітент ключа»` _(кроки xref:#issuer_key[11.1. - 11.2. цієї інструкції])_;
** `«Серійний номер ключа»` _(кроки xref:#serial_number[11.3. - 11.4. цієї інструкції])_.

+
image:admin:infrastructure/cluster-mgmt/change-key/change-key-16.png[]
[#issuer_key]
* 11.1. Для отримання інформації для поля «`Емітент ключа`» необхідно відрити детальну інформацію про ключ, після його зчитування в програмі _«ІІТ Користувач ЦСК»_ _(кроки xref:#key_info[8.3. – 8.6. цієї інструкції])_, натиснувши «`Детальна інформація`».
+
image:admin:infrastructure/cluster-mgmt/change-key/change-key-17.png[]

* 11.2. У новому вікні вибрати рядок «`Реквізити ЦСК`», і в нижньому полі скопіювати його повне значення для заповнення поля «`Емітент ключа`» в *Control Plane*.
+
image:admin:infrastructure/cluster-mgmt/change-key/change-key-18.png[]
[#serial_number]
* 11.3. Для отримання інформації для поля «`Серійний номер ключа`» необхідно відрити детальну інформацію про ключ, після його зчитування в програмі _«ІІТ Користувач ЦСК»_ _(кроки xref:#key_info[8.3. – 8.6. цієї інструкції])_, натиснувши «`Детальна інформація`».
+
image:admin:infrastructure/cluster-mgmt/change-key/change-key-17.png[]

* 11.4. У новому вікні вибрати рядок «`Реєстраційний номер`», і в нижньому полі скопіювати його повне значення для заповнення поля «`Серійний номер ключа`» в *Control Plane*.
+
image:admin:infrastructure/cluster-mgmt/change-key/change-key-19.png[]

. Для завершення перевірте внесену інформацію і натисніть кнопку «`Підтвердити`».
+
image:admin:infrastructure/cluster-mgmt/change-key/change-key-20.png[]
+
[TIP]
Внесені зміни будуть доступні приблизно через 10-30 хвилин.