= Розгортання регламенту реєстру

== Вступ

Адміністратор регламенту формує та розгортає регламент реєстру, що передбачає внесення змін до набору сутностей -- елементів регламенту. Опис складових регламенту реєстру подано в окремих документах або відповідних розділах цього керівництва.

=== Складові регламенту реєстру

Нижче подано перелік сутностей, що складають регламент реєстру.

. Модель даних (**data-model**)
. Завантаження даних (**data-load**)
. Бізнес-процеси (**bpmn**)
. Таблиці прийняття рішень (**dmn**)
. xref:admin:registry-admin-modelling-forms.adoc[Форми внесення даних до реєстрів] (**forms**)
. xref:admin:global-vars.adoc[Змінні середовища] (**global-vars**)
. Звіти (**reports**)
. xref:admin:roles-rbac-bp-modelling.adoc[Автентифікація у бізнес-процесах (**bp-auth**) та ролі (**roles**)].
. xref:admin:regulation-settings.adoc[Налаштування реєстру] (`settings.yaml`)

:sectnums:
:sectanchors:

== Кроки розгортання регламенту

.**Крок 1**.
Відкрийте **Gerrit** реєстру та виконайте вхід.

При успішному вході та переході до **Browse** -> **Repositories**, повинен показуватися репозитарій **registry-regulations**.

image:admin:registry-deploy-regulation-step-1.png[]

.**Крок 2**.

Перейдіть до репозиторію **registry-regulations** (натиснувши назву репозиторію) та скопіюйте виділену червоним команду для локального завантаження репозиторію, тобто виконайте `git clone`.

image:admin:registry-deploy-regulation-step-2.png[]

.**Крок 3**. +

Відкрийте **Git Bash** або **Terminal** та виконайте скопійовану команду, де `Username` та `Password` із профілю користувача в **Gerrit** можна налаштувати у секції **Settings** -> **User Settings** → **HTTP Credentials**.

image:admin:registry-deploy-regulation-step-3.png[]

image:admin:registry-deploy-regulation-step-4.png[]

.**Крок 4**.
Розкладіть попередньо підготовлені файли до відповідних директорій **registry-regulations** та виконайте у bash-терміналі наступні команди:

[source, bash]
----
git add .
git commit -m "Something updated"
git push origin HEAD:refs/for/master
----
TIP: `_"Something updated"` -- короткий опис змін, що вносяться до регламенту._

image:admin:registry-deploy-regulation-step-5.png[]

.**Крок 5**.

Перейдіть до **Gerrit** → **Changes** → **Open** та переконайтесь, що зміна створена.

image:admin:registry-deploy-regulation-step-6.png[]

.**Крок 6**.

Виконайте перевірку якості (quality gates), увійшовши до створеної зміни.

Натисніть `Reply` та у вікні, що з’явилось, натисніть наступні кнопки:

* `+2` -- для **Code-Review**;

* `+1` -- для **Sonar-Verified**

* `+1` -- для **Verified**.

Натисніть `Send` → далі `Submit` для злиття зміни до репозиторію (merge зміни).

image:admin:registry-deploy-regulation-step-7.png[]

.**Крок 7**.

Перейдіть до **Gerrit** -> **Changes** -> **Merged**.

* Знайдіть зміну, перейдіть до неї та переконайтесь, що CI Jenkins pipeline запущено, дочекавшись закінчення його виконання.
* Слідкувати за виконанням можна, перейшовши за посиланням **CI Jenkins** у секції **Change Log**, або перейшовши до Jenkins job за посиланням, що виділено червоним на зображенні нижче.
* Після успішного виконання Jenkins job, сутності регламенту реєстру створено -- можна переходити до їх перевірки.

image:admin:registry-deploy-regulation-step-8.png[]