= Реєстрація послуг для виклику зовнішніми учасниками СЕВ ДЕІР "Трембіта"

== Передумови
Для початку необхідно мати розгорнутий регламент в якому точки інтеграції позначені відповідним тегом, та SOAP API розгорнутий.

== Додавання WSDL
Після логіну в веб-інтерфейс Трембіти перейдіть в пункт меню "Клієнти сервера безпеки"

image::trembita/trembita-add-wsdl-step-1.png[]

Ви маєте побачити список доступних вам клієнтів.

[TIP]
Хорошим правилом є розділення клієнтів на "споживачів" та "постачальників" на прикладі: DDMTest_prod - постачальник, а DDMTest_cons - споживач.

Зайдіть в розділ конфігурації "Сервіси SOAP", клієнта постачальника, натиснувши відповідний значок image:trembita/soap-config.png[width="25"]
та натисніть кнопку "Додати WSDL"

image::trembita/trembita-add-wsdl-step-2.png[]

У з'явившейся вікно введіть посилання на WSDL яке буде доступне після розгортанню регламенту в SOAP API сервісі.

Натисніть кнопку "OK"

image::trembita/trembita-add-wsdl-step-4.png[]

Після цього ви маєте побачити посилання на відповідний WSDL в списку з усіма методами які можуть бути сконфігуровані як точки інтеграції із зовнішніми клієнтами.

== Налаштавуння прав доступу

Трембіта дозволяє надавати доступ на рівні окремих SOAP методів.

[NOTE]
За замовченням, після додавання WSDL доступ до точок інтеграції через Трембіту для всіх заборонений.

image::trembita/trembita-setup-consumer-step-1.png[]

Для надання доступу до точки інтеграції іншому учаснику обміну необхідно вибрати точку інтеграції та натиснути кнопку "Права доступу"

image::trembita/trembita-setup-consumer-step-2.png[]

У з'явившимося вікні натиснути кнопку "Додати об'єкт"

image::trembita/trembita-setup-consumer-step-3.png[]

за допомогою рядка пошуку знайти клієнта якому хочемо надати доступ (в нашому прикладі ми використовуємо DDMTest_cons), знайшовши відповідного клієнта і виділивши його треба додати його за допомогою кнопки "Додати обране"

image::trembita/trembita-setup-consumer-step-5.png[]

Після цього вибраний клієнт має з'явитись в переліку учасників.

image::trembita/trembita-setup-consumer-step-6.png[]

Вікно можна закрити за допомогою кнопки "Закрити"

image::trembita/trembita-setup-consumer-step-7.png[]

Окрім цього з'явиться цифра біля назви точки інтеграції яка буде відповідати кількості учасників яким було надано доступ до данної точки інтеграції.

Останнім кроком після налаштування всіх прав є увімкненням сервісу в цілому, для цього треба вибрати посилання воно буде червоного кольору, та натиснути кнопку "Увімкнути"

image::trembita/trembita-setup-consumer-step-8.png[]