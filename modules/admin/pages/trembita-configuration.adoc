= Реєстрація послуг та налаштування виклику платформи даних із СЕВ ДЕІР "Трембіта"

:sectnums:
:sectanchors:

== Передумови
Для початку необхідно мати розгорнутий регламент реєстру, в якому точки інтеграції позначені відповідним тегом, та розгорнутий SOAP API.

== Додавання WSDL-файлу

* Після входу до вебінтерфейсу ШБО "Трембіта", перейдіть до пункту меню **КЛІЄНТИ СЕРВЕРА БЕЗПЕКИ**.

image::trembita/trembita-add-wsdl-step-1.png[]

В результаті має з'явитися список доступних клієнтів.

TIP: _Хорошим правилом є розділення клієнтів на "споживачів" (API consumers, `_cons`) та "постачальників" (API producers, `_prod`). Наприклад, `DDMTest_prod` -- постачальник, а `DDMTest_cons` -- споживач_.

. Увійдіть до розділу конфігурації **Сервіси SOAP** клієнта-постачальника, натиснувши на відповідний значок image:trembita/soap-config.png[width="25"]
та натисніть `Додати WSDL`.

image::trembita/trembita-add-wsdl-step-2.png[]

* У вікні, що з'явилося, введіть посилання до WSDL, що буде доступне в SOAP-вебсервісі після розгортання регламенту.

* Натисніть кнопку `OK`.

image::trembita/trembita-add-wsdl-step-4.png[]

В результаті стане доступним посилання до відповідного WSDL у списку, з усіма методами, які можуть бути сконфігуровані як точки інтеграції із зовнішніми клієнтами.

== Налаштування прав доступу

Трембіта дозволяє надавати доступ на рівні окремих SOAP-методів.

[NOTE]
_За замовчуванням, після додавання WSDL, доступ до точок інтеграції через Трембіту для всіх заборонений._

image::trembita/trembita-setup-consumer-step-1.png[]

* Для надання доступу до точки інтеграції іншому учасникові обміну, необхідно вибрати точку інтеграції та натиснути кнопку `Права доступу`.

image::trembita/trembita-setup-consumer-step-2.png[]

* У вікні, що з'явилося, натисніть кнопку `Додати об'єкт`.

image::trembita/trembita-setup-consumer-step-3.png[]

* За допомогою рядка пошуку, знайдіть клієнта, якому необхідно надати доступ (у нашому випадку -- це `DDMTest_cons`).

* Далі виділіть його та додайте за допомогою кнопки `Додати обране`.

image::trembita/trembita-setup-consumer-step-5.png[]

В результаті, обраний клієнт має з'явитися в переліку учасників СЕВ ДЕІР.

image::trembita/trembita-setup-consumer-step-6.png[]

* Закрийте вікно за допомогою кнопки `Закрити`.

image::trembita/trembita-setup-consumer-step-7.png[]

NOTE: _Також з'явиться цифра біля назви точки інтеграції, що буде відповідати кількості учасників, яким було надано доступ до цієї точки інтеграції_.

== Увімкнення сервісу

Після налаштування всіх прав доступу, увімкніть сервіс в цілому. Для цього виділіть посилання (воно підсвічуватиметься червоним) та натисніть кнопку `Увімкнути`.

image::trembita/trembita-setup-consumer-step-8.png[]