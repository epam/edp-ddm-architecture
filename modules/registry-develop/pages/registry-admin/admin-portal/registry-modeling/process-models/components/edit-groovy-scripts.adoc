:toc-title: ЗМІСТ
:toc: auto
:toclevels: 5
:experimental:
:important-caption:     ВАЖЛИВО
:note-caption:          ПРИМІТКА
:tip-caption:           ПІДКАЗКА
:warning-caption:       ПОПЕРЕДЖЕННЯ
:caution-caption:       УВАГА
:example-caption:           Приклад
:figure-caption:            Зображення
:table-caption:             Таблиця
:appendix-caption:          Додаток
:sectnums:
:sectnumlevels: 5
:sectanchors:
:sectlinks:
:partnums:

= Редагування скриптів бізнес-процесів реєстру через візуальний редактор коду

CAUTION: Документ у процесі розробки.

== Загальний опис

Розробник регламенту реєстру може у вбудованому редакторі діаграм BPMN.iO редагувати https://uk.wikipedia.org/wiki/Groovy[*Groovy*]-скрипти через візуальний редактор коду. Для цього імплементовано рішення https://microsoft.github.io/monaco-editor/[Monaco Editor].

Підтримуються наступні функції при роботі із редактором: ::

* [*] Автодоповнення
* [*] Автодоповнення для кастомних функцій
* [*] Синтаксичний аналіз коду
* [*] Підтримка коментарів
* [*] Згортання та розгортання блоку з кодом
* [*] Тема *Visual Studio Dark*

== Функціональні можливості

=== Загальний процес використання

Використовуйте візуальний редактор коду при створенні та редагуванні скриптів у рамках моделювання бізнес-процесів.

[CAUTION]
====
Редагування складових регламенту реєстру можливе лише в рамках версій-кандидатів на внесення змін. Для майстер-версії доступна лише опція перегляду.

Детальніше про особливості роботи з версіями регламенту дивіться на сторінці
xref:registry-admin/admin-portal/version-control/version-control-overview.adoc[].
====

. У Кабінеті адміністратора регламентів відкрийте розділ [.underline]#Моделі процесів#.
+
image:registry-develop:registry-admin/admin-portal/process-models/process-models-1.png[]

. В рамках версії-кандидата оберіть процес і натисніть [.underline]#&#128393; іконку редагування#.
+
image:registry-develop:registry-admin/admin-portal/process-models/process-models-6.png[]

. Перейдіть на вкладку [.underline]#Конструктор# та змоделюйте бізнес-процес у вебредакторі.
+
TIP: Можливості вкладки [.underline]#Конструктор# більш детально описані на сторінці xref:registry-admin/admin-portal/registry-modeling/process-models/components/tab-bpmn-editor.adoc[].
+
image:registry-develop:registry-admin/admin-portal/process-models/process-models-4.png[]

. Створіть скрипт-задачу (*Script Task*).
. Натисніть kbd:[*Open script editor*], щоб відкрити [.underline]#Редактор скриптів#.
. Створіть або відредагуйте скрипт:

* Натисніть kbd:[Зберегти], щоб зберегти зміни.
* Натисніть kbd:[Закрити], щоб скасувати зміни.
+
image::registry-admin/hierarchical-model/hierarchical-model-bp-2.png[]
+
image::registry-admin/hierarchical-model/hierarchical-model-bp-3.png[]

=== Автодоповнення коду та кастомних JUEL-функцій

При роботі зі скриптами у редакторі моделювальник може використовувати [.underline]#автодоповнення коду#, зокрема [.underline]#автодоповнення кастомних JUEL-функцій# з випадного списку. Це дозволить уникати помилок при ручному введенні параметрів.

image:registry-admin/admin-portal/process-models/edit-groovy-scripts/edit-groovy-scripts-1.png[]

[TIP]
====
Використовуйте платформні JUEL-функції для спрощення моделювання бізнес-процесів. Наразі імплементовані такі функції:

*`initiator()`, `completer()`, `system_user()`, `submission()`, `sign_submission()`, `get_variable()`, `set_variable()`,`set_transient_variable()`, `process_caller()`, `message_payload()`*.

Детальніше про використання JUEL-функцій ви можете переглянути на сторінці xref:bp-modeling/bp/modeling-facilitation/modelling-with-juel-functions.adoc[].
====

=== Синтаксичний аналіз коду та перевірка помилок

Редактор підтримує синтаксиний аналіз коду та коментарі для деталізації помилок.

Якщо код містить критичну помилку, допущену моделювальником, редактор підсвітить червоним кольором, де саме у скрипті виявлено помилку, та виведе відповідне пояснення на екран.

image:registry-admin/admin-portal/process-models/edit-groovy-scripts/edit-groovy-scripts-2.png[]

image:registry-admin/admin-portal/process-models/edit-groovy-scripts/edit-groovy-scripts-3.png[]

Якщо код містить НЕ критичну помилку, допущену моделювальником, при наведенні курсора редактор підсвітить жовтим кольором, де саме у скрипті виявлено помилку, та виведе відповідне пояснення на екран.

image:registry-admin/admin-portal/process-models/edit-groovy-scripts/edit-groovy-scripts-4.png[]

image:registry-admin/admin-portal/process-models/edit-groovy-scripts/edit-groovy-scripts-5.png[]





