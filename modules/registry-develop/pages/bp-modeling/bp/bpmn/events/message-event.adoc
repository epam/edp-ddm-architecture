:toc-title: ЗМІСТ
:toc: auto
:toclevels: 5
:experimental:
:important-caption:     ВАЖЛИВО
:note-caption:          ПРИМІТКА
:tip-caption:           ПІДКАЗКА
:warning-caption:       ПОПЕРЕДЖЕННЯ
:caution-caption:       УВАГА
:example-caption:           Приклад
:figure-caption:            Зображення
:table-caption:             Таблиця
:appendix-caption:          Додаток
:sectnums:
:sectnumlevels: 5
:sectanchors:
:sectlinks:
:partnums:

= Подія «Повідомлення»

== Загальний опис

Подія «Повідомлення» (*Message Event*) -- це подія у бізнес-процесі, яка використовується для передачі інформації від одного бізнес-процесу до іншого бізнес-процесу або підпроцесу. Згенероване вихідне повідомлення (подія-відправник) активує елемент, що приймає повідомлення (подія-одержувач), який з ним пов'язаний.

image:bp-modeling/bp/events/message-event/message-event-01.png[]

Елементи події, що надсилають та приймають повідомлення, _повинні бути взаємопов'язаними_ та мати відповідні налаштування обміну інформацією.

При моделюванні застосовуються такі типи подій повідомлення: ::

. xref:#message-end-event[Кінцева подія повідомлення (*Message End Event*)] -- подія, що моделюється при завершенні бізнес-процесу чи підпроцесу, і яка налаштовується для відправки масиву даних, певних атрибутів або тестового повідомлення.

. xref:#message-start-event[Стартова подія повідомлення (*Message Start Event*)] -- подія, що моделюється при ініціюванні старту нового бізнес- процесу чи підпроцесу, і яка налаштовується для отримання масиву даних, певних атрибутів або тестового повідомлення від елемента End Message Event або Message Intermediate Throw Event.

. xref:#message-intermediate-throw-event[Проміжна подія відправки повідомлення (*Message Intermediate Throw Event*)] -- подія, що моделюється при проходженні бізнес-процесу чи підпроцесу, і яка налаштовується для відправки масиву даних, певних атрибутів або тестового повідомлення.

. xref:#message-intermediate-catch-event[Проміжна подія отримання повідомлення (*Message Intermediate Catch Event*)] -- подія, що моделюється при проходженні бізнес-процесу чи підпроцесу, і яка налаштовується для отримання масиву даних, певних атрибутів або тестового повідомлення від елемента End Message Event або Message Intermediate Throw Event.

[#message-end-event]
== Моделювання та налаштування кінцевої події повідомлення

Для моделювання та налаштування кінцевої події повідомлення, необхідно виконати наступні налаштування:

[IMPORTANT]
====
Передумови ::

Підготуйте 2 змодельовані бізнес-процеси в рамках 2-х пулів, що мають взаємодіяти між собою за допомогою повідомлень (_тут -- процеси *Send Message* та *Receive Message_*).
====

. В рамках бізнес-процесу, що надсилатиме інформацію (*Send Message*), додайте подію завершення процесу.

+
image:bp-modeling/bp/events/message-event/mess1_1.png[]

. Виділіть подію завершення процесу та визначте її тип. Для цього натисніть _іконку ключа_ та оберіть в налаштуваннях значення *Message End Event*.

+
image:bp-modeling/bp/events/message-event/mess1_2.png[]

. На вкладці *General* налаштуйте делегат для надсилання даних повідомлення:

* У полі `Id` вкажіть робочий ідентифікатор елемента, або залиште значення за замовчуванням.
* У полі `Name` вкажіть робочу назву елемента.
* У полі `Implementation` оберіть зі списку значення `Delegate Expression`.
* У полі `Delegate Expression` вкажіть значення делегата -- `${startProcessByMessageDelegate}`.
+
NOTE: На відміну від інших типових розширень-делегатів для моделювання бізнес-процесів, що мають xref:bp-modeling/bp/element-templates/bp-element-templates-installation-configuration.adoc[розроблені шаблони], делегат `startProcessByMessageDelegate`, який використовується при моделюванні подій «Повідомлення», налаштовується в ручному режимі.

* Розгорніть блок *Details*, натиснувши клавішу `+` (позначка плюса).
* У полі `Global Message Name` вкажіть назву елемента, що прийматиме повідомлення (наприклад, `startProcessReceiveMessageAfterSystemTask`).
+
[CAUTION]
====
Вказана назва має бути ідентичною для 2-х взаємопов'язаних елементів -- елемента, що надсилає дані повідомлення, та елемента, що ці дані приймає.

Один елемент, що надсилає повідомлення, може бути взаємопов'язаний тільки з одним елементом, що приймає повідомленням.
====

* У полі `Global Message referenced` оберіть зі списку значення посилання до елемента, що приймає дані, вказаного у полі `Global Message Name`.
+
[CAUTION]
====
Якщо при моделюванні бізнес-процесів в рамках одного _.bpmn_-файлу використовуються декілька взаємопов'язаних елементів подій повідомлення, то у полі `Global Message referenced`, у випадному списку відображатимуться всі раніше встановлені значення елементів, що отримують повідомлення. Будьте уважними при налаштуванні цього параметра та обирайте саме той елемент кореляції, який потрібен.

При зміні значення у полі `Global Message referenced`, автоматично заповнюється ідентичне значення для поля `Global Message Name`.
====

+
image:bp-modeling/bp/events/message-event/mess1_3.png[]

. Перейдіть на вкладку *Input\Output* та налаштуйте масив даних, атрибути або текстове повідомлення, що передаватимуться до бізнес-процесу (підпроцесу), що прийматиме дані:

* Навпроти секції *Input Parameters* натисніть клавішу `+` (позначка плюса), після чого буде автоматично додано вхідний параметр, який необхідно налаштувати відповідно до даних, що передаватимуться до іншого бізнес-процесу (підпроцесу).

+
image:bp-modeling/bp/events/message-event/mess1_4.png[]

* У полі `Local Variable Name` вкажіть назву локальної змінної або залиште значення за замовчуванням.

+
image:bp-modeling/bp/events/message-event/mess1_5.png[]

* У полі `Variable Assignment Type` оберіть тип змінної та налаштуйте її наступним чином:

+
[TIP]
====
Існує 4 доступних способи призначення змінної:

* рядок або вираз (`String or Expression`);
* скрипт (`Script`);
* масив або список (`List`);
* набір пар ключ-значення (`Map`).

====


* При виборі типу `String or Expression`, вкажіть у полі `Variable Assignment Value` вираз змінної, що передаватиметься за допомогою JUEL-функції.

+
[TIP]
====
За детальною інформацією щодо підтримуваних Платформою JUEL-функцій, зверніться до сторінки xref:bp-modeling/bp/modeling-facilitation/modelling-with-juel-functions.adoc[].
====

+
image:bp-modeling/bp/events/message-event/mess1_6.png[]

* При виборі типу `Script`, вкажіть дані скрипту у полях `Script Format`, `Script Type` та `Script`.

+
image:bp-modeling/bp/events/message-event/mess1_7.png[]

* При виборі типу `List`, натисніть `+` (`Add Value`) та у полі `Value` вкажіть значення змінної (текст або за допомогою JUEL-функції).

+
image:bp-modeling/bp/events/message-event/mess1_8.png[]

* При виборі типу `Map`, натисніть кнопку `+` (`Add Entry`) , у полі `Key` вкажіть назву змінної, а в полі `Value` вкажіть значення змінної (текст або за допомогою JUEL-функцій).

+
image:bp-modeling/bp/events/message-event/mess1_9.png[]

* За необхідності, навпроти секції *Input Parameters* натисніть кнопку `+` та сконфігуруйте значення наступної змінної.

.Приклади конфігурації змінних для кінцевої події повідомлення
====
image:bp-modeling/bp/events/message-event/mess1_10.png[]

image:bp-modeling/bp/events/message-event/mess1_11.png[]

TIP: Скористайтеся референтним прикладом бізнес-процесу для отримання деталей: link:{attachmentsdir}/bp-modeling/bp/message-event/Process_checkIntermediateThrowEvent.bpmn[_Process_checkIntermediateThrowEvent.bpmn_].
====

[#message-start-event]
== Моделювання та налаштування стартової події повідомлення

Для моделювання та налаштування стартової події повідомлення, необхідно виконати наступні налаштування:

[IMPORTANT]
====
Передумови ::

Підготуйте 2 змодельовані бізнес-процеси в рамках 2-х пулів, що мають взаємодіяти між собою за допомогою повідомлень (_тут -- процеси *Send Message* та *Receive Message_*).
====

. В рамках бізнес-процесу, що прийматиме інформацію (*Receive Message*), додайте стартову подію.

+
image:bp-modeling/bp/events/message-event/mess1_12.png[]

. Виділіть початкову подію та визначте її тип. Для цього натисніть _іконку ключа_ та оберіть в налаштуваннях значення *Message Start Event*.

+
image:bp-modeling/bp/events/message-event/mess1_13.png[]

. На вкладці *General* налаштуйте елемент для отримання даних повідомлення:

* У полі `Id` вкажіть робочий ідентифікатор елемента або залиште значення за замовчуванням.
* У полі `Name` вкажіть робочу назву елемента.
* Навпроти секції *Details* натисніть клавішу `+` (позначка плюса).
* У полі `Global Message Name` вкажіть назву елемента, що прийматиме дані, і значення якого було вказано для події повідомлення, що надсилатиме дані (End Message Event або Message Intermediate Throw Event).
Наприклад, `startProcessReceiveMessageAfterSystemTask`.

+
[CAUTION]
====
Вказана назва має бути ідентичною для 2-х взаємопов'язаних елементів -- елемента, що надсилає дані повідомлення, та елемента, що ці дані приймає.

Один елемент, що надсилає повідомлення, може бути взаємопов'язаний тільки з одним елементом, що приймає повідомленням.
====

* У полі `Global Message referenced` оберіть зі списку значення посилання елемента, що приймає дані, вказаного у полі `Global Message Name`.

+
[CAUTION]
====
Якщо при моделюванні бізнес-процесів в рамках одного _.bpmn_-файлу використовуються декілька взаємопов'язаних елементів подій повідомлення, то у полі `Global Message referenced`, у випадному списку відображатимуться всі раніше встановлені значення елементів, що отримують повідомлення. Будьте уважними при налаштуванні цього параметра та обирайте саме той елемент кореляції, який потрібен.

При зміні значення у полі `Global Message referenced`, автоматично заповнюється ідентичне значення для поля `Global Message Name`.
====

+
image:bp-modeling/bp/events/message-event/mess1_14.png[]

[#message-intermediate-throw-event]
== Моделювання та налаштування проміжної події відправки повідомлення

Для моделювання та налаштування проміжної події відправки повідомлення, необхідно виконати наступні налаштування:

[IMPORTANT]
====
Передумови ::

Підготуйте 2 змодельовані бізнес-процеси в рамках 2-х пулів, що мають взаємодіяти між собою за допомогою повідомлень (_тут -- процеси *Send Message* та *Receive Message_*).
====

. В рамках бізнес-процесу, що надсилатиме інформацію (*Send Message*), додайте проміжну подію (Intermediate/Boundary Event).

+
image:bp-modeling/bp/events/message-event/mess1_15.png[]

. Змоделюйте взаємодію між двома процесами.

+
image:bp-modeling/bp/events/message-event/mess1_16.png[]

. Виділіть проміжну подію та визначте її тип. Для цього натисніть _іконку ключа_ та оберіть в налаштуваннях значення *Message Intermediate Throw Event*.

+
image:bp-modeling/bp/events/message-event/mess1_17.png[]

. На вкладці *General* налаштуйте делегат для надсилання даних повідомлення:

* У полі `Id` вкажіть робочий ідентифікатор елемента, або залиште значення за замовчуванням.
* У полі `Name` вкажіть робочу назву елемента.
* У полі `Implementation` оберіть зі списку значення `Delegate Expression`.
* У полі `Delegate Expression` вкажіть значення делегата -- `${startProcessByMessageDelegate}`.
+
NOTE: На відміну від інших типових розширень-делегатів для моделювання бізнес-процесів, що мають xref:bp-modeling/bp/element-templates/bp-element-templates-installation-configuration.adoc[розроблені шаблони], делегат `startProcessByMessageDelegate`, який використовується при моделюванні подій «Повідомлення», налаштовується в ручному режимі.

* Розгорніть блок *Details*, натиснувши клавішу `+` (позначка плюса).
* У полі `Global Message Name` вкажіть назву елемента, що прийматиме повідомлення (наприклад, `startProcessReceiveMessageExec`).

+
[CAUTION]
====
Вказана назва має бути ідентичною для 2-х взаємопов'язаних елементів -- елемента, що надсилає дані повідомлення, та елемента, що ці дані приймає.

Один елемент, що надсилає повідомлення, може бути взаємопов'язаний тільки з одним елементом, що приймає повідомленням.
====

* У полі `Global Message referenced` оберіть зі списку значення посилання до елемента, що приймає дані, вказаного у полі `Global Message Name`.

+
[CAUTION]
====
Якщо при моделюванні бізнес-процесів в рамках одного _.bpmn_-файлу використовуються декілька взаємопов'язаних елементів подій повідомлення, то у полі `Global Message referenced`, у випадному списку відображатимуться всі раніше встановлені значення елементів, що отримують повідомлення. Будьте уважними при налаштуванні цього параметра та обирайте саме той елемент кореляції, який потрібен.

При зміні значення у полі `Global Message referenced`, автоматично заповнюється ідентичне значення для поля `Global Message Name`.
====

+
image:bp-modeling/bp/events/message-event/mess1_18.png[]

. Перейдіть на вкладку *Input\Output* та налаштуйте масив даних, атрибути або текстове повідомлення, що передаються іншому бізнес-процесу (підпроцесу).

TIP: Налаштування input/output-параметрів делегата детально описані у розділі xref:#message-end-event[].


.Приклади конфігурації змінних для проміжної події відправки повідомлення
====
image:bp-modeling/bp/events/message-event/mess1_19.png[]

image:bp-modeling/bp/events/message-event/mess1_20.png[]

TIP: Скористайтеся референтним прикладом бізнес-процесу для отримання деталей: link:{attachmentsdir}/bp-modeling/bp/message-event/Process_checkIntermediateThrowEvent.bpmn[_Process_checkIntermediateThrowEvent.bpmn_].
====

[#message-intermediate-catch-event]
== Моделювання та налаштування проміжної події отримання повідомлення

Для моделювання та налаштування проміжної події отримання повідомлення, необхідно виконати наступні налаштування:

[IMPORTANT]
====
Передумови ::

Підготуйте 2 змодельовані бізнес-процеси в рамках 2-х пулів, що мають взаємодіяти між собою за допомогою повідомлень (_тут -- процеси *Send Message* та *Receive Message_*).
====

. В рамках бізнес-процесу, що прийматиме інформацію (_тут -- *Receive Message_*), додайте проміжну подію.

+
image:bp-modeling/bp/events/message-event/mess1_21.png[]

. Виділіть проміжну подію та визначте її тип. Для цього натисніть _іконку ключа_ та оберіть в налаштуваннях значення *Message Intermediate Catch Event*.

+
image:bp-modeling/bp/events/message-event/mess1_22.png[]

. На вкладці *General* налаштуйте елемент для отримання даних повідомлення:

* У полі `Id` вкажіть робочий ідентифікатор елемента або залиште значення за замовчуванням.
* У полі `Name` вкажіть робочу назву елемента.
* Навпроти секції *Details* натисніть клавішу `+` (позначка плюса).
* У полі `Global Message Name` вкажіть назву елемента, що прийматиме дані, і значення якого було вказано для події повідомлення, що надсилатиме дані (End Message Event або Message Intermediate Throw Event).
Наприклад, `sendIntermediateMessage`.

+
[CAUTION]
====
Вказана назва має бути ідентичною для 2-х взаємопов'язаних елементів -- елемента, що надсилає дані повідомлення, та елемента, що ці дані приймає.

Один елемент, що надсилає повідомлення, може бути взаємопов'язаний тільки з одним елементом, що приймає повідомленням.
====

* У полі `Global Message referenced` оберіть зі списку значення посилання елемента, що приймає дані, вказаного у полі `Global Message Name`.

+
[CAUTION]
====
Якщо при моделюванні бізнес-процесів в рамках одного _.bpmn_-файлу використовуються декілька взаємопов'язаних елементів подій повідомлення, то у полі `Global Message referenced`, у випадному списку відображатимуться всі раніше встановлені значення елементів, що отримують повідомлення. Будьте уважними при налаштуванні цього параметра та обирайте саме той елемент кореляції, який потрібен.

При зміні значення у полі `Global Message referenced`, автоматично заповнюється ідентичне значення для поля `Global Message Name`.
====

+
image:bp-modeling/bp/events/message-event/mess1_23.png[]