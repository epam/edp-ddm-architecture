== Kafka-топік відправлення повідомлень користувачам

=== Загальна конфігурація

|===
|Властивість|Значення|Опис

|*name*
|_user-notifications_
|Назва топіку

|*num-partitions*
|_1_
|Кількість розділів в рамках топіку для збереження повідомлень

|*replication-factor*
|_1_
|Кількість реплік цільового топіка

|*retention-policy-in-days*
|_7_
|Кількість днів збереження повідомлення в Kafka
|===

=== Налаштування клієнтського сервісу для відправки повідомлень
[source, yaml]
----
notifications:
  kafka:
    topic:
      name: user-notifications
      num-partitions: 1
      replication-factor: 1
      retention-policy-in-days: 7
----

=== Канонічний вигляд структури повідомлення
[source, json]
----
{
  "context": {
    "system": "Low-code Platform",
    "application": "<bpms.app.name>",
    "businessProcess": "",
    "businessProcessDefinitionId": "",
    "businessProcessInstanceId": "",
    "businessActivity": "",
    "businessActivityInstanceId": ""
  },
  "notification": {
    "recipient": "",
    "subject": "",
    "template:": "",
    "templateModel:": {
      "key1": "val1",
      "key2": "val2",
      "key3": "val3"
    }
  }
}
----