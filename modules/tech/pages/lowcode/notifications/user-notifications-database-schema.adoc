== Фізична модель збереження шаблонів повідомлень

В рамках реалізації функціональних вимог, необхідно створити окрему схему _NOTIFICATIONS_ та розширити фізичну модель додатковою таблицею _NOTIFICATION_TEMPLATE_, призначенням якої є збереження шаблонів повідомлень в залежності від каналу зв'язку, який підтримується платформою.

Наповнення таблиці реалізується на етапі публікації регламенту через окрему _Утиліту публікації шаблонів_ (*notification_template_publisher*). Основний сценарій використання - генерація тіла повідомлення на базі шаблону для подальшої відправки в рамках окремого _Сервісу відправки повідомлень_ (*notification_service*).

=== Структура даних _NOTIFICATION_TEMPLATE_

|===
|Поле|Тип|Обмеження|Значення за замовчуванням|Опис

|*ID*
|UUID
|Primary Key
|_uuid_generate_v4()_
|Унікальний автоматично згенерований ідентифікатор запису
|*NAME*
|TEXT
|Not Null, Unique Constraint*
|-
|Назва шаблону повідомлення
|*CHANNEL*
|ENUM
|Not Null, Unique Constraint*, _[email,diia,messenger]_
|-
|Канал зв'язку для використання шаблону повідомлення
|*CONTENT*
|TEXT
|Not Null
|-
|Текстовий _FreeMarker_-шаблон тіла повідомлення для подальшого заповнення даними
|*CHECKSUM*
|TEXT
|Not Null
|-
|SHA-256 чек-сума, згенерована на вміст поля _CONTENT_
|*CREATED_AT*
|TIMESTAMP
|Not Null
|_now()_
|Дата/Час створення/публікації шаблону
|*UPDATED_AT*
|TIMESTAMP
|Not Null
|_now()_
|Дата/Час останньої зміни в рамках публікації шаблону

|===

=== Ролі/системні користувачі БД

Для обслуговування операцій взаємодії з БД, необхідно створити ролі/користувачів з визначеними правами доступу для використання відповідними компонентами системи:

|===
|Компонент системи|Роль/Користувач|Привілегії

|*notification-template-publisher*
|_notification_template_publisher_user_
|_GRANT SELECT, INSERT, UPDATE, DELETE ON NOTIFICATION_TEMPLATE_

|*notification-service*
|_notification_service_user_
|_GRANT SELECT ON NOTIFICATION_TEMPLATE_

|===