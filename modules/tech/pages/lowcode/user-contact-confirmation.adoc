== Підтвердження каналу зв`язку з користувачем
Для того щоб отримувати повідомлення на вказаний користувачем у профілі контакт, користувачу необхідно підтвердити, що цей контакт йому належить. Механізм підтвердження є універсальним та однаковим для всіх каналів зв`язку.

image::lowcode/contact-verification.png[]

. Користувач в налаштуваннях профілю вводить контактні дані (імейл, номер телефону, або інші контакти).
. Портал особи проводить валідацію введених даних на відповідність встановленому формату та в разі успішного проходження здійснює виклик Сервісу Налаштувань для збереження контактних даних.
. Сервісом налаштувань ініціює процес верифікації нового каналу звʼязку. Для цього генерується криптографічно безпечний 6-ти значний псевдовипадковий код підтвердження та зберігається в тимчасове сховище Redis. Ключем запису виступає композиція ідентифікатора користувача та ідентифікатора каналу звʼязку.  При цьому для запису встановлюється час життя (TTL) рівний n секунд де n задається в налаштуваннях. 3.1-3.2.
. Після збереження подія з код підтвердження та ідентифікатором каналу звязку публікується в Kafka topic (4.а.) звідки потрапляє до Сервісу Відправки Повідомлень (4.b.).
. Сервіс Відправки Повідомлень формує повідомлення з кодом згідно шаблону та направляє його до відповідного Шлюзу Відправки Повідомлень в залежності від обраного каналу звєязку.
. Шлюз відправки повідомлень надсилає повідомлення з кодом користувачу.
. Користувач, отримавши код підтвердження, вводить його на сторінці налаштувань профіля.
. Портал особи проводить валідацію введених даних на відповідність встановленому формату (6-ти значне число) та в разі успішного проходження здійснює виклик Сервісу Налаштувань для підтвердження контактних даних.
. Сервіс Налаштувань Користувача, отримавши код підтвердження, вичитує з Тимчасового Сховища Даних збережений на кроці №3 код підтвердження згідно ключа та видаляє його в сховищі.
. Отримавши раніше збережений ключ сервіс звіряє його з отриманим від користувача.
.. В разі співпадіння контактні дані зберігаються в профілі користувача як перевірені.
.. В разі неспівпадіння кодів, користувачу відображається помилка та пропонується повторно згенерувати код та повторити кроки 2-9.
