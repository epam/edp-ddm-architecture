= Розгортання регламенту реєстру

Адміністратор регламенту формує та розгортає регламент реєстру, що передбачає внесення змін у наступні сутності:

* модель даних (_data-model_) та первинне наповнення даними (_data-load_)
* бізнес-процеси (_bpmn_)
* правила (_dmn_)
* форми (_forms_)
* змінні середовища (_global-vars_)
* звіти (_reports_)
* видимість бізнес-процесів для користувачів (_bp-auth_)
* ролі (_roles_)
* концігурація реєстру (_settings.yaml_)

== Кроки розгортання регламенту
1. Відкрийте Gerrit реєстру та залогінтесь

====
При успішному вході та переході у _Browse → Repositories_ повинен бути відображений наступний репозитарій:

* registry-regulations
====

image:user:registry-deploy-regulation-step-1.png[]

2. Перейдіть до registry-regulations репозитарію (натиснувши на назві репозитарію) скопіюйте виділену червоним команду для локального скачування репозитарію

image:user:registry-deploy-regulation-step-2.png[]


3. Відкрийте git bash або Terminal та виконайте скопійовану команду, де username та password беруться з профілю користувача у Gerrit (Settings → User Settings → HTTP Credentials)

image:user:registry-deploy-regulation-step-3.png[]

image:user:registry-deploy-regulation-step-4.png[]

4. Розкладіть раніше підготовлені файли у відповідні директорії _registry-regulations_ та виконайте у bash терміналі наступні команди:

----
git add .
git commit -m "Something updated"
git push origin HEAD:refs/for/master
----
*  "Something updated" - короткий опис змін, що вносяться у регламент

image:user:registry-deploy-regulation-step-5.png[]

5. Перейдіть у __Gerrit → Changes → Open __та переконайтесь, що зміна створена

image:user:registry-deploy-regulation-step-6.png[]

6. Пройдіть quality gates, зайшовши у створену зміну:

====
Reply → натисніть кнопки:

"+2" для Code-Review

"+1" для Sonar-Verified

"+1" для Verified

Натисніть "Send" → "Submit" (Merge зміни)

====
image:user:registry-deploy-regulation-step-7.png[]

7. Перейдіть у _Gerrit → Changes → Merged_

* Знайдіть зміну та перейдіть у неї та переконайтесь, що СI Jenkins pipeline був запущений та дочекайтесь закінчення його виконання
* Слідкувати за виконанням можна безпосередньо перейшовши за посиланням CI Jenkins у Change Log або перейшовши на Jenkins job за посиланням, виділеним червоним
* Після успішного завершення роботи Jenkins job, можна переходити до перевірки створених сутностей

image:user:registry-deploy-regulation-step-8.png[]