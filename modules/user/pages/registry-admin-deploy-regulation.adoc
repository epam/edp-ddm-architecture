= Розгортання регламенту реєстру

Адміністратор регламенту формує та розгортає регламент реєстру, що передбачає внесення змін у наступні сутності:

* модель даних (_data-model_) та первинне наповнення даними (_data-load_)
* бізнес-процеси (_bpmn_)
* правила (_dmn_)
* форми (_forms_)
* змінні середовища (_global-vars_)
* звіти (_reports_)
* видимість бізнес-процесів для користувачів (_bp-auth_)
* ролі (_roles_)
* концігурація реєстру (_settings.yaml_)

== Кроки розгортання регламенту

**Крок 1**. Відкрийте Gerrit реєстру та залогінтесь

====
При успішному вході та переході у __Browse → Repositories__ повинен бути відображений наступний репозитарій:

* registry-regulations
====

image:user:registry-deploy-regulation-step-1.png[]

**Крок 2**. Перейдіть до registry-regulations репозитарію (натиснувши на назві репозитарію) скопіюйте виділену червоним команду для локального скачування репозитарію

image:user:registry-deploy-regulation-step-2.png[]


**Крок 3**. Відкрийте git bash або Terminal та виконайте скопійовану команду, де username та password беруться з профілю користувача у Gerrit (Settings → User Settings → HTTP Credentials)

image:user:registry-deploy-regulation-step-3.png[]

image:user:registry-deploy-regulation-step-4.png[]

**Крок 4**. Розкладіть раніше підготовлені файли у відповідні директорії __registry-regulations__ та виконайте у bash терміналі наступні команди:

----
git add .
git commit -m "Something updated"
git push origin HEAD:refs/for/master
----
*  "Something updated" - короткий опис змін, що вносяться у регламент

image:user:registry-deploy-regulation-step-5.png[]

**Крок 5**. Перейдіть у __Gerrit → Changes → Open __ та переконайтесь, що зміна створена

image:user:registry-deploy-regulation-step-6.png[]

**Крок 6**. Пройдіть quality gates, зайшовши у створену зміну:

====
__Reply →__ натисніть кнопки:

* "+2" для Code-Review

* "+1" для Sonar-Verified

* "+1" для Verified

Натисніть __"Send" → "Submit"__ (Merge зміни)

====
image:user:registry-deploy-regulation-step-7.png[]

**Крок 7**. Перейдіть у __Gerrit → Changes → Merged__

* Знайдіть зміну та перейдіть у неї та переконайтесь, що СI Jenkins pipeline був запущений та дочекайтесь закінчення його виконання
* Слідкувати за виконанням можна безпосередньо перейшовши за посиланням CI Jenkins у Change Log або перейшовши на Jenkins job за посиланням, виділеним червоним
* Після успішного завершення роботи Jenkins job, можна переходити до перевірки створених сутностей

image:user:registry-deploy-regulation-step-8.png[]